336599c9202c8207a9caf6a473bed3fb
'use strict';

var Platform = require("./Platform");

var TVEventHandler = require("../Components/AppleTV/TVEventHandler");

function emptyFunction() {}

var BackHandler;

if (Platform.isTV) {
  var _tvEventHandler = new TVEventHandler();

  var _backPressSubscriptions = new Set();

  _tvEventHandler.enable(this, function (cmp, evt) {
    if (evt && evt.eventType === 'menu') {
      var invokeDefault = true;
      var subscriptions = Array.from(_backPressSubscriptions.values()).reverse();

      for (var i = 0; i < subscriptions.length; ++i) {
        if (subscriptions[i]()) {
          invokeDefault = false;
          break;
        }
      }

      if (invokeDefault) {
        BackHandler.exitApp();
      }
    }
  });

  BackHandler = {
    exitApp: emptyFunction,
    addEventListener: function addEventListener(eventName, handler) {
      _backPressSubscriptions.add(handler);

      return {
        remove: function remove() {
          return BackHandler.removeEventListener(eventName, handler);
        }
      };
    },
    removeEventListener: function removeEventListener(eventName, handler) {
      _backPressSubscriptions.delete(handler);
    }
  };
} else {
  BackHandler = {
    exitApp: emptyFunction,
    addEventListener: function addEventListener(_eventName, _handler) {
      return {
        remove: emptyFunction
      };
    },
    removeEventListener: function removeEventListener(_eventName, _handler) {}
  };
}

module.exports = BackHandler;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkJhY2tIYW5kbGVyLmlvcy5qcyJdLCJuYW1lcyI6WyJQbGF0Zm9ybSIsInJlcXVpcmUiLCJUVkV2ZW50SGFuZGxlciIsImVtcHR5RnVuY3Rpb24iLCJCYWNrSGFuZGxlciIsImlzVFYiLCJfdHZFdmVudEhhbmRsZXIiLCJfYmFja1ByZXNzU3Vic2NyaXB0aW9ucyIsIlNldCIsImVuYWJsZSIsImNtcCIsImV2dCIsImV2ZW50VHlwZSIsImludm9rZURlZmF1bHQiLCJzdWJzY3JpcHRpb25zIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwicmV2ZXJzZSIsImkiLCJsZW5ndGgiLCJleGl0QXBwIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50TmFtZSIsImhhbmRsZXIiLCJhZGQiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGVsZXRlIiwiX2V2ZW50TmFtZSIsIl9oYW5kbGVyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBYUE7O0FBRUEsSUFBTUEsUUFBUSxHQUFHQyxPQUFPLGNBQXhCOztBQUNBLElBQU1DLGNBQWMsR0FBR0QsT0FBTyx3Q0FBOUI7O0FBSUEsU0FBU0UsYUFBVCxHQUErQixDQUFFOztBQTRDakMsSUFBSUMsV0FBSjs7QUFFQSxJQUFJSixRQUFRLENBQUNLLElBQWIsRUFBbUI7QUFDakIsTUFBTUMsZUFBZSxHQUFHLElBQUlKLGNBQUosRUFBeEI7O0FBQ0EsTUFBTUssdUJBQXVCLEdBQUcsSUFBSUMsR0FBSixFQUFoQzs7QUFFQUYsRUFBQUEsZUFBZSxDQUFDRyxNQUFoQixDQUF1QixJQUF2QixFQUE2QixVQUFTQyxHQUFULEVBQWNDLEdBQWQsRUFBbUI7QUFDOUMsUUFBSUEsR0FBRyxJQUFJQSxHQUFHLENBQUNDLFNBQUosS0FBa0IsTUFBN0IsRUFBcUM7QUFDbkMsVUFBSUMsYUFBYSxHQUFHLElBQXBCO0FBQ0EsVUFBTUMsYUFBYSxHQUFHQyxLQUFLLENBQUNDLElBQU4sQ0FDcEJULHVCQUF1QixDQUFDVSxNQUF4QixFQURvQixFQUVwQkMsT0FGb0IsRUFBdEI7O0FBSUEsV0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHTCxhQUFhLENBQUNNLE1BQWxDLEVBQTBDLEVBQUVELENBQTVDLEVBQStDO0FBQzdDLFlBQUlMLGFBQWEsQ0FBQ0ssQ0FBRCxDQUFiLEVBQUosRUFBd0I7QUFDdEJOLFVBQUFBLGFBQWEsR0FBRyxLQUFoQjtBQUNBO0FBQ0Q7QUFDRjs7QUFFRCxVQUFJQSxhQUFKLEVBQW1CO0FBQ2pCVCxRQUFBQSxXQUFXLENBQUNpQixPQUFaO0FBQ0Q7QUFDRjtBQUNGLEdBbEJEOztBQW9CQWpCLEVBQUFBLFdBQVcsR0FBRztBQUNaaUIsSUFBQUEsT0FBTyxFQUFFbEIsYUFERztBQUdabUIsSUFBQUEsZ0JBQWdCLEVBQUUsMEJBQ2hCQyxTQURnQixFQUVoQkMsT0FGZ0IsRUFHVztBQUMzQmpCLE1BQUFBLHVCQUF1QixDQUFDa0IsR0FBeEIsQ0FBNEJELE9BQTVCOztBQUNBLGFBQU87QUFDTEUsUUFBQUEsTUFBTSxFQUFFO0FBQUEsaUJBQU10QixXQUFXLENBQUN1QixtQkFBWixDQUFnQ0osU0FBaEMsRUFBMkNDLE9BQTNDLENBQU47QUFBQTtBQURILE9BQVA7QUFHRCxLQVhXO0FBYVpHLElBQUFBLG1CQUFtQixFQUFFLDZCQUNuQkosU0FEbUIsRUFFbkJDLE9BRm1CLEVBR2I7QUFDTmpCLE1BQUFBLHVCQUF1QixDQUFDcUIsTUFBeEIsQ0FBK0JKLE9BQS9CO0FBQ0Q7QUFsQlcsR0FBZDtBQW9CRCxDQTVDRCxNQTRDTztBQUNMcEIsRUFBQUEsV0FBVyxHQUFHO0FBQ1ppQixJQUFBQSxPQUFPLEVBQUVsQixhQURHO0FBRVptQixJQUFBQSxnQkFGWSw0QkFFS08sVUFGTCxFQUVxQ0MsUUFGckMsRUFFeUQ7QUFDbkUsYUFBTztBQUNMSixRQUFBQSxNQUFNLEVBQUV2QjtBQURILE9BQVA7QUFHRCxLQU5XO0FBT1p3QixJQUFBQSxtQkFQWSwrQkFPUUUsVUFQUixFQU93Q0MsUUFQeEMsRUFPNEQsQ0FBRTtBQVA5RCxHQUFkO0FBU0Q7O0FBRURDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjVCLFdBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbi8vIE9uIEFwcGxlIFRWLCB0aGlzIGltcGxlbWVudHMgYmFjayBuYXZpZ2F0aW9uIHVzaW5nIHRoZSBUViByZW1vdGUncyBtZW51IGJ1dHRvbi5cbi8vIE9uIGlPUywgdGhpcyBqdXN0IGltcGxlbWVudHMgYSBzdHViLlxuXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IFBsYXRmb3JtID0gcmVxdWlyZSgnLi9QbGF0Zm9ybScpO1xuY29uc3QgVFZFdmVudEhhbmRsZXIgPSByZXF1aXJlKCcuLi9Db21wb25lbnRzL0FwcGxlVFYvVFZFdmVudEhhbmRsZXInKTtcblxudHlwZSBCYWNrUHJlc3NFdmVudE5hbWUgPSAnYmFja1ByZXNzJyB8ICdoYXJkd2FyZUJhY2tQcmVzcyc7XG5cbmZ1bmN0aW9uIGVtcHR5RnVuY3Rpb24oKTogdm9pZCB7fVxuXG4vKipcbiAqIERldGVjdCBoYXJkd2FyZSBidXR0b24gcHJlc3NlcyBmb3IgYmFjayBuYXZpZ2F0aW9uLlxuICpcbiAqIEFuZHJvaWQ6IERldGVjdCBoYXJkd2FyZSBiYWNrIGJ1dHRvbiBwcmVzc2VzLCBhbmQgcHJvZ3JhbW1hdGljYWxseSBpbnZva2UgdGhlIGRlZmF1bHQgYmFjayBidXR0b25cbiAqIGZ1bmN0aW9uYWxpdHkgdG8gZXhpdCB0aGUgYXBwIGlmIHRoZXJlIGFyZSBubyBsaXN0ZW5lcnMgb3IgaWYgbm9uZSBvZiB0aGUgbGlzdGVuZXJzIHJldHVybiB0cnVlLlxuICpcbiAqIHR2T1M6IERldGVjdCBwcmVzc2VzIG9mIHRoZSBtZW51IGJ1dHRvbiBvbiB0aGUgVFYgcmVtb3RlLiAgKFN0aWxsIHRvIGJlIGltcGxlbWVudGVkOlxuICogcHJvZ3JhbW1hdGljYWxseSBkaXNhYmxlIG1lbnUgYnV0dG9uIGhhbmRsaW5nXG4gKiBmdW5jdGlvbmFsaXR5IHRvIGV4aXQgdGhlIGFwcCBpZiB0aGVyZSBhcmUgbm8gbGlzdGVuZXJzIG9yIGlmIG5vbmUgb2YgdGhlIGxpc3RlbmVycyByZXR1cm4gdHJ1ZS4pXG4gKlxuICogaU9TOiBOb3QgYXBwbGljYWJsZS5cbiAqXG4gKiBUaGUgZXZlbnQgc3Vic2NyaXB0aW9ucyBhcmUgY2FsbGVkIGluIHJldmVyc2Ugb3JkZXIgKGkuZS4gbGFzdCByZWdpc3RlcmVkIHN1YnNjcmlwdGlvbiBmaXJzdCksXG4gKiBhbmQgaWYgb25lIHN1YnNjcmlwdGlvbiByZXR1cm5zIHRydWUgdGhlbiBzdWJzY3JpcHRpb25zIHJlZ2lzdGVyZWQgZWFybGllciB3aWxsIG5vdCBiZSBjYWxsZWQuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBCYWNrSGFuZGxlci5hZGRFdmVudExpc3RlbmVyKCdoYXJkd2FyZUJhY2tQcmVzcycsIGZ1bmN0aW9uKCkge1xuICogIC8vIHRoaXMub25NYWluU2NyZWVuIGFuZCB0aGlzLmdvQmFjayBhcmUganVzdCBleGFtcGxlcywgeW91IG5lZWQgdG8gdXNlIHlvdXIgb3duIGltcGxlbWVudGF0aW9uIGhlcmVcbiAqICAvLyBUeXBpY2FsbHkgeW91IHdvdWxkIHVzZSB0aGUgbmF2aWdhdG9yIGhlcmUgdG8gZ28gdG8gdGhlIGxhc3Qgc3RhdGUuXG4gKlxuICogIGlmICghdGhpcy5vbk1haW5TY3JlZW4oKSkge1xuICogICAgdGhpcy5nb0JhY2soKTtcbiAqICAgIHJldHVybiB0cnVlO1xuICogIH1cbiAqICByZXR1cm4gZmFsc2U7XG4gKiB9KTtcbiAqIGBgYFxuICovXG50eXBlIFRCYWNrSGFuZGxlciA9IHt8XG4gICtleGl0QXBwOiAoKSA9PiB2b2lkLFxuICArYWRkRXZlbnRMaXN0ZW5lcjogKFxuICAgIGV2ZW50TmFtZTogQmFja1ByZXNzRXZlbnROYW1lLFxuICAgIGhhbmRsZXI6IEZ1bmN0aW9uLFxuICApID0+IHtyZW1vdmU6ICgpID0+IHZvaWQsIC4uLn0sXG4gICtyZW1vdmVFdmVudExpc3RlbmVyOiAoXG4gICAgZXZlbnROYW1lOiBCYWNrUHJlc3NFdmVudE5hbWUsXG4gICAgaGFuZGxlcjogRnVuY3Rpb24sXG4gICkgPT4gdm9pZCxcbnx9O1xuXG5sZXQgQmFja0hhbmRsZXI6IFRCYWNrSGFuZGxlcjtcblxuaWYgKFBsYXRmb3JtLmlzVFYpIHtcbiAgY29uc3QgX3R2RXZlbnRIYW5kbGVyID0gbmV3IFRWRXZlbnRIYW5kbGVyKCk7XG4gIGNvbnN0IF9iYWNrUHJlc3NTdWJzY3JpcHRpb25zID0gbmV3IFNldCgpO1xuXG4gIF90dkV2ZW50SGFuZGxlci5lbmFibGUodGhpcywgZnVuY3Rpb24oY21wLCBldnQpIHtcbiAgICBpZiAoZXZ0ICYmIGV2dC5ldmVudFR5cGUgPT09ICdtZW51Jykge1xuICAgICAgbGV0IGludm9rZURlZmF1bHQgPSB0cnVlO1xuICAgICAgY29uc3Qgc3Vic2NyaXB0aW9ucyA9IEFycmF5LmZyb20oXG4gICAgICAgIF9iYWNrUHJlc3NTdWJzY3JpcHRpb25zLnZhbHVlcygpLFxuICAgICAgKS5yZXZlcnNlKCk7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3Vic2NyaXB0aW9ucy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uc1tpXSgpKSB7XG4gICAgICAgICAgaW52b2tlRGVmYXVsdCA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpbnZva2VEZWZhdWx0KSB7XG4gICAgICAgIEJhY2tIYW5kbGVyLmV4aXRBcHAoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIEJhY2tIYW5kbGVyID0ge1xuICAgIGV4aXRBcHA6IGVtcHR5RnVuY3Rpb24sXG5cbiAgICBhZGRFdmVudExpc3RlbmVyOiBmdW5jdGlvbihcbiAgICAgIGV2ZW50TmFtZTogQmFja1ByZXNzRXZlbnROYW1lLFxuICAgICAgaGFuZGxlcjogRnVuY3Rpb24sXG4gICAgKToge3JlbW92ZTogKCkgPT4gdm9pZCwgLi4ufSB7XG4gICAgICBfYmFja1ByZXNzU3Vic2NyaXB0aW9ucy5hZGQoaGFuZGxlcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmU6ICgpID0+IEJhY2tIYW5kbGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKSxcbiAgICAgIH07XG4gICAgfSxcblxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uKFxuICAgICAgZXZlbnROYW1lOiBCYWNrUHJlc3NFdmVudE5hbWUsXG4gICAgICBoYW5kbGVyOiBGdW5jdGlvbixcbiAgICApOiB2b2lkIHtcbiAgICAgIF9iYWNrUHJlc3NTdWJzY3JpcHRpb25zLmRlbGV0ZShoYW5kbGVyKTtcbiAgICB9LFxuICB9O1xufSBlbHNlIHtcbiAgQmFja0hhbmRsZXIgPSB7XG4gICAgZXhpdEFwcDogZW1wdHlGdW5jdGlvbixcbiAgICBhZGRFdmVudExpc3RlbmVyKF9ldmVudE5hbWU6IEJhY2tQcmVzc0V2ZW50TmFtZSwgX2hhbmRsZXI6IEZ1bmN0aW9uKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZW1vdmU6IGVtcHR5RnVuY3Rpb24sXG4gICAgICB9O1xuICAgIH0sXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihfZXZlbnROYW1lOiBCYWNrUHJlc3NFdmVudE5hbWUsIF9oYW5kbGVyOiBGdW5jdGlvbikge30sXG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmFja0hhbmRsZXI7XG4iXX0=