40c5f949d280f731b101dd674ffdf611
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _RCTModalHostViewNativeComponent = _interopRequireDefault(require("./RCTModalHostViewNativeComponent"));

var _container;

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var AppContainer = require("../ReactNative/AppContainer");

var I18nManager = require("../ReactNative/I18nManager");

var PropTypes = require('prop-types');

var React = require('react');

var ScrollView = require("../Components/ScrollView/ScrollView");

var StyleSheet = require("../StyleSheet/StyleSheet");

var View = require("../Components/View/View");

var uniqueModalIdentifier = 0;

var Modal = function (_React$Component) {
  (0, _inherits2.default)(Modal, _React$Component);

  var _super = _createSuper(Modal);

  function Modal(props) {
    var _this;

    (0, _classCallCheck2.default)(this, Modal);
    _this = _super.call(this, props);

    Modal._confirmProps(props);

    _this._identifier = uniqueModalIdentifier++;
    return _this;
  }

  (0, _createClass2.default)(Modal, [{
    key: "getChildContext",
    value: function getChildContext() {
      return {
        virtualizedList: null
      };
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this.props.onDismiss != null) {
        this.props.onDismiss();
      }
    }
  }, {
    key: "UNSAFE_componentWillReceiveProps",
    value: function UNSAFE_componentWillReceiveProps(nextProps) {
      Modal._confirmProps(nextProps);
    }
  }, {
    key: "render",
    value: function render() {
      if (this.props.visible !== true) {
        return null;
      }

      var containerStyles = {
        backgroundColor: this.props.transparent ? 'transparent' : 'white'
      };
      var animationType = this.props.animationType || 'none';
      var presentationStyle = this.props.presentationStyle;

      if (!presentationStyle) {
        presentationStyle = 'fullScreen';

        if (this.props.transparent) {
          presentationStyle = 'overFullScreen';
        }
      }

      var innerChildren = __DEV__ ? React.createElement(AppContainer, {
        rootTag: this.context.rootTag
      }, this.props.children) : this.props.children;
      return React.createElement(_RCTModalHostViewNativeComponent.default, {
        animationType: animationType,
        presentationStyle: presentationStyle,
        transparent: this.props.transparent,
        hardwareAccelerated: this.props.hardwareAccelerated,
        onRequestClose: this.props.onRequestClose,
        onShow: this.props.onShow,
        statusBarTranslucent: this.props.statusBarTranslucent,
        identifier: this._identifier,
        style: styles.modal,
        onStartShouldSetResponder: this._shouldSetResponder,
        supportedOrientations: this.props.supportedOrientations,
        onOrientationChange: this.props.onOrientationChange
      }, React.createElement(ScrollView.Context.Provider, {
        value: null
      }, React.createElement(View, {
        style: [styles.container, containerStyles]
      }, innerChildren)));
    }
  }, {
    key: "_shouldSetResponder",
    value: function _shouldSetResponder() {
      return true;
    }
  }], [{
    key: "_confirmProps",
    value: function _confirmProps(props) {
      if (props.presentationStyle && props.presentationStyle !== 'overFullScreen' && props.transparent) {
        console.warn("Modal with '" + props.presentationStyle + "' presentation style and 'transparent' value is not supported.");
      }
    }
  }]);
  return Modal;
}(React.Component);

Modal.defaultProps = {
  visible: true,
  hardwareAccelerated: false
};
Modal.contextTypes = {
  rootTag: PropTypes.number
};
Modal.childContextTypes = {
  virtualizedList: PropTypes.object
};
var side = I18nManager.getConstants().isRTL ? 'right' : 'left';
var styles = StyleSheet.create({
  modal: {
    position: 'absolute'
  },
  container: (_container = {}, (0, _defineProperty2.default)(_container, side, 0), (0, _defineProperty2.default)(_container, "top", 0), (0, _defineProperty2.default)(_container, "flex", 1), _container)
});
module.exports = Modal;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1vZGFsLmpzIl0sIm5hbWVzIjpbIkFwcENvbnRhaW5lciIsInJlcXVpcmUiLCJJMThuTWFuYWdlciIsIlByb3BUeXBlcyIsIlJlYWN0IiwiU2Nyb2xsVmlldyIsIlN0eWxlU2hlZXQiLCJWaWV3IiwidW5pcXVlTW9kYWxJZGVudGlmaWVyIiwiTW9kYWwiLCJwcm9wcyIsIl9jb25maXJtUHJvcHMiLCJfaWRlbnRpZmllciIsInZpcnR1YWxpemVkTGlzdCIsIm9uRGlzbWlzcyIsIm5leHRQcm9wcyIsInZpc2libGUiLCJjb250YWluZXJTdHlsZXMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ0cmFuc3BhcmVudCIsImFuaW1hdGlvblR5cGUiLCJwcmVzZW50YXRpb25TdHlsZSIsImlubmVyQ2hpbGRyZW4iLCJfX0RFVl9fIiwiY29udGV4dCIsInJvb3RUYWciLCJjaGlsZHJlbiIsImhhcmR3YXJlQWNjZWxlcmF0ZWQiLCJvblJlcXVlc3RDbG9zZSIsIm9uU2hvdyIsInN0YXR1c0JhclRyYW5zbHVjZW50Iiwic3R5bGVzIiwibW9kYWwiLCJfc2hvdWxkU2V0UmVzcG9uZGVyIiwic3VwcG9ydGVkT3JpZW50YXRpb25zIiwib25PcmllbnRhdGlvbkNoYW5nZSIsImNvbnRhaW5lciIsImNvbnNvbGUiLCJ3YXJuIiwiQ29tcG9uZW50IiwiZGVmYXVsdFByb3BzIiwiY29udGV4dFR5cGVzIiwibnVtYmVyIiwiY2hpbGRDb250ZXh0VHlwZXMiLCJvYmplY3QiLCJzaWRlIiwiZ2V0Q29uc3RhbnRzIiwiaXNSVEwiLCJjcmVhdGUiLCJwb3NpdGlvbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQVVBOzs7Ozs7Ozs7Ozs7Ozs7O0FBYUE7Ozs7Ozs7O0FBWEEsSUFBTUEsWUFBWSxHQUFHQyxPQUFPLCtCQUE1Qjs7QUFDQSxJQUFNQyxXQUFXLEdBQUdELE9BQU8sOEJBQTNCOztBQUNBLElBQU1FLFNBQVMsR0FBR0YsT0FBTyxDQUFDLFlBQUQsQ0FBekI7O0FBQ0EsSUFBTUcsS0FBSyxHQUFHSCxPQUFPLENBQUMsT0FBRCxDQUFyQjs7QUFDQSxJQUFNSSxVQUFVLEdBQUdKLE9BQU8sdUNBQTFCOztBQUNBLElBQU1LLFVBQVUsR0FBR0wsT0FBTyw0QkFBMUI7O0FBQ0EsSUFBTU0sSUFBSSxHQUFHTixPQUFPLDJCQUFwQjs7QUFnQkEsSUFBSU8scUJBQXFCLEdBQUcsQ0FBNUI7O0lBNEdNQyxLOzs7OztBQWFKLGlCQUFZQyxLQUFaLEVBQTBCO0FBQUE7O0FBQUE7QUFDeEIsOEJBQU1BLEtBQU47O0FBQ0FELElBQUFBLEtBQUssQ0FBQ0UsYUFBTixDQUFvQkQsS0FBcEI7O0FBQ0EsVUFBS0UsV0FBTCxHQUFtQkoscUJBQXFCLEVBQXhDO0FBSHdCO0FBSXpCOzs7O1dBUUQsMkJBQTZDO0FBRzNDLGFBQU87QUFDTEssUUFBQUEsZUFBZSxFQUFFO0FBRFosT0FBUDtBQUdEOzs7V0FFRCxnQ0FBdUI7QUFDckIsVUFBSSxLQUFLSCxLQUFMLENBQVdJLFNBQVgsSUFBd0IsSUFBNUIsRUFBa0M7QUFDaEMsYUFBS0osS0FBTCxDQUFXSSxTQUFYO0FBQ0Q7QUFDRjs7O1dBRUQsMENBQWlDQyxTQUFqQyxFQUFtRDtBQUNqRE4sTUFBQUEsS0FBSyxDQUFDRSxhQUFOLENBQW9CSSxTQUFwQjtBQUNEOzs7V0FnQkQsa0JBQXFCO0FBQ25CLFVBQUksS0FBS0wsS0FBTCxDQUFXTSxPQUFYLEtBQXVCLElBQTNCLEVBQWlDO0FBQy9CLGVBQU8sSUFBUDtBQUNEOztBQUVELFVBQU1DLGVBQWUsR0FBRztBQUN0QkMsUUFBQUEsZUFBZSxFQUFFLEtBQUtSLEtBQUwsQ0FBV1MsV0FBWCxHQUF5QixhQUF6QixHQUF5QztBQURwQyxPQUF4QjtBQUlBLFVBQUlDLGFBQWEsR0FBRyxLQUFLVixLQUFMLENBQVdVLGFBQVgsSUFBNEIsTUFBaEQ7QUFFQSxVQUFJQyxpQkFBaUIsR0FBRyxLQUFLWCxLQUFMLENBQVdXLGlCQUFuQzs7QUFDQSxVQUFJLENBQUNBLGlCQUFMLEVBQXdCO0FBQ3RCQSxRQUFBQSxpQkFBaUIsR0FBRyxZQUFwQjs7QUFDQSxZQUFJLEtBQUtYLEtBQUwsQ0FBV1MsV0FBZixFQUE0QjtBQUMxQkUsVUFBQUEsaUJBQWlCLEdBQUcsZ0JBQXBCO0FBQ0Q7QUFDRjs7QUFFRCxVQUFNQyxhQUFhLEdBQUdDLE9BQU8sR0FDM0Isb0JBQUMsWUFBRDtBQUFjLFFBQUEsT0FBTyxFQUFFLEtBQUtDLE9BQUwsQ0FBYUM7QUFBcEMsU0FDRyxLQUFLZixLQUFMLENBQVdnQixRQURkLENBRDJCLEdBSzNCLEtBQUtoQixLQUFMLENBQVdnQixRQUxiO0FBUUEsYUFDRSxvQkFBQyx3Q0FBRDtBQUNFLFFBQUEsYUFBYSxFQUFFTixhQURqQjtBQUVFLFFBQUEsaUJBQWlCLEVBQUVDLGlCQUZyQjtBQUdFLFFBQUEsV0FBVyxFQUFFLEtBQUtYLEtBQUwsQ0FBV1MsV0FIMUI7QUFJRSxRQUFBLG1CQUFtQixFQUFFLEtBQUtULEtBQUwsQ0FBV2lCLG1CQUpsQztBQUtFLFFBQUEsY0FBYyxFQUFFLEtBQUtqQixLQUFMLENBQVdrQixjQUw3QjtBQU1FLFFBQUEsTUFBTSxFQUFFLEtBQUtsQixLQUFMLENBQVdtQixNQU5yQjtBQU9FLFFBQUEsb0JBQW9CLEVBQUUsS0FBS25CLEtBQUwsQ0FBV29CLG9CQVBuQztBQVFFLFFBQUEsVUFBVSxFQUFFLEtBQUtsQixXQVJuQjtBQVNFLFFBQUEsS0FBSyxFQUFFbUIsTUFBTSxDQUFDQyxLQVRoQjtBQVVFLFFBQUEseUJBQXlCLEVBQUUsS0FBS0MsbUJBVmxDO0FBV0UsUUFBQSxxQkFBcUIsRUFBRSxLQUFLdkIsS0FBTCxDQUFXd0IscUJBWHBDO0FBWUUsUUFBQSxtQkFBbUIsRUFBRSxLQUFLeEIsS0FBTCxDQUFXeUI7QUFabEMsU0FhRSxvQkFBQyxVQUFELENBQVksT0FBWixDQUFvQixRQUFwQjtBQUE2QixRQUFBLEtBQUssRUFBRTtBQUFwQyxTQUNFLG9CQUFDLElBQUQ7QUFBTSxRQUFBLEtBQUssRUFBRSxDQUFDSixNQUFNLENBQUNLLFNBQVIsRUFBbUJuQixlQUFuQjtBQUFiLFNBQ0dLLGFBREgsQ0FERixDQWJGLENBREY7QUFxQkQ7OztXQUdELCtCQUErQjtBQUM3QixhQUFPLElBQVA7QUFDRDs7O1dBbkVELHVCQUFxQlosS0FBckIsRUFBbUM7QUFDakMsVUFDRUEsS0FBSyxDQUFDVyxpQkFBTixJQUNBWCxLQUFLLENBQUNXLGlCQUFOLEtBQTRCLGdCQUQ1QixJQUVBWCxLQUFLLENBQUNTLFdBSFIsRUFJRTtBQUNBa0IsUUFBQUEsT0FBTyxDQUFDQyxJQUFSLGtCQUVJNUIsS0FBSyxDQUFDVyxpQkFGVjtBQUtEO0FBQ0Y7OztFQXZEaUJqQixLQUFLLENBQUNtQyxTOztBQUFwQjlCLEssQ0FDRytCLFksR0FBbUU7QUFDeEV4QixFQUFBQSxPQUFPLEVBQUUsSUFEK0Q7QUFFeEVXLEVBQUFBLG1CQUFtQixFQUFFO0FBRm1ELEM7QUFEdEVsQixLLENBTUdnQyxZLEdBQW9FO0FBQ3pFaEIsRUFBQUEsT0FBTyxFQUFFdEIsU0FBUyxDQUFDdUM7QUFEc0QsQztBQU52RWpDLEssQ0FtQkdrQyxpQixHQUVrRDtBQUN2RDlCLEVBQUFBLGVBQWUsRUFBRVYsU0FBUyxDQUFDeUM7QUFENEIsQztBQTRGM0QsSUFBTUMsSUFBSSxHQUFHM0MsV0FBVyxDQUFDNEMsWUFBWixHQUEyQkMsS0FBM0IsR0FBbUMsT0FBbkMsR0FBNkMsTUFBMUQ7QUFDQSxJQUFNaEIsTUFBTSxHQUFHekIsVUFBVSxDQUFDMEMsTUFBWCxDQUFrQjtBQUMvQmhCLEVBQUFBLEtBQUssRUFBRTtBQUNMaUIsSUFBQUEsUUFBUSxFQUFFO0FBREwsR0FEd0I7QUFJL0JiLEVBQUFBLFNBQVMsOERBSU5TLElBSk0sRUFJQyxDQUpELG9EQUtGLENBTEUscURBTUQsQ0FOQztBQUpzQixDQUFsQixDQUFmO0FBY0FLLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjFDLEtBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZm9ybWF0XG4gKiBAZmxvd1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgQXBwQ29udGFpbmVyID0gcmVxdWlyZSgnLi4vUmVhY3ROYXRpdmUvQXBwQ29udGFpbmVyJyk7XG5jb25zdCBJMThuTWFuYWdlciA9IHJlcXVpcmUoJy4uL1JlYWN0TmF0aXZlL0kxOG5NYW5hZ2VyJyk7XG5jb25zdCBQcm9wVHlwZXMgPSByZXF1aXJlKCdwcm9wLXR5cGVzJyk7XG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5jb25zdCBTY3JvbGxWaWV3ID0gcmVxdWlyZSgnLi4vQ29tcG9uZW50cy9TY3JvbGxWaWV3L1Njcm9sbFZpZXcnKTtcbmNvbnN0IFN0eWxlU2hlZXQgPSByZXF1aXJlKCcuLi9TdHlsZVNoZWV0L1N0eWxlU2hlZXQnKTtcbmNvbnN0IFZpZXcgPSByZXF1aXJlKCcuLi9Db21wb25lbnRzL1ZpZXcvVmlldycpO1xuXG5pbXBvcnQgdHlwZSB7Vmlld1Byb3BzfSBmcm9tICcuLi9Db21wb25lbnRzL1ZpZXcvVmlld1Byb3BUeXBlcyc7XG5pbXBvcnQgdHlwZSB7RGlyZWN0RXZlbnRIYW5kbGVyfSBmcm9tICcuLi9UeXBlcy9Db2RlZ2VuVHlwZXMnO1xuaW1wb3J0IHR5cGUgRW1pdHRlclN1YnNjcmlwdGlvbiBmcm9tICcuLi92ZW5kb3IvZW1pdHRlci9FbWl0dGVyU3Vic2NyaXB0aW9uJztcbmltcG9ydCBSQ1RNb2RhbEhvc3RWaWV3IGZyb20gJy4vUkNUTW9kYWxIb3N0Vmlld05hdGl2ZUNvbXBvbmVudCc7XG4vKipcbiAqIFRoZSBNb2RhbCBjb21wb25lbnQgaXMgYSBzaW1wbGUgd2F5IHRvIHByZXNlbnQgY29udGVudCBhYm92ZSBhbiBlbmNsb3Npbmcgdmlldy5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9tb2RhbC5odG1sXG4gKi9cblxuLy8gSW4gb3JkZXIgdG8gcm91dGUgb25EaXNtaXNzIGNhbGxiYWNrcywgd2UgbmVlZCB0byB1bmlxdWVseSBpZGVudGlmaWVyIGVhY2hcbi8vIDxNb2RhbD4gb24gc2NyZWVuLiBUaGVyZSBjYW4gYmUgZGlmZmVyZW50IG9uZXMsIGVpdGhlciBuZXN0ZWQgb3IgYXMgc2libGluZ3MuXG4vLyBXZSBjYW5ub3QgcGFzcyB0aGUgb25EaXNtaXNzIGNhbGxiYWNrIHRvIG5hdGl2ZSBhcyB0aGUgdmlldyB3aWxsIGJlXG4vLyBkZXN0cm95ZWQgYmVmb3JlIHRoZSBjYWxsYmFjayBpcyBmaXJlZC5cbmxldCB1bmlxdWVNb2RhbElkZW50aWZpZXIgPSAwO1xuXG50eXBlIE9yaWVudGF0aW9uQ2hhbmdlRXZlbnQgPSAkUmVhZE9ubHk8e3xcbiAgb3JpZW50YXRpb246ICdwb3J0cmFpdCcgfCAnbGFuZHNjYXBlJyxcbnx9PjtcblxuZXhwb3J0IHR5cGUgUHJvcHMgPSAkUmVhZE9ubHk8e3xcbiAgLi4uVmlld1Byb3BzLFxuXG4gIC8qKlxuICAgKiBUaGUgYGFuaW1hdGlvblR5cGVgIHByb3AgY29udHJvbHMgaG93IHRoZSBtb2RhbCBhbmltYXRlcy5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvbW9kYWwuaHRtbCNhbmltYXRpb250eXBlXG4gICAqL1xuICBhbmltYXRpb25UeXBlPzogPygnbm9uZScgfCAnc2xpZGUnIHwgJ2ZhZGUnKSxcblxuICAvKipcbiAgICogVGhlIGBwcmVzZW50YXRpb25TdHlsZWAgcHJvcCBjb250cm9scyBob3cgdGhlIG1vZGFsIGFwcGVhcnMuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL21vZGFsLmh0bWwjcHJlc2VudGF0aW9uc3R5bGVcbiAgICovXG4gIHByZXNlbnRhdGlvblN0eWxlPzogPyhcbiAgICB8ICdmdWxsU2NyZWVuJ1xuICAgIHwgJ3BhZ2VTaGVldCdcbiAgICB8ICdmb3JtU2hlZXQnXG4gICAgfCAnb3ZlckZ1bGxTY3JlZW4nXG4gICksXG5cbiAgLyoqXG4gICAqIFRoZSBgdHJhbnNwYXJlbnRgIHByb3AgZGV0ZXJtaW5lcyB3aGV0aGVyIHlvdXIgbW9kYWwgd2lsbCBmaWxsIHRoZVxuICAgKiBlbnRpcmUgdmlldy5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvbW9kYWwuaHRtbCN0cmFuc3BhcmVudFxuICAgKi9cbiAgdHJhbnNwYXJlbnQ/OiA/Ym9vbGVhbixcblxuICAvKipcbiAgICogVGhlIGBzdGF0dXNCYXJUcmFuc2x1Y2VudGAgcHJvcCBkZXRlcm1pbmVzIHdoZXRoZXIgeW91ciBtb2RhbCBzaG91bGQgZ28gdW5kZXJcbiAgICogdGhlIHN5c3RlbSBzdGF0dXNiYXIuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL21vZGFsLmh0bWwjdHJhbnNwYXJlbnRcbiAgICovXG4gIHN0YXR1c0JhclRyYW5zbHVjZW50PzogP2Jvb2xlYW4sXG5cbiAgLyoqXG4gICAqIFRoZSBgaGFyZHdhcmVBY2NlbGVyYXRlZGAgcHJvcCBjb250cm9scyB3aGV0aGVyIHRvIGZvcmNlIGhhcmR3YXJlXG4gICAqIGFjY2VsZXJhdGlvbiBmb3IgdGhlIHVuZGVybHlpbmcgd2luZG93LlxuICAgKlxuICAgKiBUaGlzIHByb3Agd29ya3Mgb25seSBvbiBBbmRyb2lkLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9tb2RhbC5odG1sI2hhcmR3YXJlYWNjZWxlcmF0ZWRcbiAgICovXG4gIGhhcmR3YXJlQWNjZWxlcmF0ZWQ/OiA/Ym9vbGVhbixcblxuICAvKipcbiAgICogVGhlIGB2aXNpYmxlYCBwcm9wIGRldGVybWluZXMgd2hldGhlciB5b3VyIG1vZGFsIGlzIHZpc2libGUuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL21vZGFsLmh0bWwjdmlzaWJsZVxuICAgKi9cbiAgdmlzaWJsZT86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBUaGUgYG9uUmVxdWVzdENsb3NlYCBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgdXNlciB0YXBzIHRoZSBoYXJkd2FyZVxuICAgKiBiYWNrIGJ1dHRvbiBvbiBBbmRyb2lkIG9yIHRoZSBtZW51IGJ1dHRvbiBvbiBBcHBsZSBUVi5cbiAgICpcbiAgICogVGhpcyBpcyByZXF1aXJlZCBvbiBBcHBsZSBUViBhbmQgQW5kcm9pZC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvbW9kYWwuaHRtbCNvbnJlcXVlc3RjbG9zZVxuICAgKi9cbiAgb25SZXF1ZXN0Q2xvc2U/OiA/RGlyZWN0RXZlbnRIYW5kbGVyPG51bGw+LFxuXG4gIC8qKlxuICAgKiBUaGUgYG9uU2hvd2AgcHJvcCBhbGxvd3MgcGFzc2luZyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgb25jZSB0aGVcbiAgICogbW9kYWwgaGFzIGJlZW4gc2hvd24uXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL21vZGFsLmh0bWwjb25zaG93XG4gICAqL1xuICBvblNob3c/OiA/RGlyZWN0RXZlbnRIYW5kbGVyPG51bGw+LFxuXG4gIC8qKlxuICAgKiBUaGUgYG9uRGlzbWlzc2AgcHJvcCBhbGxvd3MgcGFzc2luZyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgb25jZVxuICAgKiB0aGUgbW9kYWwgaGFzIGJlZW4gZGlzbWlzc2VkLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9tb2RhbC5odG1sI29uZGlzbWlzc1xuICAgKi9cbiAgb25EaXNtaXNzPzogPygpID0+IG1peGVkLFxuXG4gIC8qKlxuICAgKiBUaGUgYHN1cHBvcnRlZE9yaWVudGF0aW9uc2AgcHJvcCBhbGxvd3MgdGhlIG1vZGFsIHRvIGJlIHJvdGF0ZWQgdG8gYW55IG9mIHRoZSBzcGVjaWZpZWQgb3JpZW50YXRpb25zLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9tb2RhbC5odG1sI3N1cHBvcnRlZG9yaWVudGF0aW9uc1xuICAgKi9cbiAgc3VwcG9ydGVkT3JpZW50YXRpb25zPzogPyRSZWFkT25seUFycmF5PFxuICAgIHwgJ3BvcnRyYWl0J1xuICAgIHwgJ3BvcnRyYWl0LXVwc2lkZS1kb3duJ1xuICAgIHwgJ2xhbmRzY2FwZSdcbiAgICB8ICdsYW5kc2NhcGUtbGVmdCdcbiAgICB8ICdsYW5kc2NhcGUtcmlnaHQnLFxuICA+LFxuXG4gIC8qKlxuICAgKiBUaGUgYG9uT3JpZW50YXRpb25DaGFuZ2VgIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSBvcmllbnRhdGlvbiBjaGFuZ2VzIHdoaWxlIHRoZSBtb2RhbCBpcyBiZWluZyBkaXNwbGF5ZWQuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL21vZGFsLmh0bWwjb25vcmllbnRhdGlvbmNoYW5nZVxuICAgKi9cbiAgb25PcmllbnRhdGlvbkNoYW5nZT86ID9EaXJlY3RFdmVudEhhbmRsZXI8T3JpZW50YXRpb25DaGFuZ2VFdmVudD4sXG58fT47XG5cbmNsYXNzIE1vZGFsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XG4gIHN0YXRpYyBkZWZhdWx0UHJvcHM6IHt8aGFyZHdhcmVBY2NlbGVyYXRlZDogYm9vbGVhbiwgdmlzaWJsZTogYm9vbGVhbnx9ID0ge1xuICAgIHZpc2libGU6IHRydWUsXG4gICAgaGFyZHdhcmVBY2NlbGVyYXRlZDogZmFsc2UsXG4gIH07XG5cbiAgc3RhdGljIGNvbnRleHRUeXBlczogYW55IHwge3xyb290VGFnOiBSZWFjdCRQcm9wVHlwZSRQcmltaXRpdmU8bnVtYmVyPnx9ID0ge1xuICAgIHJvb3RUYWc6IFByb3BUeXBlcy5udW1iZXIsXG4gIH07XG5cbiAgX2lkZW50aWZpZXI6IG51bWJlcjtcbiAgX2V2ZW50U3Vic2NyaXB0aW9uOiA/RW1pdHRlclN1YnNjcmlwdGlvbjtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgTW9kYWwuX2NvbmZpcm1Qcm9wcyhwcm9wcyk7XG4gICAgdGhpcy5faWRlbnRpZmllciA9IHVuaXF1ZU1vZGFsSWRlbnRpZmllcisrO1xuICB9XG5cbiAgc3RhdGljIGNoaWxkQ29udGV4dFR5cGVzOlxuICAgIHwgYW55XG4gICAgfCB7fHZpcnR1YWxpemVkTGlzdDogUmVhY3QkUHJvcFR5cGUkUHJpbWl0aXZlPGFueT58fSA9IHtcbiAgICB2aXJ0dWFsaXplZExpc3Q6IFByb3BUeXBlcy5vYmplY3QsXG4gIH07XG5cbiAgZ2V0Q2hpbGRDb250ZXh0KCk6IHt8dmlydHVhbGl6ZWRMaXN0OiBudWxsfH0ge1xuICAgIC8vIFJlc2V0IHRoZSBjb250ZXh0IHNvIFZpcnR1YWxpemVkTGlzdCBkb2Vzbid0IGdldCBjb25mdXNlZCBieSBuZXN0aW5nXG4gICAgLy8gaW4gdGhlIFJlYWN0IHRyZWUgdGhhdCBkb2Vzbid0IHJlZmxlY3QgdGhlIG5hdGl2ZSBjb21wb25lbnQgaGllcmFyY2h5LlxuICAgIHJldHVybiB7XG4gICAgICB2aXJ0dWFsaXplZExpc3Q6IG51bGwsXG4gICAgfTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIGlmICh0aGlzLnByb3BzLm9uRGlzbWlzcyAhPSBudWxsKSB7XG4gICAgICB0aGlzLnByb3BzLm9uRGlzbWlzcygpO1xuICAgIH1cbiAgfVxuXG4gIFVOU0FGRV9jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wczogUHJvcHMpIHtcbiAgICBNb2RhbC5fY29uZmlybVByb3BzKG5leHRQcm9wcyk7XG4gIH1cblxuICBzdGF0aWMgX2NvbmZpcm1Qcm9wcyhwcm9wczogUHJvcHMpIHtcbiAgICBpZiAoXG4gICAgICBwcm9wcy5wcmVzZW50YXRpb25TdHlsZSAmJlxuICAgICAgcHJvcHMucHJlc2VudGF0aW9uU3R5bGUgIT09ICdvdmVyRnVsbFNjcmVlbicgJiZcbiAgICAgIHByb3BzLnRyYW5zcGFyZW50XG4gICAgKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBNb2RhbCB3aXRoICcke1xuICAgICAgICAgIHByb3BzLnByZXNlbnRhdGlvblN0eWxlXG4gICAgICAgIH0nIHByZXNlbnRhdGlvbiBzdHlsZSBhbmQgJ3RyYW5zcGFyZW50JyB2YWx1ZSBpcyBub3Qgc3VwcG9ydGVkLmAsXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpOiBSZWFjdC5Ob2RlIHtcbiAgICBpZiAodGhpcy5wcm9wcy52aXNpYmxlICE9PSB0cnVlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBjb250YWluZXJTdHlsZXMgPSB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMucHJvcHMudHJhbnNwYXJlbnQgPyAndHJhbnNwYXJlbnQnIDogJ3doaXRlJyxcbiAgICB9O1xuXG4gICAgbGV0IGFuaW1hdGlvblR5cGUgPSB0aGlzLnByb3BzLmFuaW1hdGlvblR5cGUgfHwgJ25vbmUnO1xuXG4gICAgbGV0IHByZXNlbnRhdGlvblN0eWxlID0gdGhpcy5wcm9wcy5wcmVzZW50YXRpb25TdHlsZTtcbiAgICBpZiAoIXByZXNlbnRhdGlvblN0eWxlKSB7XG4gICAgICBwcmVzZW50YXRpb25TdHlsZSA9ICdmdWxsU2NyZWVuJztcbiAgICAgIGlmICh0aGlzLnByb3BzLnRyYW5zcGFyZW50KSB7XG4gICAgICAgIHByZXNlbnRhdGlvblN0eWxlID0gJ292ZXJGdWxsU2NyZWVuJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpbm5lckNoaWxkcmVuID0gX19ERVZfXyA/IChcbiAgICAgIDxBcHBDb250YWluZXIgcm9vdFRhZz17dGhpcy5jb250ZXh0LnJvb3RUYWd9PlxuICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgIDwvQXBwQ29udGFpbmVyPlxuICAgICkgOiAoXG4gICAgICB0aGlzLnByb3BzLmNoaWxkcmVuXG4gICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8UkNUTW9kYWxIb3N0Vmlld1xuICAgICAgICBhbmltYXRpb25UeXBlPXthbmltYXRpb25UeXBlfVxuICAgICAgICBwcmVzZW50YXRpb25TdHlsZT17cHJlc2VudGF0aW9uU3R5bGV9XG4gICAgICAgIHRyYW5zcGFyZW50PXt0aGlzLnByb3BzLnRyYW5zcGFyZW50fVxuICAgICAgICBoYXJkd2FyZUFjY2VsZXJhdGVkPXt0aGlzLnByb3BzLmhhcmR3YXJlQWNjZWxlcmF0ZWR9XG4gICAgICAgIG9uUmVxdWVzdENsb3NlPXt0aGlzLnByb3BzLm9uUmVxdWVzdENsb3NlfVxuICAgICAgICBvblNob3c9e3RoaXMucHJvcHMub25TaG93fVxuICAgICAgICBzdGF0dXNCYXJUcmFuc2x1Y2VudD17dGhpcy5wcm9wcy5zdGF0dXNCYXJUcmFuc2x1Y2VudH1cbiAgICAgICAgaWRlbnRpZmllcj17dGhpcy5faWRlbnRpZmllcn1cbiAgICAgICAgc3R5bGU9e3N0eWxlcy5tb2RhbH1cbiAgICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlcj17dGhpcy5fc2hvdWxkU2V0UmVzcG9uZGVyfVxuICAgICAgICBzdXBwb3J0ZWRPcmllbnRhdGlvbnM9e3RoaXMucHJvcHMuc3VwcG9ydGVkT3JpZW50YXRpb25zfVxuICAgICAgICBvbk9yaWVudGF0aW9uQ2hhbmdlPXt0aGlzLnByb3BzLm9uT3JpZW50YXRpb25DaGFuZ2V9PlxuICAgICAgICA8U2Nyb2xsVmlldy5Db250ZXh0LlByb3ZpZGVyIHZhbHVlPXtudWxsfT5cbiAgICAgICAgICA8VmlldyBzdHlsZT17W3N0eWxlcy5jb250YWluZXIsIGNvbnRhaW5lclN0eWxlc119PlxuICAgICAgICAgICAge2lubmVyQ2hpbGRyZW59XG4gICAgICAgICAgPC9WaWV3PlxuICAgICAgICA8L1Njcm9sbFZpZXcuQ29udGV4dC5Qcm92aWRlcj5cbiAgICAgIDwvUkNUTW9kYWxIb3N0Vmlldz5cbiAgICApO1xuICB9XG5cbiAgLy8gV2UgZG9uJ3Qgd2FudCBhbnkgcmVzcG9uZGVyIGV2ZW50cyBidWJibGluZyBvdXQgb2YgdGhlIG1vZGFsLlxuICBfc2hvdWxkU2V0UmVzcG9uZGVyKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cbmNvbnN0IHNpZGUgPSBJMThuTWFuYWdlci5nZXRDb25zdGFudHMoKS5pc1JUTCA/ICdyaWdodCcgOiAnbGVmdCc7XG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIG1vZGFsOiB7XG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gIH0sXG4gIGNvbnRhaW5lcjoge1xuICAgIC8qICRGbG93Rml4TWUoPj0wLjExMS4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnQgc3VwcHJlc3NlcyBhblxuICAgICAqIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC4xMTEgd2FzIGRlcGxveWVkLiBUbyBzZWUgdGhlIGVycm9yLCBkZWxldGUgdGhpc1xuICAgICAqIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgIFtzaWRlXTogMCxcbiAgICB0b3A6IDAsXG4gICAgZmxleDogMSxcbiAgfSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1vZGFsO1xuIl19