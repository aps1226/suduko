0633cdb10bb285362c06f5dfdab31c7a
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _excluded = ["source", "color", "size", "theme"];
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.isEqualIcon = exports.isValidIcon = void 0;

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _settings = require("../core/settings");

var _MaterialCommunityIcon = require("./MaterialCommunityIcon");

var _theming = require("../core/theming");

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

var isImageSource = function isImageSource(source) {
  return typeof source === 'object' && source !== null && Object.prototype.hasOwnProperty.call(source, 'uri') && typeof source.uri === 'string' || typeof source === 'number' || _reactNative.Platform.OS === 'web' && typeof source === 'string' && (source.startsWith('data:image') || /\.(bmp|jpg|jpeg|png|gif|svg)$/.test(source));
};

var getIconId = function getIconId(source) {
  if (typeof source === 'object' && source !== null && Object.prototype.hasOwnProperty.call(source, 'uri') && typeof source.uri === 'string') {
    return source.uri;
  }

  return source;
};

var isValidIcon = function isValidIcon(source) {
  return typeof source === 'string' || typeof source === 'function' || isImageSource(source);
};

exports.isValidIcon = isValidIcon;

var isEqualIcon = function isEqualIcon(a, b) {
  return a === b || getIconId(a) === getIconId(b);
};

exports.isEqualIcon = isEqualIcon;

var Icon = function Icon(_ref) {
  var source = _ref.source,
      color = _ref.color,
      size = _ref.size,
      theme = _ref.theme,
      rest = (0, _objectWithoutProperties2.default)(_ref, _excluded);
  var direction = typeof source === 'object' && source.direction && source.source ? source.direction === 'auto' ? _reactNative.I18nManager.isRTL ? 'rtl' : 'ltr' : source.direction : null;
  var s = typeof source === 'object' && source.direction && source.source ? source.source : source;
  var iconColor = color || theme.colors.text;

  if (isImageSource(s)) {
    return React.createElement(_reactNative.Image, _extends({}, rest, {
      source: s,
      style: [{
        transform: [{
          scaleX: direction === 'rtl' ? -1 : 1
        }]
      }, {
        width: size,
        height: size,
        tintColor: color,
        resizeMode: 'contain'
      }]
    }, _MaterialCommunityIcon.accessibilityProps));
  } else if (typeof s === 'string') {
    return React.createElement(_settings.Consumer, null, function (_ref2) {
      var icon = _ref2.icon;
      return icon({
        name: s,
        color: iconColor,
        size: size,
        direction: direction
      });
    });
  } else if (typeof s === 'function') {
    return s({
      color: iconColor,
      size: size,
      direction: direction
    });
  }

  return null;
};

var _default = (0, _theming.withTheme)(Icon);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkljb24udHN4Il0sIm5hbWVzIjpbImlzSW1hZ2VTb3VyY2UiLCJzb3VyY2UiLCJPYmplY3QiLCJQbGF0Zm9ybSIsImdldEljb25JZCIsImlzVmFsaWRJY29uIiwiaXNFcXVhbEljb24iLCJhIiwiSWNvbiIsInJlc3QiLCJkaXJlY3Rpb24iLCJJMThuTWFuYWdlciIsInMiLCJpY29uQ29sb3IiLCJjb2xvciIsInRoZW1lIiwidHJhbnNmb3JtIiwic2NhbGVYIiwid2lkdGgiLCJoZWlnaHQiLCJ0aW50Q29sb3IiLCJyZXNpemVNb2RlIiwiYWNjZXNzaWJpbGl0eVByb3BzIiwiaWNvbiIsIm5hbWUiLCJzaXplIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSxJQUFBLEtBQUEsR0FBQSx1QkFBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLENBQUEsQ0FBQTs7QUFDQSxJQUFBLFlBQUEsR0FBQSxPQUFBLENBQUEsY0FBQSxDQUFBOztBQU1BLElBQUEsU0FBQSxHQUFBLE9BQUEsb0JBQUE7O0FBQ0EsSUFBQSxzQkFBQSxHQUFBLE9BQUEsMkJBQUE7O0FBQ0EsSUFBQSxRQUFBLEdBQUEsT0FBQSxtQkFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdUJBLElBQU1BLGFBQWEsR0FBSUMsU0FBakJELGFBQWlCQyxDQUFBQSxNQUFEO0FBQUEsU0FFbkIsT0FBQSxNQUFBLEtBQUEsUUFBQSxJQUNDQSxNQUFNLEtBRFAsSUFBQSxJQUVDQyxNQUFNLENBQU5BLFNBQUFBLENBQUFBLGNBQUFBLENBQUFBLElBQUFBLENBQUFBLE1BQUFBLEVBRkQsS0FFQ0EsQ0FGRCxJQUdDLE9BQU9ELE1BQU0sQ0FBYixHQUFBLEtBSEYsUUFBQyxJQUtELE9BQUEsTUFBQSxLQUxBLFFBQUMsSUFPQUUsWUFBQUEsQ0FBQUEsUUFBQUEsQ0FBQUEsRUFBQUEsS0FBQUEsS0FBQUEsSUFDQyxPQUFBLE1BQUEs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VUFBWEMsSUFBVyxTQUFYQSxJQUFXO0FBQ2IsYUFBT0EsSUFBSSxDQUFDO0FBQ1ZDLFFBQUFBLElBQUksRUFETSxDQUFBO0FBRVZWLFFBQUFBLEtBQUssRUFGSyxTQUFBO0FBR1ZXLFFBQUFBLElBSFUsRUFHVkEsSUFIVTtBQUlWZixRQUFBQSxTQUFBQSxFQUFBQTtBQUpVLE9BQUQsQ0FBWDtBQUhOLEtBQ0UsQ0FERjtBQURLLEdBQUEsTUFhQSxJQUFJLE9BQUEsQ0FBQSxLQUFKLFVBQUEsRUFBNkI7QUFDbEMsV0FBT0UsQ0FBQyxDQUFDO0FBQUVFLE1BQUFBLEtBQUssRUFBUCxTQUFBO0FBQW9CVyxNQUFBQSxJQUFwQixFQUFvQkEsSUFBcEI7QUFBMEJmLE1BQUFBLFNBQUFBLEVBQUFBO0FBQTFCLEtBQUQsQ0FBUjtBQUNEOztBQUVELFNBQUEsSUFBQTtBQXBERixDQUFBOztlQXVEZSxDQUFBLEdBQUEsUUFBQSxDQUFBLFNBQUEsRUFBQSxJQUFBLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICBJbWFnZSxcbiAgSTE4bk1hbmFnZXIsXG4gIFBsYXRmb3JtLFxuICBJbWFnZVNvdXJjZVByb3BUeXBlLFxufSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IHsgQ29uc3VtZXIgYXMgU2V0dGluZ3NDb25zdW1lciB9IGZyb20gJy4uL2NvcmUvc2V0dGluZ3MnO1xuaW1wb3J0IHsgYWNjZXNzaWJpbGl0eVByb3BzIH0gZnJvbSAnLi9NYXRlcmlhbENvbW11bml0eUljb24nO1xuaW1wb3J0IHsgd2l0aFRoZW1lIH0gZnJvbSAnLi4vY29yZS90aGVtaW5nJztcblxudHlwZSBJY29uU291cmNlQmFzZSA9IHN0cmluZyB8IEltYWdlU291cmNlUHJvcFR5cGU7XG5cbmV4cG9ydCB0eXBlIEljb25Tb3VyY2UgPVxuICB8IEljb25Tb3VyY2VCYXNlXG4gIHwgUmVhZG9ubHk8eyBzb3VyY2U6IEljb25Tb3VyY2VCYXNlOyBkaXJlY3Rpb246ICdydGwnIHwgJ2x0cicgfCAnYXV0bycgfT5cbiAgfCAoKHByb3BzOiBJY29uUHJvcHMgJiB7IGNvbG9yOiBzdHJpbmcgfSkgPT4gUmVhY3QuUmVhY3ROb2RlKTtcblxudHlwZSBJY29uUHJvcHMgPSB7XG4gIHNpemU6IG51bWJlcjtcbiAgYWxsb3dGb250U2NhbGluZz86IGJvb2xlYW47XG59O1xuXG50eXBlIFByb3BzID0gSWNvblByb3BzICYge1xuICBjb2xvcj86IHN0cmluZztcbiAgc291cmNlOiBhbnk7XG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIHRoZW1lOiBSZWFjdE5hdGl2ZVBhcGVyLlRoZW1lO1xufTtcblxuY29uc3QgaXNJbWFnZVNvdXJjZSA9IChzb3VyY2U6IGFueSkgPT5cbiAgLy8gc291cmNlIGlzIGFuIG9iamVjdCB3aXRoIHVyaVxuICAodHlwZW9mIHNvdXJjZSA9PT0gJ29iamVjdCcgJiZcbiAgICBzb3VyY2UgIT09IG51bGwgJiZcbiAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCAndXJpJykgJiZcbiAgICB0eXBlb2Ygc291cmNlLnVyaSA9PT0gJ3N0cmluZycpIHx8XG4gIC8vIHNvdXJjZSBpcyBhIG1vZHVsZSwgZS5nLiAtIHJlcXVpcmUoJ2ltYWdlJylcbiAgdHlwZW9mIHNvdXJjZSA9PT0gJ251bWJlcicgfHxcbiAgLy8gaW1hZ2UgdXJsIG9uIHdlYlxuICAoUGxhdGZvcm0uT1MgPT09ICd3ZWInICYmXG4gICAgdHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycgJiZcbiAgICAoc291cmNlLnN0YXJ0c1dpdGgoJ2RhdGE6aW1hZ2UnKSB8fFxuICAgICAgL1xcLihibXB8anBnfGpwZWd8cG5nfGdpZnxzdmcpJC8udGVzdChzb3VyY2UpKSk7XG5cbmNvbnN0IGdldEljb25JZCA9IChzb3VyY2U6IGFueSkgPT4ge1xuICBpZiAoXG4gICAgdHlwZW9mIHNvdXJjZSA9PT0gJ29iamVjdCcgJiZcbiAgICBzb3VyY2UgIT09IG51bGwgJiZcbiAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCAndXJpJykgJiZcbiAgICB0eXBlb2Ygc291cmNlLnVyaSA9PT0gJ3N0cmluZydcbiAgKSB7XG4gICAgcmV0dXJuIHNvdXJjZS51cmk7XG4gIH1cblxuICByZXR1cm4gc291cmNlO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzVmFsaWRJY29uID0gKHNvdXJjZTogYW55KSA9PlxuICB0eXBlb2Ygc291cmNlID09PSAnc3RyaW5nJyB8fFxuICB0eXBlb2Ygc291cmNlID09PSAnZnVuY3Rpb24nIHx8XG4gIGlzSW1hZ2VTb3VyY2Uoc291cmNlKTtcblxuZXhwb3J0IGNvbnN0IGlzRXF1YWxJY29uID0gKGE6IGFueSwgYjogYW55KSA9PlxuICBhID09PSBiIHx8IGdldEljb25JZChhKSA9PT0gZ2V0SWNvbklkKGIpO1xuXG5jb25zdCBJY29uID0gKHsgc291cmNlLCBjb2xvciwgc2l6ZSwgdGhlbWUsIC4uLnJlc3QgfTogUHJvcHMpID0+IHtcbiAgY29uc3QgZGlyZWN0aW9uID1cbiAgICB0eXBlb2Ygc291cmNlID09PSAnb2JqZWN0JyAmJiBzb3VyY2UuZGlyZWN0aW9uICYmIHNvdXJjZS5zb3VyY2VcbiAgICAgID8gc291cmNlLmRpcmVjdGlvbiA9PT0gJ2F1dG8nXG4gICAgICAgID8gSTE4bk1hbmFnZXIuaXNSVExcbiAgICAgICAgICA/ICdydGwnXG4gICAgICAgICAgOiAnbHRyJ1xuICAgICAgICA6IHNvdXJjZS5kaXJlY3Rpb25cbiAgICAgIDogbnVsbDtcbiAgY29uc3QgcyA9XG4gICAgdHlwZW9mIHNvdXJjZSA9PT0gJ29iamVjdCcgJiYgc291cmNlLmRpcmVjdGlvbiAmJiBzb3VyY2Uuc291cmNlXG4gICAgICA/IHNvdXJjZS5zb3VyY2VcbiAgICAgIDogc291cmNlO1xuICBjb25zdCBpY29uQ29sb3IgPSBjb2xvciB8fCB0aGVtZS5jb2xvcnMudGV4dDtcblxuICBpZiAoaXNJbWFnZVNvdXJjZShzKSkge1xuICAgIHJldHVybiAoXG4gICAgICA8SW1hZ2VcbiAgICAgICAgey4uLnJlc3R9XG4gICAgICAgIHNvdXJjZT17c31cbiAgICAgICAgc3R5bGU9e1tcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IFt7IHNjYWxlWDogZGlyZWN0aW9uID09PSAncnRsJyA/IC0xIDogMSB9XSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1uYXRpdmUvbm8taW5saW5lLXN0eWxlc1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHdpZHRoOiBzaXplLFxuICAgICAgICAgICAgaGVpZ2h0OiBzaXplLFxuICAgICAgICAgICAgdGludENvbG9yOiBjb2xvcixcbiAgICAgICAgICAgIHJlc2l6ZU1vZGU6ICdjb250YWluJyxcbiAgICAgICAgICB9LFxuICAgICAgICBdfVxuICAgICAgICB7Li4uYWNjZXNzaWJpbGl0eVByb3BzfVxuICAgICAgLz5cbiAgICApO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiAoXG4gICAgICA8U2V0dGluZ3NDb25zdW1lcj5cbiAgICAgICAgeyh7IGljb24gfSkgPT4ge1xuICAgICAgICAgIHJldHVybiBpY29uKHtcbiAgICAgICAgICAgIG5hbWU6IHMsXG4gICAgICAgICAgICBjb2xvcjogaWNvbkNvbG9yLFxuICAgICAgICAgICAgc2l6ZSxcbiAgICAgICAgICAgIGRpcmVjdGlvbixcbiAgICAgICAgICB9KTtcbiAgICAgICAgfX1cbiAgICAgIDwvU2V0dGluZ3NDb25zdW1lcj5cbiAgICApO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIHMoeyBjb2xvcjogaWNvbkNvbG9yLCBzaXplLCBkaXJlY3Rpb24gfSk7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhUaGVtZShJY29uKTtcbiJdfQ==