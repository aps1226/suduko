1ee20b2cd76ea455e7b88a76b2480226
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _defineProperty2 = _interopRequireDefault2(require("@babel/runtime/helpers/defineProperty"));

var _objectWithoutProperties2 = _interopRequireDefault2(require("@babel/runtime/helpers/objectWithoutProperties"));

var _excluded = ["clearAccessibilityLabel", "clearIcon", "icon", "iconColor", "inputStyle", "onIconPress", "placeholder", "searchAccessibilityLabel", "style", "theme", "value"];

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _color = _interopRequireDefault(require("color"));

var _IconButton = _interopRequireDefault(require("./IconButton"));

var _Surface = _interopRequireDefault(require("./Surface"));

var _theming = require("../core/theming");

var _MaterialCommunityIcon = _interopRequireDefault(require("./MaterialCommunityIcon"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];

      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }

    return target;
  };

  return _extends.apply(this, arguments);
}

var Searchbar = React.forwardRef(function (_ref, ref) {
  var _ref$clearAccessibili = _ref.clearAccessibilityLabel,
      clearAccessibilityLabel = _ref$clearAccessibili === void 0 ? 'clear' : _ref$clearAccessibili,
      clearIcon = _ref.clearIcon,
      icon = _ref.icon,
      customIconColor = _ref.iconColor,
      inputStyle = _ref.inputStyle,
      onIconPress = _ref.onIconPress,
      placeholder = _ref.placeholder,
      _ref$searchAccessibil = _ref.searchAccessibilityLabel,
      searchAccessibilityLabel = _ref$searchAccessibil === void 0 ? 'search' : _ref$searchAccessibil,
      style = _ref.style,
      theme = _ref.theme,
      value = _ref.value,
      rest = (0, _objectWithoutProperties2.default)(_ref, _excluded);
  var root = React.useRef(null);
  React.useImperativeHandle(ref, function () {
    var input = root.current;

    if (input) {
      return {
        focus: function focus() {
          return input.focus();
        },
        clear: function clear() {
          return input.clear();
        },
        setNativeProps: function setNativeProps(args) {
          return input.setNativeProps(args);
        },
        isFocused: function isFocused() {
          return input.isFocused();
        },
        blur: function blur() {
          return input.blur();
        }
      };
    }

    var noop = function noop() {
      throw new Error('TextInput is not available');
    };

    return {
      focus: noop,
      clear: noop,
      setNativeProps: noop,
      isFocused: noop,
      blur: noop
    };
  });

  var handleClearPress = function handleClearPress() {
    var _root$current, _rest$onChangeText;

    (_root$current = root.current) === null || _root$current === void 0 ? void 0 : _root$current.clear();
    (_rest$onChangeText = rest.onChangeText) === null || _rest$onChangeText === void 0 ? void 0 : _rest$onChangeText.call(rest, '');
  };

  var colors = theme.colors,
      roundness = theme.roundness,
      dark = theme.dark,
      fonts = theme.fonts;
  var textColor = colors.text;
  var font = fonts.regular;
  var iconColor = customIconColor || (dark ? textColor : (0, _color.default)(textColor).alpha(0.54).rgb().string());
  var rippleColor = (0, _color.default)(textColor).alpha(0.32).rgb().string();
  return React.createElement(_Surface.default, {
    style: [{
      borderRadius: roundness,
      elevation: 4
    }, styles.container, style]
  }, React.createElement(_IconButton.default, {
    accessibilityTraits: "button",
    accessibilityComponentType: "button",
    accessibilityRole: "button",
    borderless: true,
    rippleColor: rippleColor,
    onPress: onIconPress,
    color: iconColor,
    icon: icon || function (_ref2) {
      var size = _ref2.size,
          color = _ref2.color;
      return React.createElement(_MaterialCommunityIcon.default, {
        name: "magnify",
        color: color,
        size: size,
        direction: _reactNative.I18nManager.isRTL ? 'rtl' : 'ltr'
      });
    },
    accessibilityLabel: searchAccessibilityLabel
  }), React.createElement(_reactNative.TextInput, _extends({
    style: [styles.input, _objectSpread({
      color: textColor
    }, font), inputStyle],
    placeholder: placeholder || '',
    placeholderTextColor: colors.placeholder,
    selectionColor: colors.primary,
    underlineColorAndroid: "transparent",
    returnKeyType: "search",
    keyboardAppearance: dark ? 'dark' : 'light',
    accessibilityTraits: "search",
    accessibilityRole: "search",
    ref: root,
    value: value
  }, rest)), React.createElement(_IconButton.default, {
    borderless: true,
    disabled: !value,
    accessibilityLabel: clearAccessibilityLabel,
    color: value ? iconColor : 'rgba(255, 255, 255, 0)',
    rippleColor: rippleColor,
    onPress: handleClearPress,
    icon: clearIcon || function (_ref3) {
      var size = _ref3.size,
          color = _ref3.color;
      return React.createElement(_MaterialCommunityIcon.default, {
        name: "close",
        color: color,
        size: size,
        direction: _reactNative.I18nManager.isRTL ? 'rtl' : 'ltr'
      });
    },
    accessibilityTraits: "button",
    accessibilityComponentType: "button",
    accessibilityRole: "button"
  }));
});

var styles = _reactNative.StyleSheet.create({
  container: {
    flexDirection: 'row',
    alignItems: 'center'
  },
  input: {
    flex: 1,
    fontSize: 18,
    paddingLeft: 8,
    alignSelf: 'stretch',
    textAlign: _reactNative.I18nManager.isRTL ? 'right' : 'left',
    minWidth: 0
  }
});

var _default = (0, _theming.withTheme)(Searchbar);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlNlYXJjaGJhci50c3giXSwibmFtZXMiOlsiU2VhcmNoYmFyIiwiY2xlYXJBY2Nlc3NpYmlsaXR5TGFiZWwiLCJpY29uQ29sb3IiLCJzZWFyY2hBY2Nlc3NpYmlsaXR5TGFiZWwiLCJyZXN0Iiwicm9vdCIsIlJlYWN0IiwiaW5wdXQiLCJmb2N1cyIsImNsZWFyIiwic2V0TmF0aXZlUHJvcHMiLCJhcmdzIiwiaXNGb2N1c2VkIiwiYmx1ciIsIm5vb3AiLCJoYW5kbGVDbGVhclByZXNzIiwiZm9udHMiLCJ0ZXh0Q29sb3IiLCJjb2xvcnMiLCJmb250IiwiY3VzdG9tSWNvbkNvbG9yIiwiZGFyayIsInJpcHBsZUNvbG9yIiwiYm9yZGVyUmFkaXVzIiwiZWxldmF0aW9uIiwic3R5bGVzIiwiaWNvbiIsImNvbG9yIiwiSTE4bk1hbmFnZXIiLCJwbGFjZWhvbGRlciIsInZhbHVlIiwiY2xlYXJJY29uIiwiY29udGFpbmVyIiwiZmxleERpcmVjdGlvbiIsImFsaWduSXRlbXMiLCJmbGV4IiwiZm9udFNpemUiLCJwYWRkaW5nTGVmdCIsImFsaWduU2VsZiIsInRleHRBbGlnbiIsIm1pbldpZHRoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQSxLQUFBLEdBQUEsdUJBQUEsQ0FBQSxPQUFBLENBQUEsT0FBQSxDQUFBLENBQUE7O0FBQ0EsSUFBQSxZQUFBLEdBQUEsT0FBQSxDQUFBLGNBQUEsQ0FBQTs7QUFVQSxJQUFBLE1BQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLENBQUEsQ0FBQTs7QUFDQSxJQUFBLFdBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsZ0JBQUEsQ0FBQTs7QUFDQSxJQUFBLFFBQUEsR0FBQSxzQkFBQSxDQUFBLE9BQUEsYUFBQSxDQUFBOztBQUNBLElBQUEsUUFBQSxHQUFBLE9BQUEsbUJBQUE7O0FBRUEsSUFBQSxzQkFBQSxHQUFBLHNCQUFBLENBQUEsT0FBQSwyQkFBQSxDQUFBOzs7Ozs7Ozs7Ozs7Ozs7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LFNBQVNBLEtBQVQ7QUFBQSxhQUNDLEtBQUEsQ0FBQSxhQUFBLENBQUMsc0JBQUEsQ0FBRCxPQUFBLEVBQUE7QUFDRSxRQUFBLElBQUksRUFETixPQUFBO0FBRUUsUUFBQSxLQUFLLEVBRlAsS0FBQTtBQUdFLFFBQUEsSUFBSSxFQUhOLElBQUE7QUFJRSxRQUFBLFNBQVMsRUFBRUMsWUFBQUEsQ0FBQUEsV0FBQUEsQ0FBQUEsS0FBQUEsR0FBQUEsS0FBQUEsR0FBNEI7QUFKekMsT0FBQSxDQUREO0FBQUEsS0FUTDtBQW1CRSxJQUFBLG1CQUFtQixFQW5CckIsUUFBQTtBQW9CRSxJQUFBLDBCQUEwQixFQXBCNUIsUUFBQTtBQXFCRSxJQUFBLGlCQUFpQixFQUFDO0FBckJwQixHQUFBLENBNUNGLENBREY7QUEzREosQ0FBa0IsQ0FBbEI7O0FBb0lBLElBQU1ILE1BQU0sR0FBRyxZQUFBLENBQUEsVUFBQSxDQUFBLE1BQUEsQ0FBa0I7QUFDL0JPLEVBQUFBLFNBQVMsRUFBRTtBQUNUQyxJQUFBQSxhQUFhLEVBREosS0FBQTtBQUVUQyxJQUFBQSxVQUFVLEVBQUU7QUFGSCxHQURvQjtBQUsvQjNCLEVBQUFBLEtBQUssRUFBRTtBQUNMNEIsSUFBQUEsSUFBSSxFQURDLENBQUE7QUFFTEMsSUFBQUEsUUFBUSxFQUZILEVBQUE7QUFHTEMsSUFBQUEsV0FBVyxFQUhOLENBQUE7QUFJTEMsSUFBQUEsU0FBUyxFQUpKLFNBQUE7QUFLTEMsSUFBQUEsU0FBUyxFQUFFWCxZQUFBQSxDQUFBQSxXQUFBQSxDQUFBQSxLQUFBQSxHQUFBQSxPQUFBQSxHQUxOLE1BQUE7QUFNTFksSUFBQUEsUUFBUSxFQUFFO0FBTkw7QUFMd0IsQ0FBbEIsQ0FBZjs7ZUFlZSxDQUFBLEdBQUEsUUFBQSxDQUFBLFNBQUEsRUFBQSxTQUFBLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICBTdHlsZVNoZWV0LFxuICBTdHlsZVByb3AsXG4gIFRleHRJbnB1dCxcbiAgSTE4bk1hbmFnZXIsXG4gIFRleHRJbnB1dFByb3BzLFxuICBWaWV3U3R5bGUsXG4gIFRleHRTdHlsZSxcbn0gZnJvbSAncmVhY3QtbmF0aXZlJztcblxuaW1wb3J0IGNvbG9yIGZyb20gJ2NvbG9yJztcbmltcG9ydCBJY29uQnV0dG9uIGZyb20gJy4vSWNvbkJ1dHRvbic7XG5pbXBvcnQgU3VyZmFjZSBmcm9tICcuL1N1cmZhY2UnO1xuaW1wb3J0IHsgd2l0aFRoZW1lIH0gZnJvbSAnLi4vY29yZS90aGVtaW5nJztcbmltcG9ydCB0eXBlIHsgSWNvblNvdXJjZSB9IGZyb20gJy4vSWNvbic7XG5pbXBvcnQgTWF0ZXJpYWxDb21tdW5pdHlJY29uIGZyb20gJy4vTWF0ZXJpYWxDb21tdW5pdHlJY29uJztcblxudHlwZSBQcm9wcyA9IFJlYWN0LkNvbXBvbmVudFByb3BzV2l0aFJlZjx0eXBlb2YgVGV4dElucHV0PiAmIHtcbiAgLyoqXG4gICAqIEFjY2Vzc2liaWxpdHkgbGFiZWwgZm9yIHRoZSBidXR0b24uIFRoaXMgaXMgcmVhZCBieSB0aGUgc2NyZWVuIHJlYWRlciB3aGVuIHRoZSB1c2VyIHRhcHMgdGhlIGJ1dHRvbi5cbiAgICovXG4gIGNsZWFyQWNjZXNzaWJpbGl0eUxhYmVsPzogc3RyaW5nO1xuICAvKipcbiAgICogQWNjZXNzaWJpbGl0eSBsYWJlbCBmb3IgdGhlIGJ1dHRvbi4gVGhpcyBpcyByZWFkIGJ5IHRoZSBzY3JlZW4gcmVhZGVyIHdoZW4gdGhlIHVzZXIgdGFwcyB0aGUgYnV0dG9uLlxuICAgKi9cbiAgc2VhcmNoQWNjZXNzaWJpbGl0eUxhYmVsPzogc3RyaW5nO1xuICAvKipcbiAgICogSGludCB0ZXh0IHNob3duIHdoZW4gdGhlIGlucHV0IGlzIGVtcHR5LlxuICAgKi9cbiAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgb2YgdGhlIHRleHQgaW5wdXQuXG4gICAqL1xuICB2YWx1ZTogc3RyaW5nO1xuICAvKipcbiAgICogSWNvbiBuYW1lIGZvciB0aGUgbGVmdCBpY29uIGJ1dHRvbiAoc2VlIGBvbkljb25QcmVzc2ApLlxuICAgKi9cbiAgaWNvbj86IEljb25Tb3VyY2U7XG4gIC8qKlxuICAgKiBDYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSB0ZXh0IGlucHV0J3MgdGV4dCBjaGFuZ2VzLlxuICAgKi9cbiAgb25DaGFuZ2VUZXh0PzogKHF1ZXJ5OiBzdHJpbmcpID0+IHZvaWQ7XG4gIC8qKlxuICAgKiBDYWxsYmFjayB0byBleGVjdXRlIGlmIHdlIHdhbnQgdGhlIGxlZnQgaWNvbiB0byBhY3QgYXMgYnV0dG9uLlxuICAgKi9cbiAgb25JY29uUHJlc3M/OiAoKSA9PiB2b2lkO1xuICAvKipcbiAgICogU2V0IHN0eWxlIG9mIHRoZSBUZXh0SW5wdXQgY29tcG9uZW50IGluc2lkZSB0aGUgc2VhcmNoYmFyXG4gICAqL1xuICBpbnB1dFN0eWxlPzogU3R5bGVQcm9wPFRleHRTdHlsZT47XG4gIHN0eWxlPzogU3R5bGVQcm9wPFZpZXdTdHlsZT47XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgdGhlbWU6IFJlYWN0TmF0aXZlUGFwZXIuVGhlbWU7XG4gIC8qKlxuICAgKiBDdXN0b20gY29sb3IgZm9yIGljb24sIGRlZmF1bHQgd2lsbCBiZSBkZXJpdmVkIGZyb20gdGhlbWVcbiAgICovXG4gIGljb25Db2xvcj86IHN0cmluZztcbiAgLyoqXG4gICAqIEN1c3RvbSBpY29uIGZvciBjbGVhciBidXR0b24sIGRlZmF1bHQgd2lsbCBiZSBpY29uIGNsb3NlXG4gICAqL1xuICBjbGVhckljb24/OiBJY29uU291cmNlO1xufTtcblxudHlwZSBUZXh0SW5wdXRIYW5kbGVzID0gUGljazxcbiAgVGV4dElucHV0LFxuICAnc2V0TmF0aXZlUHJvcHMnIHwgJ2lzRm9jdXNlZCcgfCAnY2xlYXInIHwgJ2JsdXInIHwgJ2ZvY3VzJ1xuPjtcblxuLyoqXG4gKiBTZWFyY2hiYXIgaXMgYSBzaW1wbGUgaW5wdXQgYm94IHdoZXJlIHVzZXJzIGNhbiB0eXBlIHNlYXJjaCBxdWVyaWVzLlxuICpcbiAqIDxkaXYgY2xhc3M9XCJzY3JlZW5zaG90c1wiPlxuICogICA8aW1nIGNsYXNzPVwibWVkaXVtXCIgc3JjPVwic2NyZWVuc2hvdHMvc2VhcmNoYmFyLnBuZ1wiIC8+XG4gKiA8L2Rpdj5cbiAqXG4gKiAjIyBVc2FnZVxuICogYGBganNcbiAqIGltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbiAqIGltcG9ydCB7IFNlYXJjaGJhciB9IGZyb20gJ3JlYWN0LW5hdGl2ZS1wYXBlcic7XG4gKlxuICogY29uc3QgTXlDb21wb25lbnQgPSAoKSA9PiB7XG4gKiAgIGNvbnN0IFtzZWFyY2hRdWVyeSwgc2V0U2VhcmNoUXVlcnldID0gUmVhY3QudXNlU3RhdGUoJycpO1xuICpcbiAqICAgY29uc3Qgb25DaGFuZ2VTZWFyY2ggPSBxdWVyeSA9PiBzZXRTZWFyY2hRdWVyeShxdWVyeSk7XG4gKlxuICogICByZXR1cm4gKFxuICogICAgIDxTZWFyY2hiYXJcbiAqICAgICAgIHBsYWNlaG9sZGVyPVwiU2VhcmNoXCJcbiAqICAgICAgIG9uQ2hhbmdlVGV4dD17b25DaGFuZ2VTZWFyY2h9XG4gKiAgICAgICB2YWx1ZT17c2VhcmNoUXVlcnl9XG4gKiAgICAgLz5cbiAqICAgKTtcbiAqIH07XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgTXlDb21wb25lbnQ7XG5cbiAqIGBgYFxuICovXG5jb25zdCBTZWFyY2hiYXIgPSBSZWFjdC5mb3J3YXJkUmVmPFRleHRJbnB1dEhhbmRsZXMsIFByb3BzPihcbiAgKFxuICAgIHtcbiAgICAgIGNsZWFyQWNjZXNzaWJpbGl0eUxhYmVsID0gJ2NsZWFyJyxcbiAgICAgIGNsZWFySWNvbixcbiAgICAgIGljb24sXG4gICAgICBpY29uQ29sb3I6IGN1c3RvbUljb25Db2xvcixcbiAgICAgIGlucHV0U3R5bGUsXG4gICAgICBvbkljb25QcmVzcyxcbiAgICAgIHBsYWNlaG9sZGVyLFxuICAgICAgc2VhcmNoQWNjZXNzaWJpbGl0eUxhYmVsID0gJ3NlYXJjaCcsXG4gICAgICBzdHlsZSxcbiAgICAgIHRoZW1lLFxuICAgICAgdmFsdWUsXG4gICAgICAuLi5yZXN0XG4gICAgfTogUHJvcHMsXG4gICAgcmVmXG4gICkgPT4ge1xuICAgIGNvbnN0IHJvb3QgPSBSZWFjdC51c2VSZWY8VGV4dElucHV0PihudWxsKTtcblxuICAgIFJlYWN0LnVzZUltcGVyYXRpdmVIYW5kbGUocmVmLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnB1dCA9IHJvb3QuY3VycmVudDtcblxuICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZm9jdXM6ICgpID0+IGlucHV0LmZvY3VzKCksXG4gICAgICAgICAgY2xlYXI6ICgpID0+IGlucHV0LmNsZWFyKCksXG4gICAgICAgICAgc2V0TmF0aXZlUHJvcHM6IChhcmdzOiBUZXh0SW5wdXRQcm9wcykgPT4gaW5wdXQuc2V0TmF0aXZlUHJvcHMoYXJncyksXG4gICAgICAgICAgaXNGb2N1c2VkOiAoKSA9PiBpbnB1dC5pc0ZvY3VzZWQoKSxcbiAgICAgICAgICBibHVyOiAoKSA9PiBpbnB1dC5ibHVyKCksXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5vb3AgPSAoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGV4dElucHV0IGlzIG5vdCBhdmFpbGFibGUnKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZvY3VzOiBub29wLFxuICAgICAgICBjbGVhcjogbm9vcCxcbiAgICAgICAgc2V0TmF0aXZlUHJvcHM6IG5vb3AsXG4gICAgICAgIGlzRm9jdXNlZDogbm9vcCxcbiAgICAgICAgYmx1cjogbm9vcCxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCBoYW5kbGVDbGVhclByZXNzID0gKCkgPT4ge1xuICAgICAgcm9vdC5jdXJyZW50Py5jbGVhcigpO1xuICAgICAgcmVzdC5vbkNoYW5nZVRleHQ/LignJyk7XG4gICAgfTtcblxuICAgIGNvbnN0IHsgY29sb3JzLCByb3VuZG5lc3MsIGRhcmssIGZvbnRzIH0gPSB0aGVtZTtcbiAgICBjb25zdCB0ZXh0Q29sb3IgPSBjb2xvcnMudGV4dDtcbiAgICBjb25zdCBmb250ID0gZm9udHMucmVndWxhcjtcbiAgICBjb25zdCBpY29uQ29sb3IgPVxuICAgICAgY3VzdG9tSWNvbkNvbG9yIHx8XG4gICAgICAoZGFyayA/IHRleHRDb2xvciA6IGNvbG9yKHRleHRDb2xvcikuYWxwaGEoMC41NCkucmdiKCkuc3RyaW5nKCkpO1xuICAgIGNvbnN0IHJpcHBsZUNvbG9yID0gY29sb3IodGV4dENvbG9yKS5hbHBoYSgwLjMyKS5yZ2IoKS5zdHJpbmcoKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8U3VyZmFjZVxuICAgICAgICBzdHlsZT17W1xuICAgICAgICAgIHsgYm9yZGVyUmFkaXVzOiByb3VuZG5lc3MsIGVsZXZhdGlvbjogNCB9LFxuICAgICAgICAgIHN0eWxlcy5jb250YWluZXIsXG4gICAgICAgICAgc3R5bGUsXG4gICAgICAgIF19XG4gICAgICA+XG4gICAgICAgIDxJY29uQnV0dG9uXG4gICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBXZSBrZWVwIG9sZCBhMTF5IHByb3BzIGZvciBiYWNrd2FyZHMgY29tcGF0IHdpdGggb2xkIFJOIHZlcnNpb25zXG4gICAgICAgICAgYWNjZXNzaWJpbGl0eVRyYWl0cz1cImJ1dHRvblwiXG4gICAgICAgICAgYWNjZXNzaWJpbGl0eUNvbXBvbmVudFR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIGFjY2Vzc2liaWxpdHlSb2xlPVwiYnV0dG9uXCJcbiAgICAgICAgICBib3JkZXJsZXNzXG4gICAgICAgICAgcmlwcGxlQ29sb3I9e3JpcHBsZUNvbG9yfVxuICAgICAgICAgIG9uUHJlc3M9e29uSWNvblByZXNzfVxuICAgICAgICAgIGNvbG9yPXtpY29uQ29sb3J9XG4gICAgICAgICAgaWNvbj17XG4gICAgICAgICAgICBpY29uIHx8XG4gICAgICAgICAgICAoKHsgc2l6ZSwgY29sb3IgfSkgPT4gKFxuICAgICAgICAgICAgICA8TWF0ZXJpYWxDb21tdW5pdHlJY29uXG4gICAgICAgICAgICAgICAgbmFtZT1cIm1hZ25pZnlcIlxuICAgICAgICAgICAgICAgIGNvbG9yPXtjb2xvcn1cbiAgICAgICAgICAgICAgICBzaXplPXtzaXplfVxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbj17STE4bk1hbmFnZXIuaXNSVEwgPyAncnRsJyA6ICdsdHInfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSlcbiAgICAgICAgICB9XG4gICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsPXtzZWFyY2hBY2Nlc3NpYmlsaXR5TGFiZWx9XG4gICAgICAgIC8+XG4gICAgICAgIDxUZXh0SW5wdXRcbiAgICAgICAgICBzdHlsZT17W3N0eWxlcy5pbnB1dCwgeyBjb2xvcjogdGV4dENvbG9yLCAuLi5mb250IH0sIGlucHV0U3R5bGVdfVxuICAgICAgICAgIHBsYWNlaG9sZGVyPXtwbGFjZWhvbGRlciB8fCAnJ31cbiAgICAgICAgICBwbGFjZWhvbGRlclRleHRDb2xvcj17Y29sb3JzLnBsYWNlaG9sZGVyfVxuICAgICAgICAgIHNlbGVjdGlvbkNvbG9yPXtjb2xvcnMucHJpbWFyeX1cbiAgICAgICAgICB1bmRlcmxpbmVDb2xvckFuZHJvaWQ9XCJ0cmFuc3BhcmVudFwiXG4gICAgICAgICAgcmV0dXJuS2V5VHlwZT1cInNlYXJjaFwiXG4gICAgICAgICAga2V5Ym9hcmRBcHBlYXJhbmNlPXtkYXJrID8gJ2RhcmsnIDogJ2xpZ2h0J31cbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFdlIGtlZXAgb2xkIGExMXkgcHJvcHMgZm9yIGJhY2t3YXJkcyBjb21wYXQgd2l0aCBvbGQgUk4gdmVyc2lvbnNcbiAgICAgICAgICBhY2Nlc3NpYmlsaXR5VHJhaXRzPVwic2VhcmNoXCJcbiAgICAgICAgICBhY2Nlc3NpYmlsaXR5Um9sZT1cInNlYXJjaFwiXG4gICAgICAgICAgcmVmPXtyb290fVxuICAgICAgICAgIHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICB7Li4ucmVzdH1cbiAgICAgICAgLz5cbiAgICAgICAgPEljb25CdXR0b25cbiAgICAgICAgICBib3JkZXJsZXNzXG4gICAgICAgICAgZGlzYWJsZWQ9eyF2YWx1ZX1cbiAgICAgICAgICBhY2Nlc3NpYmlsaXR5TGFiZWw9e2NsZWFyQWNjZXNzaWJpbGl0eUxhYmVsfVxuICAgICAgICAgIGNvbG9yPXt2YWx1ZSA/IGljb25Db2xvciA6ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDApJ31cbiAgICAgICAgICByaXBwbGVDb2xvcj17cmlwcGxlQ29sb3J9XG4gICAgICAgICAgb25QcmVzcz17aGFuZGxlQ2xlYXJQcmVzc31cbiAgICAgICAgICBpY29uPXtcbiAgICAgICAgICAgIGNsZWFySWNvbiB8fFxuICAgICAgICAgICAgKCh7IHNpemUsIGNvbG9yIH0pID0+IChcbiAgICAgICAgICAgICAgPE1hdGVyaWFsQ29tbXVuaXR5SWNvblxuICAgICAgICAgICAgICAgIG5hbWU9XCJjbG9zZVwiXG4gICAgICAgICAgICAgICAgY29sb3I9e2NvbG9yfVxuICAgICAgICAgICAgICAgIHNpemU9e3NpemV9XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uPXtJMThuTWFuYWdlci5pc1JUTCA/ICdydGwnIDogJ2x0cid9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApKVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFdlIGtlZXAgb2xkIGExMXkgcHJvcHMgZm9yIGJhY2t3YXJkcyBjb21wYXQgd2l0aCBvbGQgUk4gdmVyc2lvbnNcbiAgICAgICAgICBhY2Nlc3NpYmlsaXR5VHJhaXRzPVwiYnV0dG9uXCJcbiAgICAgICAgICBhY2Nlc3NpYmlsaXR5Q29tcG9uZW50VHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgYWNjZXNzaWJpbGl0eVJvbGU9XCJidXR0b25cIlxuICAgICAgICAvPlxuICAgICAgPC9TdXJmYWNlPlxuICAgICk7XG4gIH1cbik7XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgY29udGFpbmVyOiB7XG4gICAgZmxleERpcmVjdGlvbjogJ3JvdycsXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIH0sXG4gIGlucHV0OiB7XG4gICAgZmxleDogMSxcbiAgICBmb250U2l6ZTogMTgsXG4gICAgcGFkZGluZ0xlZnQ6IDgsXG4gICAgYWxpZ25TZWxmOiAnc3RyZXRjaCcsXG4gICAgdGV4dEFsaWduOiBJMThuTWFuYWdlci5pc1JUTCA/ICdyaWdodCcgOiAnbGVmdCcsXG4gICAgbWluV2lkdGg6IDAsXG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFRoZW1lKFNlYXJjaGJhcik7XG4iXX0=