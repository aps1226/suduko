d889a54224fca0a2be85b53a0bb9734c
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault2(require("@babel/runtime/regenerator"));

var _defineProperty3 = _interopRequireDefault2(require("@babel/runtime/helpers/defineProperty"));

var _slicedToArray2 = _interopRequireDefault2(require("@babel/runtime/helpers/slicedToArray"));

var _classCallCheck2 = _interopRequireDefault2(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault2(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault2(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault2(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault2(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault2(require("@babel/runtime/helpers/getPrototypeOf"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty3.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var React = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var _theming = require("../../core/theming");

var _Portal = _interopRequireDefault(require("../Portal/Portal"));

var _Surface = _interopRequireDefault(require("../Surface"));

var _MenuItem2 = _interopRequireDefault(require("./MenuItem"));

var _constants = require("../../constants");

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

var SCREEN_INDENT = 8;
var ANIMATION_DURATION = 250;

var EASING = _reactNative.Easing.bezier(0.4, 0, 0.2, 1);

var Menu = function (_React$Component) {
  (0, _inherits2.default)(Menu, _React$Component);

  var _super = _createSuper(Menu);

  function Menu() {
    var _this;

    (0, _classCallCheck2.default)(this, Menu);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _super.call.apply(_super, [this].concat(args));

    _defineProperty((0, _assertThisInitialized2.default)(_this), "state", {
      rendered: _this.props.visible,
      top: 0,
      left: 0,
      menuLayout: {
        width: 0,
        height: 0
      },
      anchorLayout: {
        width: 0,
        height: 0
      },
      opacityAnimation: new _reactNative.Animated.Value(0),
      scaleAnimation: new _reactNative.Animated.ValueXY({
        x: 0,
        y: 0
      })
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "anchor", null);

    _defineProperty((0, _assertThisInitialized2.default)(_this), "menu", null);

    _defineProperty((0, _assertThisInitialized2.default)(_this), "isCoordinate", function (anchor) {
      return !React.isValidElement(anchor) && typeof (anchor === null || anchor === void 0 ? void 0 : anchor.x) === 'number' && typeof (anchor === null || anchor === void 0 ? void 0 : anchor.y) === 'number';
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "measureMenuLayout", function () {
      return new Promise(function (resolve) {
        if (_this.menu) {
          _this.menu.measureInWindow(function (x, y, width, height) {
            resolve({
              x: x,
              y: y,
              width: width,
              height: height
            });
          });
        }
      });
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "measureAnchorLayout", function () {
      return new Promise(function (resolve) {
        var anchor = _this.props.anchor;

        if (_this.isCoordinate(anchor)) {
          resolve({
            x: anchor.x,
            y: anchor.y,
            width: 0,
            height: 0
          });
          return;
        }

        if (_this.anchor) {
          _this.anchor.measureInWindow(function (x, y, width, height) {
            resolve({
              x: x,
              y: y,
              width: width,
              height: height
            });
          });
        }
      });
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "updateVisibility", function _callee() {
      return _regenerator.default.async(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return _regenerator.default.awrap(Promise.resolve());

            case 2:
              if (_this.props.visible) {
                _this.show();
              } else {
                _this.hide();
              }

            case 3:
            case "end":
              return _context.stop();
          }
        }
      }, null, null, null, Promise);
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "isBrowser", function () {
      return _reactNative.Platform.OS === 'web' && 'document' in global;
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "focusFirstDOMNode", function (el) {
      if (el && _this.isBrowser()) {
        var node = (0, _reactNative.findNodeHandle)(el);
        var focusableNode = node.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        focusableNode === null || focusableNode === void 0 ? void 0 : focusableNode.focus();
      }
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "handleDismiss", function () {
      if (_this.props.visible) {
        _this.props.onDismiss();
      }

      return true;
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "handleKeypress", function (e) {
      if (e.key === 'Escape') {
        _this.props.onDismiss();
      }
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "attachListeners", function () {
      _reactNative.BackHandler.addEventListener('hardwareBackPress', _this.handleDismiss);

      _reactNative.Dimensions.addEventListener('change', _this.handleDismiss);

      _this.isBrowser() && document.addEventListener('keyup', _this.handleKeypress);
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "removeListeners", function () {
      _reactNative.BackHandler.removeEventListener('hardwareBackPress', _this.handleDismiss);

      _reactNative.Dimensions.removeEventListener('change', _this.handleDismiss);

      _this.isBrowser() && document.removeEventListener('keyup', _this.handleKeypress);
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "show", function _callee2() {
      var windowLayout, _await$Promise$all, _await$Promise$all2, menuLayout, anchorLayout;

      return _regenerator.default.async(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              windowLayout = _reactNative.Dimensions.get('window');
              _context2.next = 3;
              return _regenerator.default.awrap(Promise.all([_this.measureMenuLayout(), _this.measureAnchorLayout()]));

            case 3:
              _await$Promise$all = _context2.sent;
              _await$Promise$all2 = (0, _slicedToArray2.default)(_await$Promise$all, 2);
              menuLayout = _await$Promise$all2[0];
              anchorLayout = _await$Promise$all2[1];

              if (!(!windowLayout.width || !windowLayout.height || !menuLayout.width || !menuLayout.height || !anchorLayout.width && !_this.isCoordinate(_this.props.anchor) || !anchorLayout.height && !_this.isCoordinate(_this.props.anchor))) {
                _context2.next = 10;
                break;
              }

              requestAnimationFrame(_this.show);
              return _context2.abrupt("return");

            case 10:
              _this.setState(function () {
                return {
                  left: anchorLayout.x,
                  top: anchorLayout.y,
                  anchorLayout: {
                    height: anchorLayout.height,
                    width: anchorLayout.width
                  },
                  menuLayout: {
                    width: menuLayout.width,
                    height: menuLayout.height
                  }
                };
              }, function () {
                _this.attachListeners();

                var animation = _this.props.theme.animation;

                _reactNative.Animated.parallel([_reactNative.Animated.timing(_this.state.scaleAnimation, {
                  toValue: {
                    x: menuLayout.width,
                    y: menuLayout.height
                  },
                  duration: ANIMATION_DURATION * animation.scale,
                  easing: EASING,
                  useNativeDriver: true
                }), _reactNative.Animated.timing(_this.state.opacityAnimation, {
                  toValue: 1,
                  duration: ANIMATION_DURATION * animation.scale,
                  easing: EASING,
                  useNativeDriver: true
                })]).start(function (_ref) {
                  var finished = _ref.finished;

                  if (finished) {
                    _this.focusFirstDOMNode(_this.menu);
                  }
                });
              });

            case 11:
            case "end":
              return _context2.stop();
          }
        }
      }, null, null, null, Promise);
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "hide", function () {
      _this.removeListeners();

      var animation = _this.props.theme.animation;

      _reactNative.Animated.timing(_this.state.opacityAnimation, {
        toValue: 0,
        duration: ANIMATION_DURATION * animation.scale,
        easing: EASING,
        useNativeDriver: true
      }).start(function (_ref2) {
        var finished = _ref2.finished;

        if (finished) {
          _this.setState({
            menuLayout: {
              width: 0,
              height: 0
            },
            rendered: false
          });

          _this.state.scaleAnimation.setValue({
            x: 0,
            y: 0
          });

          _this.focusFirstDOMNode(_this.anchor);
        }
      });
    });

    return _this;
  }

  (0, _createClass2.default)(Menu, [{
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      if (prevProps.visible !== this.props.visible) {
        this.updateVisibility();
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.removeListeners();
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props = this.props,
          visible = _this$props.visible,
          anchor = _this$props.anchor,
          contentStyle = _this$props.contentStyle,
          style = _this$props.style,
          children = _this$props.children,
          theme = _this$props.theme,
          statusBarHeight = _this$props.statusBarHeight,
          onDismiss = _this$props.onDismiss,
          overlayAccessibilityLabel = _this$props.overlayAccessibilityLabel;
      var _this$state = this.state,
          rendered = _this$state.rendered,
          menuLayout = _this$state.menuLayout,
          anchorLayout = _this$state.anchorLayout,
          opacityAnimation = _this$state.opacityAnimation,
          scaleAnimation = _this$state.scaleAnimation;
      var _this$state2 = this.state,
          left = _this$state2.left,
          top = _this$state2.top;

      var additionalVerticalValue = _reactNative.Platform.select({
        android: statusBarHeight,
        default: 0
      });

      var scaleTransforms = [{
        scaleX: scaleAnimation.x.interpolate({
          inputRange: [0, menuLayout.width],
          outputRange: [0, 1]
        })
      }, {
        scaleY: scaleAnimation.y.interpolate({
          inputRange: [0, menuLayout.height],
          outputRange: [0, 1]
        })
      }];

      var windowLayout = _reactNative.Dimensions.get('window');

      var positionTransforms = [];

      if (left <= windowLayout.width - menuLayout.width - SCREEN_INDENT) {
        positionTransforms.push({
          translateX: scaleAnimation.x.interpolate({
            inputRange: [0, menuLayout.width],
            outputRange: [-(menuLayout.width / 2), 0]
          })
        });

        if (left < SCREEN_INDENT) {
          left = SCREEN_INDENT;
        }
      } else {
        positionTransforms.push({
          translateX: scaleAnimation.x.interpolate({
            inputRange: [0, menuLayout.width],
            outputRange: [menuLayout.width / 2, 0]
          })
        });
        left += anchorLayout.width - menuLayout.width;
        var right = left + menuLayout.width;

        if (right > windowLayout.width - SCREEN_INDENT) {
          left = windowLayout.width - SCREEN_INDENT - menuLayout.width;
        }
      }

      var scrollableMenuHeight = 0;

      if (top >= windowLayout.height - menuLayout.height - SCREEN_INDENT - additionalVerticalValue && top <= windowLayout.height - top) {
        scrollableMenuHeight = windowLayout.height - top - SCREEN_INDENT - additionalVerticalValue;
      } else if (top >= windowLayout.height - menuLayout.height - SCREEN_INDENT - additionalVerticalValue && top >= windowLayout.height - top && top <= menuLayout.height - anchorLayout.height + SCREEN_INDENT - additionalVerticalValue) {
        scrollableMenuHeight = top + anchorLayout.height - SCREEN_INDENT + additionalVerticalValue;
      }

      scrollableMenuHeight = scrollableMenuHeight > windowLayout.height - 2 * SCREEN_INDENT ? windowLayout.height - 2 * SCREEN_INDENT : scrollableMenuHeight;

      if (top <= windowLayout.height - menuLayout.height - SCREEN_INDENT - additionalVerticalValue || top >= windowLayout.height - menuLayout.height - SCREEN_INDENT - additionalVerticalValue && top <= windowLayout.height - top) {
        positionTransforms.push({
          translateY: scaleAnimation.y.interpolate({
            inputRange: [0, menuLayout.height],
            outputRange: [-((scrollableMenuHeight || menuLayout.height) / 2), 0]
          })
        });

        if (top < SCREEN_INDENT) {
          top = SCREEN_INDENT;
        }
      } else {
        positionTransforms.push({
          translateY: scaleAnimation.y.interpolate({
            inputRange: [0, menuLayout.height],
            outputRange: [(scrollableMenuHeight || menuLayout.height) / 2, 0]
          })
        });
        top += anchorLayout.height - (scrollableMenuHeight || menuLayout.height);
        var bottom = top + (scrollableMenuHeight || menuLayout.height) + additionalVerticalValue;

        if (bottom > windowLayout.height - SCREEN_INDENT) {
          top = scrollableMenuHeight === windowLayout.height - 2 * SCREEN_INDENT ? -SCREEN_INDENT * 2 : windowLayout.height - menuLayout.height - SCREEN_INDENT - additionalVerticalValue;
        }
      }

      var shadowMenuContainerStyle = _objectSpread({
        opacity: opacityAnimation,
        transform: scaleTransforms,
        borderRadius: theme.roundness
      }, scrollableMenuHeight ? {
        height: scrollableMenuHeight
      } : {});

      var positionStyle = _objectSpread({
        top: this.isCoordinate(anchor) ? top : top + additionalVerticalValue
      }, _reactNative.I18nManager.isRTL ? {
        right: left
      } : {
        left: left
      });

      return React.createElement(_reactNative.View, {
        ref: function ref(_ref3) {
          _this2.anchor = _ref3;
        },
        collapsable: false
      }, this.isCoordinate(anchor) ? null : anchor, rendered ? React.createElement(_Portal.default, null, React.createElement(_reactNative.TouchableWithoutFeedback, {
        accessibilityLabel: overlayAccessibilityLabel,
        accessibilityRole: "button",
        onPress: onDismiss
      }, React.createElement(_reactNative.View, {
        style: _reactNative.StyleSheet.absoluteFill
      })), React.createElement(_reactNative.View, {
        ref: function ref(_ref4) {
          _this2.menu = _ref4;
        },
        collapsable: false,
        accessibilityViewIsModal: visible,
        style: [styles.wrapper, positionStyle, style],
        pointerEvents: visible ? 'box-none' : 'none',
        onAccessibilityEscape: onDismiss
      }, React.createElement(_reactNative.Animated.View, {
        style: {
          transform: positionTransforms
        }
      }, React.createElement(_Surface.default, {
        style: [styles.shadowMenuContainer, shadowMenuContainerStyle, contentStyle]
      }, scrollableMenuHeight && React.createElement(_reactNative.ScrollView, null, children) || React.createElement(React.Fragment, null, children))))) : null);
    }
  }], [{
    key: "getDerivedStateFromProps",
    value: function getDerivedStateFromProps(nextProps, prevState) {
      if (nextProps.visible && !prevState.rendered) {
        return {
          rendered: true
        };
      }

      return null;
    }
  }]);
  return Menu;
}(React.Component);

_defineProperty(Menu, "Item", _MenuItem2.default);

_defineProperty(Menu, "defaultProps", {
  statusBarHeight: _constants.APPROX_STATUSBAR_HEIGHT,
  overlayAccessibilityLabel: 'Close menu'
});

var styles = _reactNative.StyleSheet.create({
  wrapper: {
    position: 'absolute'
  },
  shadowMenuContainer: {
    opacity: 0,
    paddingVertical: 8,
    elevation: 8
  }
});

var _default = (0, _theming.withTheme)(Menu);

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1lbnUudHN4Il0sIm5hbWVzIjpbIlNDUkVFTl9JTkRFTlQiLCJBTklNQVRJT05fRFVSQVRJT04iLCJFQVNJTkciLCJFYXNpbmciLCJNZW51IiwiUmVhY3QiLCJNZW51SXRlbSIsInN0YXR1c0JhckhlaWdodCIsIkFQUFJPWF9TVEFUVVNCQVJfSEVJR0hUIiwib3ZlcmxheUFjY2Vzc2liaWxpdHlMYWJlbCIsIm5leHRQcm9wcyIsInByZXZTdGF0ZSIsInJlbmRlcmVkIiwidG9wIiwibGVmdCIsIm1lbnVMYXlvdXQiLCJ3aWR0aCIsImhlaWdodCIsImFuY2hvckxheW91dCIsIm9wYWNpdHlBbmltYXRpb24iLCJBbmltYXRlZCIsInNjYWxlQW5pbWF0aW9uIiwieCIsInkiLCJjb21wb25lbnREaWRVcGRhdGUiLCJwcmV2UHJvcHMiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsImFuY2hvciIsInJlc29sdmUiLCJQcm9taXNlIiwiUGxhdGZvcm0iLCJlbCIsIm5vZGUiLCJmb2N1c2FibGVOb2RlIiwiZSIsIkJhY2tIYW5kbGVyIiwiRGltZW5zaW9ucyIsImRvY3VtZW50Iiwid2luZG93TGF5b3V0IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYW5pbWF0aW9uIiwidG9WYWx1ZSIsImR1cmF0aW9uIiwiZWFzaW5nIiwidXNlTmF0aXZlRHJpdmVyIiwiZmluaXNoZWQiLCJyZW5kZXIiLCJhZGRpdGlvbmFsVmVydGljYWxWYWx1ZSIsImFuZHJvaWQiLCJkZWZhdWx0Iiwic2NhbGVUcmFuc2Zvcm1zIiwic2NhbGVYIiwiaW5wdXRSYW5nZSIsIm91dHB1dFJhbmdlIiwic2NhbGVZIiwicG9zaXRpb25UcmFuc2Zvcm1zIiwidHJhbnNsYXRlWCIsInJpZ2h0Iiwic2Nyb2xsYWJsZU1lbnVIZWlnaHQiLCJ0cmFuc2xhdGVZIiwiYm90dG9tIiwic2hhZG93TWVudUNvbnRhaW5lclN0eWxlIiwib3BhY2l0eSIsInRyYW5zZm9ybSIsImJvcmRlclJhZGl1cyIsInRoZW1lIiwicG9zaXRpb25TdHlsZSIsInJlZiIsIm9uRGlzbWlzcyIsIlN0eWxlU2hlZXQiLCJhYnNvbHV0ZUZpbGwiLCJzdHlsZXMiLCJ2aXNpYmxlIiwid3JhcHBlciIsInBvc2l0aW9uIiwic2hhZG93TWVudUNvbnRhaW5lciIsInBhZGRpbmdWZXJ0aWNhbCIsImVsZXZhdGlvbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFBLEtBQUEsR0FBQSx1QkFBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLENBQUEsQ0FBQTs7QUFDQSxJQUFBLFlBQUEsR0FBQSxPQUFBLENBQUEsY0FBQSxDQUFBOztBQWlCQSxJQUFBLFFBQUEsR0FBQSxPQUFBLHNCQUFBOztBQUVBLElBQUEsT0FBQSxHQUFBLHNCQUFBLENBQUEsT0FBQSxvQkFBQSxDQUFBOztBQUNBLElBQUEsUUFBQSxHQUFBLHNCQUFBLENBQUEsT0FBQSxjQUFBLENBQUE7O0FBRUEsSUFBQSxVQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLGNBQUEsQ0FBQTs7QUFDQSxJQUFBLFVBQUEsR0FBQSxPQUFBLG1CQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFzREEsSUFBTUEsYUFBYSxHQUFuQixDQUFBO0FBRUEsSUFBTUMsa0JBQWtCLEdBQXhCLEdBQUE7O0FBRUEsSUFBTUMsTUFBTSxHQUFHQyxZQUFBQSxDQUFBQSxNQUFBQSxDQUFBQSxNQUFBQSxDQUFBQSxHQUFBQSxFQUFBQSxDQUFBQSxFQUFBQSxHQUFBQSxFQUFmLENBQWVBLENBQWY7O0lBZ0RBLEk7Ozs7O0FBQWlELGtCQUFBO0FBQUE7O0FBQUE7O0FBQUEsc0NBQUEsSUFBQTtBQUFBLE1BQUEsSUFBQTtBQUFBOztBQUFBLG9EQUFBLElBQUE7O0FBQUEsSUFBQSxlQUFBLDhDQUFBLE9BQUEsRUFpQnZDO0FBQ05TLE1BQUFBLFFBQVEsRUFBRSxNQUFBLEtBQUEsQ0FE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WUFBQTtBQUZKLE9BQUEsRUFTSWIsb0JBQW9CLElBQ3BCLEtBQUEsQ0FBQSxhQUFBLENBQUMsWUFBQSxDQUFELFVBQUEsRUFBQSxJQUFBLEVBREQsUUFDQyxDQURBQSxJQUVJLEtBQUEsQ0FBQSxhQUFBLENBQUMsS0FBRCxDQUFBLFFBQUEsRUFBQSxJQUFBLEVBL0JQLFFBK0JPLENBWFIsQ0FERixDQVZGLENBUkYsQ0FETyxHQVJiLElBQ0UsQ0FERjtBQStDRDs7O1dBdGJELGtDQUFBLFNBQUEsRUFBQSxTQUFBLEVBQW9FO0FBQ2xFLFVBQUloRCxTQUFTLENBQVRBLE9BQUFBLElBQXFCLENBQUNDLFNBQVMsQ0FBbkMsUUFBQSxFQUE4QztBQUM1QyxlQUFPO0FBQUVDLFVBQUFBLFFBQVEsRUFBRTtBQUFaLFNBQVA7QUFDRDs7QUFFRCxhQUFBLElBQUE7QUFDRDs7O0VBZmdCUCxLQUFLLENBQXhCLFM7O2dCQUFNRCxJLFVBRVVFLFVBQUFBLENBQUFBLE87O2dCQUZWRixJLGtCQUlrQjtBQUNwQkcsRUFBQUEsZUFBZSxFQUFFQyxVQUFBQSxDQURHLHVCQUFBO0FBRXBCQyxFQUFBQSx5QkFBeUIsRUFBRTtBQUZQLEM7O0FBOGJ4QixJQUFNOEQsTUFBTSxHQUFHLFlBQUEsQ0FBQSxVQUFBLENBQUEsTUFBQSxDQUFrQjtBQUMvQkUsRUFBQUEsT0FBTyxFQUFFO0FBQ1BDLElBQUFBLFFBQVEsRUFBRTtBQURILEdBRHNCO0FBSS9CQyxFQUFBQSxtQkFBbUIsRUFBRTtBQUNuQmIsSUFBQUEsT0FBTyxFQURZLENBQUE7QUFFbkJjLElBQUFBLGVBQWUsRUFGSSxDQUFBO0FBR25CQyxJQUFBQSxTQUFTLEVBQUU7QUFIUTtBQUpVLENBQWxCLENBQWY7O2VBV2UsQ0FBQSxHQUFBLFFBQUEsQ0FBQSxTQUFBLEVBQUEsSUFBQSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtcbiAgUGxhdGZvcm0sXG4gIFN0eWxlUHJvcCxcbiAgU3R5bGVTaGVldCxcbiAgQW5pbWF0ZWQsXG4gIEJhY2tIYW5kbGVyLFxuICBEaW1lbnNpb25zLFxuICBFYXNpbmcsXG4gIEkxOG5NYW5hZ2VyLFxuICBMYXlvdXRSZWN0YW5nbGUsXG4gIFRvdWNoYWJsZVdpdGhvdXRGZWVkYmFjayxcbiAgVmlldyxcbiAgVmlld1N0eWxlLFxuICBTY3JvbGxWaWV3LFxuICBmaW5kTm9kZUhhbmRsZSxcbn0gZnJvbSAncmVhY3QtbmF0aXZlJztcblxuaW1wb3J0IHsgd2l0aFRoZW1lIH0gZnJvbSAnLi4vLi4vY29yZS90aGVtaW5nJztcbmltcG9ydCB0eXBlIHsgJE9taXQgfSBmcm9tICcuLi8uLi90eXBlcyc7XG5pbXBvcnQgUG9ydGFsIGZyb20gJy4uL1BvcnRhbC9Qb3J0YWwnO1xuaW1wb3J0IFN1cmZhY2UgZnJvbSAnLi4vU3VyZmFjZSc7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG5pbXBvcnQgTWVudUl0ZW0sIHsgTWVudUl0ZW0gYXMgX01lbnVJdGVtIH0gZnJvbSAnLi9NZW51SXRlbSc7XG5pbXBvcnQgeyBBUFBST1hfU1RBVFVTQkFSX0hFSUdIVCB9IGZyb20gJy4uLy4uL2NvbnN0YW50cyc7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBNZW51IGlzIGN1cnJlbnRseSB2aXNpYmxlLlxuICAgKi9cbiAgdmlzaWJsZTogYm9vbGVhbjtcbiAgLyoqXG4gICAqIFRoZSBhbmNob3IgdG8gb3BlbiB0aGUgbWVudSBmcm9tLiBJbiBtb3N0IGNhc2VzLCBpdCB3aWxsIGJlIGEgYnV0dG9uIHRoYXQgb3BlbnMgdGhlIG1lbnUuXG4gICAqL1xuICBhbmNob3I6IFJlYWN0LlJlYWN0Tm9kZSB8IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfTtcbiAgLyoqXG4gICAqIEV4dHJhIG1hcmdpbiB0byBhZGQgYXQgdGhlIHRvcCBvZiB0aGUgbWVudSB0byBhY2NvdW50IGZvciB0cmFuc2x1Y2VudCBzdGF0dXMgYmFyIG9uIEFuZHJvaWQuXG4gICAqIElmIHlvdSBhcmUgdXNpbmcgRXhwbywgd2UgYXNzdW1lIHRyYW5zbHVjZW50IHN0YXR1cyBiYXIgYW5kIHNldCBhIGhlaWdodCBmb3Igc3RhdHVzIGJhciBhdXRvbWF0aWNhbGx5LlxuICAgKiBQYXNzIGAwYCBvciBhIGN1c3RvbSB2YWx1ZSB0byBhbmQgY3VzdG9taXplIGl0LlxuICAgKiBUaGlzIGlzIGF1dG9tYXRpY2FsbHkgaGFuZGxlZCBvbiBpT1MuXG4gICAqL1xuICBzdGF0dXNCYXJIZWlnaHQ/OiBudW1iZXI7XG4gIC8qKlxuICAgKiBDYWxsYmFjayBjYWxsZWQgd2hlbiBNZW51IGlzIGRpc21pc3NlZC4gVGhlIGB2aXNpYmxlYCBwcm9wIG5lZWRzIHRvIGJlIHVwZGF0ZWQgd2hlbiB0aGlzIGlzIGNhbGxlZC5cbiAgICovXG4gIG9uRGlzbWlzczogKCkgPT4gdm9pZDtcbiAgLyoqXG4gICAqIEFjY2Vzc2liaWxpdHkgbGFiZWwgZm9yIHRoZSBvdmVybGF5LiBUaGlzIGlzIHJlYWQgYnkgdGhlIHNjcmVlbiByZWFkZXIgd2hlbiB0aGUgdXNlciB0YXBzIG91dHNpZGUgdGhlIG1lbnUuXG4gICAqL1xuICBvdmVybGF5QWNjZXNzaWJpbGl0eUxhYmVsPzogc3RyaW5nO1xuICAvKipcbiAgICogQ29udGVudCBvZiB0aGUgYE1lbnVgLlxuICAgKi9cbiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTtcbiAgLyoqXG4gICAqIFN0eWxlIG9mIG1lbnUncyBpbm5lciBjb250ZW50LlxuICAgKi9cbiAgY29udGVudFN0eWxlPzogU3R5bGVQcm9wPFZpZXdTdHlsZT47XG4gIHN0eWxlPzogU3R5bGVQcm9wPFZpZXdTdHlsZT47XG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIHRoZW1lOiBSZWFjdE5hdGl2ZVBhcGVyLlRoZW1lO1xufTtcblxudHlwZSBMYXlvdXQgPSAkT21pdDwkT21pdDxMYXlvdXRSZWN0YW5nbGUsICd4Jz4sICd5Jz47XG5cbnR5cGUgU3RhdGUgPSB7XG4gIHJlbmRlcmVkOiBib29sZWFuO1xuICB0b3A6IG51bWJlcjtcbiAgbGVmdDogbnVtYmVyO1xuICBtZW51TGF5b3V0OiBMYXlvdXQ7XG4gIGFuY2hvckxheW91dDogTGF5b3V0O1xuICBvcGFjaXR5QW5pbWF0aW9uOiBBbmltYXRlZC5WYWx1ZTtcbiAgc2NhbGVBbmltYXRpb246IEFuaW1hdGVkLlZhbHVlWFk7XG59O1xuXG4vLyBNaW5pbXVtIHBhZGRpbmcgYmV0d2VlbiB0aGUgZWRnZSBvZiB0aGUgc2NyZWVuIGFuZCB0aGUgbWVudVxuY29uc3QgU0NSRUVOX0lOREVOVCA9IDg7XG4vLyBGcm9tIGh0dHBzOi8vbWF0ZXJpYWwuaW8vZGVzaWduL21vdGlvbi9zcGVlZC5odG1sI2R1cmF0aW9uXG5jb25zdCBBTklNQVRJT05fRFVSQVRJT04gPSAyNTA7XG4vLyBGcm9tIHRoZSAnU3RhbmRhcmQgZWFzaW5nJyBzZWN0aW9uIG9mIGh0dHBzOi8vbWF0ZXJpYWwuaW8vZGVzaWduL21vdGlvbi9zcGVlZC5odG1sI2Vhc2luZ1xuY29uc3QgRUFTSU5HID0gRWFzaW5nLmJlemllcigwLjQsIDAsIDAuMiwgMSk7XG5cbi8qKlxuICogTWVudXMgZGlzcGxheSBhIGxpc3Qgb2YgY2hvaWNlcyBvbiB0ZW1wb3JhcnkgZWxldmF0ZWQgc3VyZmFjZXMuIFRoZWlyIHBsYWNlbWVudCB2YXJpZXMgYmFzZWQgb24gdGhlIGVsZW1lbnQgdGhhdCBvcGVucyB0aGVtLlxuICpcbiAqICA8ZGl2IGNsYXNzPVwic2NyZWVuc2hvdHNcIj5cbiAqICAgPGltZyBjbGFzcz1cIm1lZGl1bVwiIHNyYz1cInNjcmVlbnNob3RzL21lbnUtMS5wbmdcIiAvPlxuICogICA8aW1nIGNsYXNzPVwibWVkaXVtXCIgc3JjPVwic2NyZWVuc2hvdHMvbWVudS0yLnBuZ1wiIC8+XG4gKiA8L2Rpdj5cbiAqXG4gKiAjIyBVc2FnZVxuICogYGBganNcbiAqIGltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbiAqIGltcG9ydCB7IFZpZXcgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuICogaW1wb3J0IHsgQnV0dG9uLCBNZW51LCBEaXZpZGVyLCBQcm92aWRlciB9IGZyb20gJ3JlYWN0LW5hdGl2ZS1wYXBlcic7XG4gKlxuICogY29uc3QgTXlDb21wb25lbnQgPSAoKSA9PiB7XG4gKiAgIGNvbnN0IFt2aXNpYmxlLCBzZXRWaXNpYmxlXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAqXG4gKiAgIGNvbnN0IG9wZW5NZW51ID0gKCkgPT4gc2V0VmlzaWJsZSh0cnVlKTtcbiAqXG4gKiAgIGNvbnN0IGNsb3NlTWVudSA9ICgpID0+IHNldFZpc2libGUoZmFsc2UpO1xuICpcbiAqICAgcmV0dXJuIChcbiAqICAgICA8UHJvdmlkZXI+XG4gKiAgICAgICA8Vmlld1xuICogICAgICAgICBzdHlsZT17e1xuICogICAgICAgICAgIHBhZGRpbmdUb3A6IDUwLFxuICogICAgICAgICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICogICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAqICAgICAgICAgfX0+XG4gKiAgICAgICAgIDxNZW51XG4gKiAgICAgICAgICAgdmlzaWJsZT17dmlzaWJsZX1cbiAqICAgICAgICAgICBvbkRpc21pc3M9e2Nsb3NlTWVudX1cbiAqICAgICAgICAgICBhbmNob3I9ezxCdXR0b24gb25QcmVzcz17b3Blbk1lbnV9PlNob3cgbWVudTwvQnV0dG9uPn0+XG4gKiAgICAgICAgICAgPE1lbnUuSXRlbSBvblByZXNzPXsoKSA9PiB7fX0gdGl0bGU9XCJJdGVtIDFcIiAvPlxuICogICAgICAgICAgIDxNZW51Lkl0ZW0gb25QcmVzcz17KCkgPT4ge319IHRpdGxlPVwiSXRlbSAyXCIgLz5cbiAqICAgICAgICAgICA8RGl2aWRlciAvPlxuICogICAgICAgICAgIDxNZW51Lkl0ZW0gb25QcmVzcz17KCkgPT4ge319IHRpdGxlPVwiSXRlbSAzXCIgLz5cbiAqICAgICAgICAgPC9NZW51PlxuICogICAgICAgPC9WaWV3PlxuICogICAgIDwvUHJvdmlkZXI+XG4gKiAgICk7XG4gKiB9O1xuICpcbiAqIGV4cG9ydCBkZWZhdWx0IE15Q29tcG9uZW50O1xuICogYGBgXG4gKi9cbmNsYXNzIE1lbnUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIC8vIEBjb21wb25lbnQgLi9NZW51SXRlbS50c3hcbiAgc3RhdGljIEl0ZW0gPSBNZW51SXRlbTtcblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIHN0YXR1c0JhckhlaWdodDogQVBQUk9YX1NUQVRVU0JBUl9IRUlHSFQsXG4gICAgb3ZlcmxheUFjY2Vzc2liaWxpdHlMYWJlbDogJ0Nsb3NlIG1lbnUnLFxuICB9O1xuXG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMobmV4dFByb3BzOiBQcm9wcywgcHJldlN0YXRlOiBTdGF0ZSkge1xuICAgIGlmIChuZXh0UHJvcHMudmlzaWJsZSAmJiAhcHJldlN0YXRlLnJlbmRlcmVkKSB7XG4gICAgICByZXR1cm4geyByZW5kZXJlZDogdHJ1ZSB9O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgc3RhdGUgPSB7XG4gICAgcmVuZGVyZWQ6IHRoaXMucHJvcHMudmlzaWJsZSxcbiAgICB0b3A6IDAsXG4gICAgbGVmdDogMCxcbiAgICBtZW51TGF5b3V0OiB7IHdpZHRoOiAwLCBoZWlnaHQ6IDAgfSxcbiAgICBhbmNob3JMYXlvdXQ6IHsgd2lkdGg6IDAsIGhlaWdodDogMCB9LFxuICAgIG9wYWNpdHlBbmltYXRpb246IG5ldyBBbmltYXRlZC5WYWx1ZSgwKSxcbiAgICBzY2FsZUFuaW1hdGlvbjogbmV3IEFuaW1hdGVkLlZhbHVlWFkoeyB4OiAwLCB5OiAwIH0pLFxuICB9O1xuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IFByb3BzKSB7XG4gICAgaWYgKHByZXZQcm9wcy52aXNpYmxlICE9PSB0aGlzLnByb3BzLnZpc2libGUpIHtcbiAgICAgIHRoaXMudXBkYXRlVmlzaWJpbGl0eSgpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIGFuY2hvcj86IFZpZXcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBtZW51PzogVmlldyB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgaXNDb29yZGluYXRlID0gKGFuY2hvcjogYW55KTogYW5jaG9yIGlzIHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfSA9PlxuICAgICFSZWFjdC5pc1ZhbGlkRWxlbWVudChhbmNob3IpICYmXG4gICAgdHlwZW9mIGFuY2hvcj8ueCA9PT0gJ251bWJlcicgJiZcbiAgICB0eXBlb2YgYW5jaG9yPy55ID09PSAnbnVtYmVyJztcblxuICBwcml2YXRlIG1lYXN1cmVNZW51TGF5b3V0ID0gKCkgPT5cbiAgICBuZXcgUHJvbWlzZTxMYXlvdXRSZWN0YW5nbGU+KChyZXNvbHZlKSA9PiB7XG4gICAgICBpZiAodGhpcy5tZW51KSB7XG4gICAgICAgIHRoaXMubWVudS5tZWFzdXJlSW5XaW5kb3coKHgsIHksIHdpZHRoLCBoZWlnaHQpID0+IHtcbiAgICAgICAgICByZXNvbHZlKHsgeCwgeSwgd2lkdGgsIGhlaWdodCB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgcHJpdmF0ZSBtZWFzdXJlQW5jaG9yTGF5b3V0ID0gKCkgPT5cbiAgICBuZXcgUHJvbWlzZTxMYXlvdXRSZWN0YW5nbGU+KChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCB7IGFuY2hvciB9ID0gdGhpcy5wcm9wcztcbiAgICAgIGlmICh0aGlzLmlzQ29vcmRpbmF0ZShhbmNob3IpKSB7XG4gICAgICAgIHJlc29sdmUoeyB4OiBhbmNob3IueCwgeTogYW5jaG9yLnksIHdpZHRoOiAwLCBoZWlnaHQ6IDAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuYW5jaG9yKSB7XG4gICAgICAgIHRoaXMuYW5jaG9yLm1lYXN1cmVJbldpbmRvdygoeCwgeSwgd2lkdGgsIGhlaWdodCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUoeyB4LCB5LCB3aWR0aCwgaGVpZ2h0IH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICBwcml2YXRlIHVwZGF0ZVZpc2liaWxpdHkgPSBhc3luYyAoKSA9PiB7XG4gICAgLy8gTWVudSBpcyByZW5kZXJlZCBpbiBQb3J0YWwsIHdoaWNoIHVwZGF0ZXMgaXRlbXMgYXN5bmNocm9ub3VzbHlcbiAgICAvLyBXZSBuZWVkIHRvIGRvIHRoZSBzYW1lIGhlcmUgc28gdGhhdCB0aGUgcmVmIGlzIHVwLXRvLWRhdGVcbiAgICBhd2FpdCBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgIGlmICh0aGlzLnByb3BzLnZpc2libGUpIHtcbiAgICAgIHRoaXMuc2hvdygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhpZGUoKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBpc0Jyb3dzZXIgPSAoKSA9PiBQbGF0Zm9ybS5PUyA9PT0gJ3dlYicgJiYgJ2RvY3VtZW50JyBpbiBnbG9iYWw7XG5cbiAgcHJpdmF0ZSBmb2N1c0ZpcnN0RE9NTm9kZSA9IChlbDogVmlldyB8IG51bGwgfCB1bmRlZmluZWQpID0+IHtcbiAgICBpZiAoZWwgJiYgdGhpcy5pc0Jyb3dzZXIoKSkge1xuICAgICAgLy8gV2hlbiBpbiB0aGUgYnJvd3Nlciwgd2Ugd2FudCB0byBmb2N1cyB0aGUgZmlyc3QgZm9jdXNhYmxlIGl0ZW0gb24gdG9nZ2xlXG4gICAgICAvLyBGb3IgZXhhbXBsZSwgd2hlbiBtZW51IGlzIHNob3duLCBmb2N1cyB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgbWVudVxuICAgICAgLy8gQW5kIHdoZW4gbWVudSBpcyBkaXNtaXNzZWQsIHNlbmQgZm9jdXMgYmFjayB0byB0aGUgYnV0dG9uIHRvIHJlc3VtZSB0YWJiaW5nXG4gICAgICBjb25zdCBub2RlOiBhbnkgPSBmaW5kTm9kZUhhbmRsZShlbCk7XG4gICAgICBjb25zdCBmb2N1c2FibGVOb2RlID0gbm9kZS5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAvLyBUaGlzIGlzIGEgcm91Z2ggbGlzdCBvZiBzZWxlY3RvcnMgdGhhdCBjYW4gYmUgZm9jdXNlZFxuICAgICAgICAnYnV0dG9uLCBbaHJlZl0sIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBbdGFiaW5kZXhdOm5vdChbdGFiaW5kZXg9XCItMVwiXSknXG4gICAgICApO1xuXG4gICAgICBmb2N1c2FibGVOb2RlPy5mb2N1cygpO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIGhhbmRsZURpc21pc3MgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMucHJvcHMudmlzaWJsZSkge1xuICAgICAgdGhpcy5wcm9wcy5vbkRpc21pc3MoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgcHJpdmF0ZSBoYW5kbGVLZXlwcmVzcyA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5wcm9wcy5vbkRpc21pc3MoKTtcbiAgICB9XG4gIH07XG5cbiAgcHJpdmF0ZSBhdHRhY2hMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgQmFja0hhbmRsZXIuYWRkRXZlbnRMaXN0ZW5lcignaGFyZHdhcmVCYWNrUHJlc3MnLCB0aGlzLmhhbmRsZURpc21pc3MpO1xuICAgIERpbWVuc2lvbnMuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5oYW5kbGVEaXNtaXNzKTtcblxuICAgIHRoaXMuaXNCcm93c2VyKCkgJiYgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmhhbmRsZUtleXByZXNzKTtcbiAgfTtcblxuICBwcml2YXRlIHJlbW92ZUxpc3RlbmVycyA9ICgpID0+IHtcbiAgICBCYWNrSGFuZGxlci5yZW1vdmVFdmVudExpc3RlbmVyKCdoYXJkd2FyZUJhY2tQcmVzcycsIHRoaXMuaGFuZGxlRGlzbWlzcyk7XG4gICAgRGltZW5zaW9ucy5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLmhhbmRsZURpc21pc3MpO1xuXG4gICAgdGhpcy5pc0Jyb3dzZXIoKSAmJlxuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmhhbmRsZUtleXByZXNzKTtcbiAgfTtcblxuICBwcml2YXRlIHNob3cgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgd2luZG93TGF5b3V0ID0gRGltZW5zaW9ucy5nZXQoJ3dpbmRvdycpO1xuICAgIGNvbnN0IFttZW51TGF5b3V0LCBhbmNob3JMYXlvdXRdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgdGhpcy5tZWFzdXJlTWVudUxheW91dCgpLFxuICAgICAgdGhpcy5tZWFzdXJlQW5jaG9yTGF5b3V0KCksXG4gICAgXSk7XG5cbiAgICAvLyBXaGVuIHZpc2libGUgaXMgdHJ1ZSBmb3IgZmlyc3QgcmVuZGVyXG4gICAgLy8gbmF0aXZlIHZpZXdzIGNhbiBiZSBzdGlsbCBub3QgcmVuZGVyZWQgYW5kXG4gICAgLy8gbWVhc3VyZU1lbnVMYXlvdXQvbWVhc3VyZUFuY2hvckxheW91dCBmdW5jdGlvbnNcbiAgICAvLyByZXR1cm4gd3JvbmcgdmFsdWVzIGUuZyB7IHg6MCwgeTogMCwgd2lkdGg6IDAsIGhlaWdodDogMCB9XG4gICAgLy8gc28gd2UgaGF2ZSB0byB3YWl0IHVudGlsIHZpZXdzIGFyZSByZWFkeVxuICAgIC8vIGFuZCByZXJ1biB0aGlzIGZ1bmN0aW9uIHRvIHNob3cgbWVudVxuICAgIGlmIChcbiAgICAgICF3aW5kb3dMYXlvdXQud2lkdGggfHxcbiAgICAgICF3aW5kb3dMYXlvdXQuaGVpZ2h0IHx8XG4gICAgICAhbWVudUxheW91dC53aWR0aCB8fFxuICAgICAgIW1lbnVMYXlvdXQuaGVpZ2h0IHx8XG4gICAgICAoIWFuY2hvckxheW91dC53aWR0aCAmJiAhdGhpcy5pc0Nvb3JkaW5hdGUodGhpcy5wcm9wcy5hbmNob3IpKSB8fFxuICAgICAgKCFhbmNob3JMYXlvdXQuaGVpZ2h0ICYmICF0aGlzLmlzQ29vcmRpbmF0ZSh0aGlzLnByb3BzLmFuY2hvcikpXG4gICAgKSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5zaG93KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKFxuICAgICAgKCkgPT4gKHtcbiAgICAgICAgbGVmdDogYW5jaG9yTGF5b3V0LngsXG4gICAgICAgIHRvcDogYW5jaG9yTGF5b3V0LnksXG4gICAgICAgIGFuY2hvckxheW91dDoge1xuICAgICAgICAgIGhlaWdodDogYW5jaG9yTGF5b3V0LmhlaWdodCxcbiAgICAgICAgICB3aWR0aDogYW5jaG9yTGF5b3V0LndpZHRoLFxuICAgICAgICB9LFxuICAgICAgICBtZW51TGF5b3V0OiB7XG4gICAgICAgICAgd2lkdGg6IG1lbnVMYXlvdXQud2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiBtZW51TGF5b3V0LmhlaWdodCxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLmF0dGFjaExpc3RlbmVycygpO1xuXG4gICAgICAgIGNvbnN0IHsgYW5pbWF0aW9uIH0gPSB0aGlzLnByb3BzLnRoZW1lO1xuICAgICAgICBBbmltYXRlZC5wYXJhbGxlbChbXG4gICAgICAgICAgQW5pbWF0ZWQudGltaW5nKHRoaXMuc3RhdGUuc2NhbGVBbmltYXRpb24sIHtcbiAgICAgICAgICAgIHRvVmFsdWU6IHsgeDogbWVudUxheW91dC53aWR0aCwgeTogbWVudUxheW91dC5oZWlnaHQgfSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBBTklNQVRJT05fRFVSQVRJT04gKiBhbmltYXRpb24uc2NhbGUsXG4gICAgICAgICAgICBlYXNpbmc6IEVBU0lORyxcbiAgICAgICAgICAgIHVzZU5hdGl2ZURyaXZlcjogdHJ1ZSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBBbmltYXRlZC50aW1pbmcodGhpcy5zdGF0ZS5vcGFjaXR5QW5pbWF0aW9uLCB7XG4gICAgICAgICAgICB0b1ZhbHVlOiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IEFOSU1BVElPTl9EVVJBVElPTiAqIGFuaW1hdGlvbi5zY2FsZSxcbiAgICAgICAgICAgIGVhc2luZzogRUFTSU5HLFxuICAgICAgICAgICAgdXNlTmF0aXZlRHJpdmVyOiB0cnVlLFxuICAgICAgICAgIH0pLFxuICAgICAgICBdKS5zdGFydCgoeyBmaW5pc2hlZCB9KSA9PiB7XG4gICAgICAgICAgaWYgKGZpbmlzaGVkKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzRmlyc3RET01Ob2RlKHRoaXMubWVudSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICApO1xuICB9O1xuXG4gIHByaXZhdGUgaGlkZSA9ICgpID0+IHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVycygpO1xuXG4gICAgY29uc3QgeyBhbmltYXRpb24gfSA9IHRoaXMucHJvcHMudGhlbWU7XG4gICAgQW5pbWF0ZWQudGltaW5nKHRoaXMuc3RhdGUub3BhY2l0eUFuaW1hdGlvbiwge1xuICAgICAgdG9WYWx1ZTogMCxcbiAgICAgIGR1cmF0aW9uOiBBTklNQVRJT05fRFVSQVRJT04gKiBhbmltYXRpb24uc2NhbGUsXG4gICAgICBlYXNpbmc6IEVBU0lORyxcbiAgICAgIHVzZU5hdGl2ZURyaXZlcjogdHJ1ZSxcbiAgICB9KS5zdGFydCgoeyBmaW5pc2hlZCB9KSA9PiB7XG4gICAgICBpZiAoZmluaXNoZWQpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IG1lbnVMYXlvdXQ6IHsgd2lkdGg6IDAsIGhlaWdodDogMCB9LCByZW5kZXJlZDogZmFsc2UgfSk7XG4gICAgICAgIHRoaXMuc3RhdGUuc2NhbGVBbmltYXRpb24uc2V0VmFsdWUoeyB4OiAwLCB5OiAwIH0pO1xuICAgICAgICB0aGlzLmZvY3VzRmlyc3RET01Ob2RlKHRoaXMuYW5jaG9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgdmlzaWJsZSxcbiAgICAgIGFuY2hvcixcbiAgICAgIGNvbnRlbnRTdHlsZSxcbiAgICAgIHN0eWxlLFxuICAgICAgY2hpbGRyZW4sXG4gICAgICB0aGVtZSxcbiAgICAgIHN0YXR1c0JhckhlaWdodCxcbiAgICAgIG9uRGlzbWlzcyxcbiAgICAgIG92ZXJsYXlBY2Nlc3NpYmlsaXR5TGFiZWwsXG4gICAgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBjb25zdCB7XG4gICAgICByZW5kZXJlZCxcbiAgICAgIG1lbnVMYXlvdXQsXG4gICAgICBhbmNob3JMYXlvdXQsXG4gICAgICBvcGFjaXR5QW5pbWF0aW9uLFxuICAgICAgc2NhbGVBbmltYXRpb24sXG4gICAgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICBsZXQgeyBsZWZ0LCB0b3AgfSA9IHRoaXMuc3RhdGU7XG5cbiAgICAvLyBJIGRvbid0IGtub3cgd2h5IGJ1dCBvbiBBbmRyb2lkIG1lYXN1cmUgZnVuY3Rpb24gaXMgd3JvbmcgYnkgMjRcbiAgICBjb25zdCBhZGRpdGlvbmFsVmVydGljYWxWYWx1ZSA9IFBsYXRmb3JtLnNlbGVjdCh7XG4gICAgICBhbmRyb2lkOiBzdGF0dXNCYXJIZWlnaHQsXG4gICAgICBkZWZhdWx0OiAwLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgc2NhbGVUcmFuc2Zvcm1zID0gW1xuICAgICAge1xuICAgICAgICBzY2FsZVg6IHNjYWxlQW5pbWF0aW9uLnguaW50ZXJwb2xhdGUoe1xuICAgICAgICAgIGlucHV0UmFuZ2U6IFswLCBtZW51TGF5b3V0LndpZHRoXSxcbiAgICAgICAgICBvdXRwdXRSYW5nZTogWzAsIDFdLFxuICAgICAgICB9KSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHNjYWxlWTogc2NhbGVBbmltYXRpb24ueS5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgaW5wdXRSYW5nZTogWzAsIG1lbnVMYXlvdXQuaGVpZ2h0XSxcbiAgICAgICAgICBvdXRwdXRSYW5nZTogWzAsIDFdLFxuICAgICAgICB9KSxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIGNvbnN0IHdpbmRvd0xheW91dCA9IERpbWVuc2lvbnMuZ2V0KCd3aW5kb3cnKTtcblxuICAgIC8vIFdlIG5lZWQgdG8gdHJhbnNsYXRlIG1lbnUgd2hpbGUgYW5pbWF0aW5nIHNjYWxlIHRvIGltaXRhdGUgdHJhbnNmb3JtIG9yaWdpbiBmb3Igc2NhbGUgYW5pbWF0aW9uXG4gICAgY29uc3QgcG9zaXRpb25UcmFuc2Zvcm1zID0gW107XG5cbiAgICAvLyBDaGVjayBpZiBtZW51IGZpdHMgaG9yaXpvbnRhbGx5IGFuZCBpZiBub3QgYWxpZ24gaXQgdG8gcmlnaHQuXG4gICAgaWYgKGxlZnQgPD0gd2luZG93TGF5b3V0LndpZHRoIC0gbWVudUxheW91dC53aWR0aCAtIFNDUkVFTl9JTkRFTlQpIHtcbiAgICAgIHBvc2l0aW9uVHJhbnNmb3Jtcy5wdXNoKHtcbiAgICAgICAgdHJhbnNsYXRlWDogc2NhbGVBbmltYXRpb24ueC5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgaW5wdXRSYW5nZTogWzAsIG1lbnVMYXlvdXQud2lkdGhdLFxuICAgICAgICAgIG91dHB1dFJhbmdlOiBbLShtZW51TGF5b3V0LndpZHRoIC8gMiksIDBdLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDaGVjayBpZiBtZW51IHBvc2l0aW9uIGhhcyBlbm91Z2ggc3BhY2UgZnJvbSBsZWZ0IHNpZGVcbiAgICAgIGlmIChsZWZ0IDwgU0NSRUVOX0lOREVOVCkge1xuICAgICAgICBsZWZ0ID0gU0NSRUVOX0lOREVOVDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcG9zaXRpb25UcmFuc2Zvcm1zLnB1c2goe1xuICAgICAgICB0cmFuc2xhdGVYOiBzY2FsZUFuaW1hdGlvbi54LmludGVycG9sYXRlKHtcbiAgICAgICAgICBpbnB1dFJhbmdlOiBbMCwgbWVudUxheW91dC53aWR0aF0sXG4gICAgICAgICAgb3V0cHV0UmFuZ2U6IFttZW51TGF5b3V0LndpZHRoIC8gMiwgMF0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGxlZnQgKz0gYW5jaG9yTGF5b3V0LndpZHRoIC0gbWVudUxheW91dC53aWR0aDtcblxuICAgICAgY29uc3QgcmlnaHQgPSBsZWZ0ICsgbWVudUxheW91dC53aWR0aDtcbiAgICAgIC8vIENoZWNrIGlmIG1lbnUgcG9zaXRpb24gaGFzIGVub3VnaCBzcGFjZSBmcm9tIHJpZ2h0IHNpZGVcbiAgICAgIGlmIChyaWdodCA+IHdpbmRvd0xheW91dC53aWR0aCAtIFNDUkVFTl9JTkRFTlQpIHtcbiAgICAgICAgbGVmdCA9IHdpbmRvd0xheW91dC53aWR0aCAtIFNDUkVFTl9JTkRFTlQgLSBtZW51TGF5b3V0LndpZHRoO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHRoZSBtZW51IGlzIGxhcmdlciB0aGFuIGF2YWlsYWJsZSB2ZXJ0aWNhbCBzcGFjZSxcbiAgICAvLyBjYWxjdWxhdGUgdGhlIGhlaWdodCBvZiBzY3JvbGxhYmxlIHZpZXdcbiAgICBsZXQgc2Nyb2xsYWJsZU1lbnVIZWlnaHQgPSAwO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIG1lbnUgc2hvdWxkIGJlIHNjcm9sbGFibGVcbiAgICBpZiAoXG4gICAgICAvLyBDaGVjayBpZiB0aGUgbWVudSBvdmVyZmxvd3MgZnJvbSBib3R0b20gc2lkZVxuICAgICAgdG9wID49XG4gICAgICAgIHdpbmRvd0xheW91dC5oZWlnaHQgLVxuICAgICAgICAgIG1lbnVMYXlvdXQuaGVpZ2h0IC1cbiAgICAgICAgICBTQ1JFRU5fSU5ERU5UIC1cbiAgICAgICAgICBhZGRpdGlvbmFsVmVydGljYWxWYWx1ZSAmJlxuICAgICAgLy8gQW5kIGJvdHRvbSBzaWRlIG9mIHRoZSBzY3JlZW4gaGFzIG1vcmUgc3BhY2UgdGhhbiB0b3Agc2lkZVxuICAgICAgdG9wIDw9IHdpbmRvd0xheW91dC5oZWlnaHQgLSB0b3BcbiAgICApIHtcbiAgICAgIC8vIFNjcm9sbGFibGUgbWVudSBzaG91bGQgYmUgYmVsb3cgdGhlIGFuY2hvciAoZXhwYW5kcyBkb3dud2FyZHMpXG4gICAgICBzY3JvbGxhYmxlTWVudUhlaWdodCA9XG4gICAgICAgIHdpbmRvd0xheW91dC5oZWlnaHQgLSB0b3AgLSBTQ1JFRU5fSU5ERU5UIC0gYWRkaXRpb25hbFZlcnRpY2FsVmFsdWU7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBtZW51IG92ZXJmbG93cyBmcm9tIGJvdHRvbSBzaWRlXG4gICAgICB0b3AgPj1cbiAgICAgICAgd2luZG93TGF5b3V0LmhlaWdodCAtXG4gICAgICAgICAgbWVudUxheW91dC5oZWlnaHQgLVxuICAgICAgICAgIFNDUkVFTl9JTkRFTlQgLVxuICAgICAgICAgIGFkZGl0aW9uYWxWZXJ0aWNhbFZhbHVlICYmXG4gICAgICAvLyBBbmQgdG9wIHNpZGUgb2YgdGhlIHNjcmVlbiBoYXMgbW9yZSBzcGFjZSB0aGFuIGJvdHRvbSBzaWRlXG4gICAgICB0b3AgPj0gd2luZG93TGF5b3V0LmhlaWdodCAtIHRvcCAmJlxuICAgICAgLy8gQW5kIG1lbnUgb3ZlcmZsb3dzIGZyb20gdG9wIHNpZGVcbiAgICAgIHRvcCA8PVxuICAgICAgICBtZW51TGF5b3V0LmhlaWdodCAtXG4gICAgICAgICAgYW5jaG9yTGF5b3V0LmhlaWdodCArXG4gICAgICAgICAgU0NSRUVOX0lOREVOVCAtXG4gICAgICAgICAgYWRkaXRpb25hbFZlcnRpY2FsVmFsdWVcbiAgICApIHtcbiAgICAgIC8vIFNjcm9sbGFibGUgbWVudSBzaG91bGQgYmUgYWJvdmUgdGhlIGFuY2hvciAoZXhwYW5kcyB1cHdhcmRzKVxuICAgICAgc2Nyb2xsYWJsZU1lbnVIZWlnaHQgPVxuICAgICAgICB0b3AgKyBhbmNob3JMYXlvdXQuaGVpZ2h0IC0gU0NSRUVOX0lOREVOVCArIGFkZGl0aW9uYWxWZXJ0aWNhbFZhbHVlO1xuICAgIH1cblxuICAgIC8vIFNjcm9sbGFibGUgbWVudSBtYXggaGVpZ2h0XG4gICAgc2Nyb2xsYWJsZU1lbnVIZWlnaHQgPVxuICAgICAgc2Nyb2xsYWJsZU1lbnVIZWlnaHQgPiB3aW5kb3dMYXlvdXQuaGVpZ2h0IC0gMiAqIFNDUkVFTl9JTkRFTlRcbiAgICAgICAgPyB3aW5kb3dMYXlvdXQuaGVpZ2h0IC0gMiAqIFNDUkVFTl9JTkRFTlRcbiAgICAgICAgOiBzY3JvbGxhYmxlTWVudUhlaWdodDtcblxuICAgIC8vIE1lbnUgaXMgdHlwaWNhbGx5IHBvc2l0aW9uZWQgYmVsb3cgdGhlIGVsZW1lbnQgdGhhdCBnZW5lcmF0ZXMgaXRcbiAgICAvLyBTbyBmaXJzdCBjaGVjayBpZiBpdCBmaXRzIGJlbG93IHRoZSBhbmNob3IgKGV4cGFuZHMgZG93bndhcmRzKVxuICAgIGlmIChcbiAgICAgIC8vIENoZWNrIGlmIG1lbnUgZml0cyB2ZXJ0aWNhbGx5XG4gICAgICB0b3AgPD1cbiAgICAgICAgd2luZG93TGF5b3V0LmhlaWdodCAtXG4gICAgICAgICAgbWVudUxheW91dC5oZWlnaHQgLVxuICAgICAgICAgIFNDUkVFTl9JTkRFTlQgLVxuICAgICAgICAgIGFkZGl0aW9uYWxWZXJ0aWNhbFZhbHVlIHx8XG4gICAgICAvLyBPciBpZiB0aGUgbWVudSBvdmVyZmxvd3MgZnJvbSBib3R0b20gc2lkZVxuICAgICAgKHRvcCA+PVxuICAgICAgICB3aW5kb3dMYXlvdXQuaGVpZ2h0IC1cbiAgICAgICAgICBtZW51TGF5b3V0LmhlaWdodCAtXG4gICAgICAgICAgU0NSRUVOX0lOREVOVCAtXG4gICAgICAgICAgYWRkaXRpb25hbFZlcnRpY2FsVmFsdWUgJiZcbiAgICAgICAgLy8gQW5kIGJvdHRvbSBzaWRlIG9mIHRoZSBzY3JlZW4gaGFzIG1vcmUgc3BhY2UgdGhhbiB0b3Agc2lkZVxuICAgICAgICB0b3AgPD0gd2luZG93TGF5b3V0LmhlaWdodCAtIHRvcClcbiAgICApIHtcbiAgICAgIHBvc2l0aW9uVHJhbnNmb3Jtcy5wdXNoKHtcbiAgICAgICAgdHJhbnNsYXRlWTogc2NhbGVBbmltYXRpb24ueS5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgaW5wdXRSYW5nZTogWzAsIG1lbnVMYXlvdXQuaGVpZ2h0XSxcbiAgICAgICAgICBvdXRwdXRSYW5nZTogWy0oKHNjcm9sbGFibGVNZW51SGVpZ2h0IHx8IG1lbnVMYXlvdXQuaGVpZ2h0KSAvIDIpLCAwXSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgLy8gQ2hlY2sgaWYgbWVudSBwb3NpdGlvbiBoYXMgZW5vdWdoIHNwYWNlIGZyb20gdG9wIHNpZGVcbiAgICAgIGlmICh0b3AgPCBTQ1JFRU5fSU5ERU5UKSB7XG4gICAgICAgIHRvcCA9IFNDUkVFTl9JTkRFTlQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHBvc2l0aW9uVHJhbnNmb3Jtcy5wdXNoKHtcbiAgICAgICAgdHJhbnNsYXRlWTogc2NhbGVBbmltYXRpb24ueS5pbnRlcnBvbGF0ZSh7XG4gICAgICAgICAgaW5wdXRSYW5nZTogWzAsIG1lbnVMYXlvdXQuaGVpZ2h0XSxcbiAgICAgICAgICBvdXRwdXRSYW5nZTogWyhzY3JvbGxhYmxlTWVudUhlaWdodCB8fCBtZW51TGF5b3V0LmhlaWdodCkgLyAyLCAwXSxcbiAgICAgICAgfSksXG4gICAgICB9KTtcblxuICAgICAgdG9wICs9IGFuY2hvckxheW91dC5oZWlnaHQgLSAoc2Nyb2xsYWJsZU1lbnVIZWlnaHQgfHwgbWVudUxheW91dC5oZWlnaHQpO1xuXG4gICAgICBjb25zdCBib3R0b20gPVxuICAgICAgICB0b3AgK1xuICAgICAgICAoc2Nyb2xsYWJsZU1lbnVIZWlnaHQgfHwgbWVudUxheW91dC5oZWlnaHQpICtcbiAgICAgICAgYWRkaXRpb25hbFZlcnRpY2FsVmFsdWU7XG5cbiAgICAgIC8vIENoZWNrIGlmIG1lbnUgcG9zaXRpb24gaGFzIGVub3VnaCBzcGFjZSBmcm9tIGJvdHRvbSBzaWRlXG4gICAgICBpZiAoYm90dG9tID4gd2luZG93TGF5b3V0LmhlaWdodCAtIFNDUkVFTl9JTkRFTlQpIHtcbiAgICAgICAgdG9wID1cbiAgICAgICAgICBzY3JvbGxhYmxlTWVudUhlaWdodCA9PT0gd2luZG93TGF5b3V0LmhlaWdodCAtIDIgKiBTQ1JFRU5fSU5ERU5UXG4gICAgICAgICAgICA/IC1TQ1JFRU5fSU5ERU5UICogMlxuICAgICAgICAgICAgOiB3aW5kb3dMYXlvdXQuaGVpZ2h0IC1cbiAgICAgICAgICAgICAgbWVudUxheW91dC5oZWlnaHQgLVxuICAgICAgICAgICAgICBTQ1JFRU5fSU5ERU5UIC1cbiAgICAgICAgICAgICAgYWRkaXRpb25hbFZlcnRpY2FsVmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgc2hhZG93TWVudUNvbnRhaW5lclN0eWxlID0ge1xuICAgICAgb3BhY2l0eTogb3BhY2l0eUFuaW1hdGlvbixcbiAgICAgIHRyYW5zZm9ybTogc2NhbGVUcmFuc2Zvcm1zLFxuICAgICAgYm9yZGVyUmFkaXVzOiB0aGVtZS5yb3VuZG5lc3MsXG4gICAgICAuLi4oc2Nyb2xsYWJsZU1lbnVIZWlnaHQgPyB7IGhlaWdodDogc2Nyb2xsYWJsZU1lbnVIZWlnaHQgfSA6IHt9KSxcbiAgICB9O1xuXG4gICAgY29uc3QgcG9zaXRpb25TdHlsZSA9IHtcbiAgICAgIHRvcDogdGhpcy5pc0Nvb3JkaW5hdGUoYW5jaG9yKSA/IHRvcCA6IHRvcCArIGFkZGl0aW9uYWxWZXJ0aWNhbFZhbHVlLFxuICAgICAgLi4uKEkxOG5NYW5hZ2VyLmlzUlRMID8geyByaWdodDogbGVmdCB9IDogeyBsZWZ0IH0pLFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFZpZXdcbiAgICAgICAgcmVmPXsocmVmKSA9PiB7XG4gICAgICAgICAgdGhpcy5hbmNob3IgPSByZWY7XG4gICAgICAgIH19XG4gICAgICAgIGNvbGxhcHNhYmxlPXtmYWxzZX1cbiAgICAgID5cbiAgICAgICAge3RoaXMuaXNDb29yZGluYXRlKGFuY2hvcikgPyBudWxsIDogYW5jaG9yfVxuICAgICAgICB7cmVuZGVyZWQgPyAoXG4gICAgICAgICAgPFBvcnRhbD5cbiAgICAgICAgICAgIDxUb3VjaGFibGVXaXRob3V0RmVlZGJhY2tcbiAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eUxhYmVsPXtvdmVybGF5QWNjZXNzaWJpbGl0eUxhYmVsfVxuICAgICAgICAgICAgICBhY2Nlc3NpYmlsaXR5Um9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgIG9uUHJlc3M9e29uRGlzbWlzc31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPFZpZXcgc3R5bGU9e1N0eWxlU2hlZXQuYWJzb2x1dGVGaWxsfSAvPlxuICAgICAgICAgICAgPC9Ub3VjaGFibGVXaXRob3V0RmVlZGJhY2s+XG4gICAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAgICByZWY9eyhyZWYpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lbnUgPSByZWY7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGNvbGxhcHNhYmxlPXtmYWxzZX1cbiAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eVZpZXdJc01vZGFsPXt2aXNpYmxlfVxuICAgICAgICAgICAgICBzdHlsZT17W3N0eWxlcy53cmFwcGVyLCBwb3NpdGlvblN0eWxlLCBzdHlsZV19XG4gICAgICAgICAgICAgIHBvaW50ZXJFdmVudHM9e3Zpc2libGUgPyAnYm94LW5vbmUnIDogJ25vbmUnfVxuICAgICAgICAgICAgICBvbkFjY2Vzc2liaWxpdHlFc2NhcGU9e29uRGlzbWlzc31cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPEFuaW1hdGVkLlZpZXcgc3R5bGU9e3sgdHJhbnNmb3JtOiBwb3NpdGlvblRyYW5zZm9ybXMgfX0+XG4gICAgICAgICAgICAgICAgPFN1cmZhY2VcbiAgICAgICAgICAgICAgICAgIHN0eWxlPXtcbiAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlcy5zaGFkb3dNZW51Q29udGFpbmVyLFxuICAgICAgICAgICAgICAgICAgICAgIHNoYWRvd01lbnVDb250YWluZXJTdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICBjb250ZW50U3R5bGUsXG4gICAgICAgICAgICAgICAgICAgIF0gYXMgU3R5bGVQcm9wPFZpZXdTdHlsZT5cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7KHNjcm9sbGFibGVNZW51SGVpZ2h0ICYmIChcbiAgICAgICAgICAgICAgICAgICAgPFNjcm9sbFZpZXc+e2NoaWxkcmVufTwvU2Nyb2xsVmlldz5cbiAgICAgICAgICAgICAgICAgICkpIHx8IDxSZWFjdC5GcmFnbWVudD57Y2hpbGRyZW59PC9SZWFjdC5GcmFnbWVudD59XG4gICAgICAgICAgICAgICAgPC9TdXJmYWNlPlxuICAgICAgICAgICAgICA8L0FuaW1hdGVkLlZpZXc+XG4gICAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgICAgPC9Qb3J0YWw+XG4gICAgICAgICkgOiBudWxsfVxuICAgICAgPC9WaWV3PlxuICAgICk7XG4gIH1cbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICB3cmFwcGVyOiB7XG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gIH0sXG4gIHNoYWRvd01lbnVDb250YWluZXI6IHtcbiAgICBvcGFjaXR5OiAwLFxuICAgIHBhZGRpbmdWZXJ0aWNhbDogOCxcbiAgICBlbGV2YXRpb246IDgsXG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFRoZW1lKE1lbnUpO1xuIl19