ce1b8bc0a0607db9c6813d1756ff62c7
'use strict';

var invariant = require('invariant');

var customBubblingEventTypes = {};
var customDirectEventTypes = {};
exports.customBubblingEventTypes = customBubblingEventTypes;
exports.customDirectEventTypes = customDirectEventTypes;
var viewConfigCallbacks = new Map();
var viewConfigs = new Map();

function processEventTypes(viewConfig) {
  var bubblingEventTypes = viewConfig.bubblingEventTypes,
      directEventTypes = viewConfig.directEventTypes;

  if (__DEV__) {
    if (bubblingEventTypes != null && directEventTypes != null) {
      for (var topLevelType in directEventTypes) {
        invariant(bubblingEventTypes[topLevelType] == null, 'Event cannot be both direct and bubbling: %s', topLevelType);
      }
    }
  }

  if (bubblingEventTypes != null) {
    for (var _topLevelType in bubblingEventTypes) {
      if (customBubblingEventTypes[_topLevelType] == null) {
        customBubblingEventTypes[_topLevelType] = bubblingEventTypes[_topLevelType];
      }
    }
  }

  if (directEventTypes != null) {
    for (var _topLevelType2 in directEventTypes) {
      if (customDirectEventTypes[_topLevelType2] == null) {
        customDirectEventTypes[_topLevelType2] = directEventTypes[_topLevelType2];
      }
    }
  }
}

exports.register = function (name, callback) {
  invariant(!viewConfigCallbacks.has(name), 'Tried to register two views with the same name %s', name);
  invariant(typeof callback === 'function', 'View config getter callback for component `%s` must be a function (received `%s`)', name, callback === null ? 'null' : typeof callback);
  viewConfigCallbacks.set(name, callback);
  return name;
};

exports.get = function (name) {
  var viewConfig;

  if (!viewConfigs.has(name)) {
    var callback = viewConfigCallbacks.get(name);

    if (typeof callback !== 'function') {
      invariant(false, 'View config getter callback for component `%s` must be a function (received `%s`).%s', name, callback === null ? 'null' : typeof callback, typeof name[0] === 'string' && /[a-z]/.test(name[0]) ? ' Make sure to start component names with a capital letter.' : '');
    }

    viewConfig = callback();
    processEventTypes(viewConfig);
    viewConfigs.set(name, viewConfig);
    viewConfigCallbacks.set(name, null);
  } else {
    viewConfig = viewConfigs.get(name);
  }

  invariant(viewConfig, 'View config not found for name %s', name);
  return viewConfig;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlYWN0TmF0aXZlVmlld0NvbmZpZ1JlZ2lzdHJ5LmpzIl0sIm5hbWVzIjpbImludmFyaWFudCIsInJlcXVpcmUiLCJjdXN0b21CdWJibGluZ0V2ZW50VHlwZXMiLCJjdXN0b21EaXJlY3RFdmVudFR5cGVzIiwiZXhwb3J0cyIsInZpZXdDb25maWdDYWxsYmFja3MiLCJNYXAiLCJ2aWV3Q29uZmlncyIsInByb2Nlc3NFdmVudFR5cGVzIiwidmlld0NvbmZpZyIsImJ1YmJsaW5nRXZlbnRUeXBlcyIsImRpcmVjdEV2ZW50VHlwZXMiLCJfX0RFVl9fIiwidG9wTGV2ZWxUeXBlIiwicmVnaXN0ZXIiLCJuYW1lIiwiY2FsbGJhY2siLCJoYXMiLCJzZXQiLCJnZXQiLCJ0ZXN0Il0sIm1hcHBpbmdzIjoiQUFZQTs7QUFPQSxJQUFNQSxTQUFTLEdBQUdDLE9BQU8sQ0FBQyxXQUFELENBQXpCOztBQUdBLElBQU1DLHdCQVFMLEdBQUcsRUFSSjtBQVNBLElBQU1DLHNCQUtMLEdBQUcsRUFMSjtBQU9BQyxPQUFPLENBQUNGLHdCQUFSLEdBQW1DQSx3QkFBbkM7QUFDQUUsT0FBTyxDQUFDRCxzQkFBUixHQUFpQ0Esc0JBQWpDO0FBRUEsSUFBTUUsbUJBQW1CLEdBQUcsSUFBSUMsR0FBSixFQUE1QjtBQUNBLElBQU1DLFdBQVcsR0FBRyxJQUFJRCxHQUFKLEVBQXBCOztBQUVBLFNBQVNFLGlCQUFULENBQ0VDLFVBREYsRUFFUTtBQUNOLE1BQU9DLGtCQUFQLEdBQStDRCxVQUEvQyxDQUFPQyxrQkFBUDtBQUFBLE1BQTJCQyxnQkFBM0IsR0FBK0NGLFVBQS9DLENBQTJCRSxnQkFBM0I7O0FBRUEsTUFBSUMsT0FBSixFQUFhO0FBQ1gsUUFBSUYsa0JBQWtCLElBQUksSUFBdEIsSUFBOEJDLGdCQUFnQixJQUFJLElBQXRELEVBQTREO0FBQzFELFdBQUssSUFBTUUsWUFBWCxJQUEyQkYsZ0JBQTNCLEVBQTZDO0FBQzNDWCxRQUFBQSxTQUFTLENBQ1BVLGtCQUFrQixDQUFDRyxZQUFELENBQWxCLElBQW9DLElBRDdCLEVBRVAsOENBRk8sRUFHUEEsWUFITyxDQUFUO0FBS0Q7QUFDRjtBQUNGOztBQUVELE1BQUlILGtCQUFrQixJQUFJLElBQTFCLEVBQWdDO0FBQzlCLFNBQUssSUFBTUcsYUFBWCxJQUEyQkgsa0JBQTNCLEVBQStDO0FBQzdDLFVBQUlSLHdCQUF3QixDQUFDVyxhQUFELENBQXhCLElBQTBDLElBQTlDLEVBQW9EO0FBQ2xEWCxRQUFBQSx3QkFBd0IsQ0FBQ1csYUFBRCxDQUF4QixHQUNFSCxrQkFBa0IsQ0FBQ0csYUFBRCxDQURwQjtBQUVEO0FBQ0Y7QUFDRjs7QUFFRCxNQUFJRixnQkFBZ0IsSUFBSSxJQUF4QixFQUE4QjtBQUM1QixTQUFLLElBQU1FLGNBQVgsSUFBMkJGLGdCQUEzQixFQUE2QztBQUMzQyxVQUFJUixzQkFBc0IsQ0FBQ1UsY0FBRCxDQUF0QixJQUF3QyxJQUE1QyxFQUFrRDtBQUNoRFYsUUFBQUEsc0JBQXNCLENBQUNVLGNBQUQsQ0FBdEIsR0FBdUNGLGdCQUFnQixDQUFDRSxjQUFELENBQXZEO0FBQ0Q7QUFDRjtBQUNGO0FBQ0Y7O0FBT0RULE9BQU8sQ0FBQ1UsUUFBUixHQUFtQixVQUFTQyxJQUFULEVBQXVCQyxRQUF2QixFQUEyRDtBQUM1RWhCLEVBQUFBLFNBQVMsQ0FDUCxDQUFDSyxtQkFBbUIsQ0FBQ1ksR0FBcEIsQ0FBd0JGLElBQXhCLENBRE0sRUFFUCxtREFGTyxFQUdQQSxJQUhPLENBQVQ7QUFLQWYsRUFBQUEsU0FBUyxDQUNQLE9BQU9nQixRQUFQLEtBQW9CLFVBRGIsRUFFUCxtRkFGTyxFQUdQRCxJQUhPLEVBSVBDLFFBQVEsS0FBSyxJQUFiLEdBQW9CLE1BQXBCLEdBQTZCLE9BQU9BLFFBSjdCLENBQVQ7QUFNQVgsRUFBQUEsbUJBQW1CLENBQUNhLEdBQXBCLENBQXdCSCxJQUF4QixFQUE4QkMsUUFBOUI7QUFDQSxTQUFPRCxJQUFQO0FBQ0QsQ0FkRDs7QUFxQkFYLE9BQU8sQ0FBQ2UsR0FBUixHQUFjLFVBQVNKLElBQVQsRUFBNkQ7QUFDekUsTUFBSU4sVUFBSjs7QUFDQSxNQUFJLENBQUNGLFdBQVcsQ0FBQ1UsR0FBWixDQUFnQkYsSUFBaEIsQ0FBTCxFQUE0QjtBQUMxQixRQUFNQyxRQUFRLEdBQUdYLG1CQUFtQixDQUFDYyxHQUFwQixDQUF3QkosSUFBeEIsQ0FBakI7O0FBQ0EsUUFBSSxPQUFPQyxRQUFQLEtBQW9CLFVBQXhCLEVBQW9DO0FBQ2xDaEIsTUFBQUEsU0FBUyxDQUNQLEtBRE8sRUFFUCxzRkFGTyxFQUdQZSxJQUhPLEVBSVBDLFFBQVEsS0FBSyxJQUFiLEdBQW9CLE1BQXBCLEdBQTZCLE9BQU9BLFFBSjdCLEVBS1AsT0FBT0QsSUFBSSxDQUFDLENBQUQsQ0FBWCxLQUFtQixRQUFuQixJQUErQixRQUFRSyxJQUFSLENBQWFMLElBQUksQ0FBQyxDQUFELENBQWpCLENBQS9CLEdBQ0ksNERBREosR0FFSSxFQVBHLENBQVQ7QUFTRDs7QUFDRE4sSUFBQUEsVUFBVSxHQUFHTyxRQUFRLEVBQXJCO0FBQ0FSLElBQUFBLGlCQUFpQixDQUFDQyxVQUFELENBQWpCO0FBQ0FGLElBQUFBLFdBQVcsQ0FBQ1csR0FBWixDQUFnQkgsSUFBaEIsRUFBc0JOLFVBQXRCO0FBSUFKLElBQUFBLG1CQUFtQixDQUFDYSxHQUFwQixDQUF3QkgsSUFBeEIsRUFBOEIsSUFBOUI7QUFDRCxHQXBCRCxNQW9CTztBQUNMTixJQUFBQSxVQUFVLEdBQUdGLFdBQVcsQ0FBQ1ksR0FBWixDQUFnQkosSUFBaEIsQ0FBYjtBQUNEOztBQUNEZixFQUFBQSxTQUFTLENBQUNTLFVBQUQsRUFBYSxtQ0FBYixFQUFrRE0sSUFBbEQsQ0FBVDtBQUNBLFNBQU9OLFVBQVA7QUFDRCxDQTNCRCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZvcm1hdFxuICogQGZsb3cgc3RyaWN0LWxvY2FsXG4gKi9cblxuLyogZXNsaW50LWRpc2FibGUgcmVhY3QtaW50ZXJuYWwvaW52YXJpYW50LWFyZ3MgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7XG4gIFJlYWN0TmF0aXZlQmFzZUNvbXBvbmVudFZpZXdDb25maWcsXG4gIFZpZXdDb25maWdHZXR0ZXIsXG59IGZyb20gJy4vUmVhY3ROYXRpdmVUeXBlcyc7XG5cbmNvbnN0IGludmFyaWFudCA9IHJlcXVpcmUoJ2ludmFyaWFudCcpO1xuXG4vLyBFdmVudCBjb25maWdzXG5jb25zdCBjdXN0b21CdWJibGluZ0V2ZW50VHlwZXM6IHtcbiAgW2V2ZW50TmFtZTogc3RyaW5nXTogJFJlYWRPbmx5PHt8XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6ICRSZWFkT25seTx7fFxuICAgICAgY2FwdHVyZWQ6IHN0cmluZyxcbiAgICAgIGJ1YmJsZWQ6IHN0cmluZyxcbiAgICB8fT4sXG4gIHx9PixcbiAgLi4uLFxufSA9IHt9O1xuY29uc3QgY3VzdG9tRGlyZWN0RXZlbnRUeXBlczoge1xuICBbZXZlbnROYW1lOiBzdHJpbmddOiAkUmVhZE9ubHk8e3xcbiAgICByZWdpc3RyYXRpb25OYW1lOiBzdHJpbmcsXG4gIHx9PixcbiAgLi4uLFxufSA9IHt9O1xuXG5leHBvcnRzLmN1c3RvbUJ1YmJsaW5nRXZlbnRUeXBlcyA9IGN1c3RvbUJ1YmJsaW5nRXZlbnRUeXBlcztcbmV4cG9ydHMuY3VzdG9tRGlyZWN0RXZlbnRUeXBlcyA9IGN1c3RvbURpcmVjdEV2ZW50VHlwZXM7XG5cbmNvbnN0IHZpZXdDb25maWdDYWxsYmFja3MgPSBuZXcgTWFwKCk7XG5jb25zdCB2aWV3Q29uZmlncyA9IG5ldyBNYXAoKTtcblxuZnVuY3Rpb24gcHJvY2Vzc0V2ZW50VHlwZXMoXG4gIHZpZXdDb25maWc6IFJlYWN0TmF0aXZlQmFzZUNvbXBvbmVudFZpZXdDb25maWc8Pixcbik6IHZvaWQge1xuICBjb25zdCB7YnViYmxpbmdFdmVudFR5cGVzLCBkaXJlY3RFdmVudFR5cGVzfSA9IHZpZXdDb25maWc7XG5cbiAgaWYgKF9fREVWX18pIHtcbiAgICBpZiAoYnViYmxpbmdFdmVudFR5cGVzICE9IG51bGwgJiYgZGlyZWN0RXZlbnRUeXBlcyAhPSBudWxsKSB7XG4gICAgICBmb3IgKGNvbnN0IHRvcExldmVsVHlwZSBpbiBkaXJlY3RFdmVudFR5cGVzKSB7XG4gICAgICAgIGludmFyaWFudChcbiAgICAgICAgICBidWJibGluZ0V2ZW50VHlwZXNbdG9wTGV2ZWxUeXBlXSA9PSBudWxsLFxuICAgICAgICAgICdFdmVudCBjYW5ub3QgYmUgYm90aCBkaXJlY3QgYW5kIGJ1YmJsaW5nOiAlcycsXG4gICAgICAgICAgdG9wTGV2ZWxUeXBlLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChidWJibGluZ0V2ZW50VHlwZXMgIT0gbnVsbCkge1xuICAgIGZvciAoY29uc3QgdG9wTGV2ZWxUeXBlIGluIGJ1YmJsaW5nRXZlbnRUeXBlcykge1xuICAgICAgaWYgKGN1c3RvbUJ1YmJsaW5nRXZlbnRUeXBlc1t0b3BMZXZlbFR5cGVdID09IG51bGwpIHtcbiAgICAgICAgY3VzdG9tQnViYmxpbmdFdmVudFR5cGVzW3RvcExldmVsVHlwZV0gPVxuICAgICAgICAgIGJ1YmJsaW5nRXZlbnRUeXBlc1t0b3BMZXZlbFR5cGVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChkaXJlY3RFdmVudFR5cGVzICE9IG51bGwpIHtcbiAgICBmb3IgKGNvbnN0IHRvcExldmVsVHlwZSBpbiBkaXJlY3RFdmVudFR5cGVzKSB7XG4gICAgICBpZiAoY3VzdG9tRGlyZWN0RXZlbnRUeXBlc1t0b3BMZXZlbFR5cGVdID09IG51bGwpIHtcbiAgICAgICAgY3VzdG9tRGlyZWN0RXZlbnRUeXBlc1t0b3BMZXZlbFR5cGVdID0gZGlyZWN0RXZlbnRUeXBlc1t0b3BMZXZlbFR5cGVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBhIG5hdGl2ZSB2aWV3L2NvbXBvbmVudCBieSBuYW1lLlxuICogQSBjYWxsYmFjayBpcyBwcm92aWRlZCB0byBsb2FkIHRoZSB2aWV3IGNvbmZpZyBmcm9tIFVJTWFuYWdlci5cbiAqIFRoZSBjYWxsYmFjayBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgdmlldyBpcyBhY3R1YWxseSByZW5kZXJlZC5cbiAqL1xuZXhwb3J0cy5yZWdpc3RlciA9IGZ1bmN0aW9uKG5hbWU6IHN0cmluZywgY2FsbGJhY2s6IFZpZXdDb25maWdHZXR0ZXIpOiBzdHJpbmcge1xuICBpbnZhcmlhbnQoXG4gICAgIXZpZXdDb25maWdDYWxsYmFja3MuaGFzKG5hbWUpLFxuICAgICdUcmllZCB0byByZWdpc3RlciB0d28gdmlld3Mgd2l0aCB0aGUgc2FtZSBuYW1lICVzJyxcbiAgICBuYW1lLFxuICApO1xuICBpbnZhcmlhbnQoXG4gICAgdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nLFxuICAgICdWaWV3IGNvbmZpZyBnZXR0ZXIgY2FsbGJhY2sgZm9yIGNvbXBvbmVudCBgJXNgIG11c3QgYmUgYSBmdW5jdGlvbiAocmVjZWl2ZWQgYCVzYCknLFxuICAgIG5hbWUsXG4gICAgY2FsbGJhY2sgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgY2FsbGJhY2ssXG4gICk7XG4gIHZpZXdDb25maWdDYWxsYmFja3Muc2V0KG5hbWUsIGNhbGxiYWNrKTtcbiAgcmV0dXJuIG5hbWU7XG59O1xuXG4vKipcbiAqIFJldHJpZXZlcyBhIGNvbmZpZyBmb3IgdGhlIHNwZWNpZmllZCB2aWV3LlxuICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgdGltZSB0aGUgdmlldyBoYXMgYmVlbiB1c2VkLFxuICogVGhpcyBjb25maWd1cmF0aW9uIHdpbGwgYmUgbGF6eS1sb2FkZWQgZnJvbSBVSU1hbmFnZXIuXG4gKi9cbmV4cG9ydHMuZ2V0ID0gZnVuY3Rpb24obmFtZTogc3RyaW5nKTogUmVhY3ROYXRpdmVCYXNlQ29tcG9uZW50Vmlld0NvbmZpZzw+IHtcbiAgbGV0IHZpZXdDb25maWc7XG4gIGlmICghdmlld0NvbmZpZ3MuaGFzKG5hbWUpKSB7XG4gICAgY29uc3QgY2FsbGJhY2sgPSB2aWV3Q29uZmlnQ2FsbGJhY2tzLmdldChuYW1lKTtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgIGZhbHNlLFxuICAgICAgICAnVmlldyBjb25maWcgZ2V0dGVyIGNhbGxiYWNrIGZvciBjb21wb25lbnQgYCVzYCBtdXN0IGJlIGEgZnVuY3Rpb24gKHJlY2VpdmVkIGAlc2ApLiVzJyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgY2FsbGJhY2sgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgY2FsbGJhY2ssXG4gICAgICAgIHR5cGVvZiBuYW1lWzBdID09PSAnc3RyaW5nJyAmJiAvW2Etel0vLnRlc3QobmFtZVswXSlcbiAgICAgICAgICA/ICcgTWFrZSBzdXJlIHRvIHN0YXJ0IGNvbXBvbmVudCBuYW1lcyB3aXRoIGEgY2FwaXRhbCBsZXR0ZXIuJ1xuICAgICAgICAgIDogJycsXG4gICAgICApO1xuICAgIH1cbiAgICB2aWV3Q29uZmlnID0gY2FsbGJhY2soKTtcbiAgICBwcm9jZXNzRXZlbnRUeXBlcyh2aWV3Q29uZmlnKTtcbiAgICB2aWV3Q29uZmlncy5zZXQobmFtZSwgdmlld0NvbmZpZyk7XG5cbiAgICAvLyBDbGVhciB0aGUgY2FsbGJhY2sgYWZ0ZXIgdGhlIGNvbmZpZyBpcyBzZXQgc28gdGhhdFxuICAgIC8vIHdlIGRvbid0IG1hc2sgYW55IGVycm9ycyBkdXJpbmcgcmVnaXN0cmF0aW9uLlxuICAgIHZpZXdDb25maWdDYWxsYmFja3Muc2V0KG5hbWUsIG51bGwpO1xuICB9IGVsc2Uge1xuICAgIHZpZXdDb25maWcgPSB2aWV3Q29uZmlncy5nZXQobmFtZSk7XG4gIH1cbiAgaW52YXJpYW50KHZpZXdDb25maWcsICdWaWV3IGNvbmZpZyBub3QgZm91bmQgZm9yIG5hbWUgJXMnLCBuYW1lKTtcbiAgcmV0dXJuIHZpZXdDb25maWc7XG59O1xuIl19