2c52fcd3f6e9e10dd9be425a3ee8c1e4
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var DeprecatedTextInputPropTypes = require("../../DeprecatedPropTypes/DeprecatedTextInputPropTypes");

var Platform = require("../../Utilities/Platform");

var React = require('react');

var ReactNative = require("../../Renderer/shims/ReactNative");

var StyleSheet = require("../../StyleSheet/StyleSheet");

var Text = require("../../Text/Text");

var TextAncestor = require("../../Text/TextAncestor");

var TextInputState = require("./TextInputState");

var TouchableWithoutFeedback = require("../Touchable/TouchableWithoutFeedback");

var invariant = require('invariant');

var nullthrows = require('nullthrows');

var setAndForwardRef = require("../../Utilities/setAndForwardRef");

var useEffect = React.useEffect,
    useRef = React.useRef,
    useState = React.useState;
var AndroidTextInput;
var AndroidTextInputCommands;
var RCTSinglelineTextInputView;
var RCTSinglelineTextInputNativeCommands;
var RCTMultilineTextInputView;
var RCTMultilineTextInputNativeCommands;

if (Platform.OS === 'android') {
  AndroidTextInput = require("./AndroidTextInputNativeComponent").default;
  AndroidTextInputCommands = require("./AndroidTextInputNativeComponent").Commands;
} else if (Platform.OS === 'ios') {
  RCTSinglelineTextInputView = require("./RCTSingelineTextInputNativeComponent").default;
  RCTSinglelineTextInputNativeCommands = require("./RCTSingelineTextInputNativeComponent").Commands;
  RCTMultilineTextInputView = require("./RCTMultilineTextInputNativeComponent").default;
  RCTMultilineTextInputNativeCommands = require("./RCTMultilineTextInputNativeComponent").Commands;
}

var emptyFunctionThatReturnsTrue = function emptyFunctionThatReturnsTrue() {
  return true;
};

function InternalTextInput(props) {
  var _props$selection$end;

  var inputRef = useRef(null);
  var selection = props.selection == null ? null : {
    start: props.selection.start,
    end: (_props$selection$end = props.selection.end) != null ? _props$selection$end : props.selection.start
  };

  var _useState = useState(0),
      _useState2 = (0, _slicedToArray2.default)(_useState, 2),
      mostRecentEventCount = _useState2[0],
      setMostRecentEventCount = _useState2[1];

  var _useState3 = useState(props.value),
      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
      lastNativeText = _useState4[0],
      setLastNativeText = _useState4[1];

  var _useState5 = useState({
    selection: selection,
    mostRecentEventCount: mostRecentEventCount
  }),
      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),
      lastNativeSelectionState = _useState6[0],
      setLastNativeSelection = _useState6[1];

  var lastNativeSelection = lastNativeSelectionState.selection;
  var lastNativeSelectionEventCount = lastNativeSelectionState.mostRecentEventCount;

  if (lastNativeSelectionEventCount < mostRecentEventCount) {
    selection = null;
  }

  var viewCommands;

  if (AndroidTextInputCommands) {
    viewCommands = AndroidTextInputCommands;
  } else {
    viewCommands = props.multiline ? RCTMultilineTextInputNativeCommands : RCTSinglelineTextInputNativeCommands;
  }

  var text = typeof props.value === 'string' ? props.value : typeof props.defaultValue === 'string' ? props.defaultValue : '';
  useEffect(function () {
    var nativeUpdate = {};

    if (lastNativeText !== props.value && typeof props.value === 'string') {
      nativeUpdate.text = props.value;
      setLastNativeText(props.value);
    }

    if (selection && lastNativeSelection && (lastNativeSelection.start !== selection.start || lastNativeSelection.end !== selection.end)) {
      nativeUpdate.selection = selection;
      setLastNativeSelection({
        selection: selection,
        mostRecentEventCount: mostRecentEventCount
      });
    }

    if (Object.keys(nativeUpdate).length === 0) {
      return;
    }

    if (inputRef.current != null) {
      var _selection$start, _selection, _selection$end, _selection2;

      viewCommands.setTextAndSelection(inputRef.current, mostRecentEventCount, text, (_selection$start = (_selection = selection) == null ? void 0 : _selection.start) != null ? _selection$start : -1, (_selection$end = (_selection2 = selection) == null ? void 0 : _selection2.end) != null ? _selection$end : -1);
    }
  }, [mostRecentEventCount, inputRef, props.value, props.defaultValue, lastNativeText, selection, lastNativeSelection, text, viewCommands]);
  useEffect(function () {
    var inputRefValue = inputRef.current;

    if (inputRefValue != null) {
      TextInputState.registerInput(inputRefValue);
      return function () {
        TextInputState.unregisterInput(inputRefValue);
      };
    }
  }, [inputRef]);
  useEffect(function () {
    return function () {
      if (isFocused()) {
        nullthrows(inputRef.current).blur();
      }
    };
  }, [inputRef]);

  function clear() {
    if (inputRef.current != null) {
      viewCommands.setTextAndSelection(inputRef.current, mostRecentEventCount, '', 0, 0);
    }
  }

  function isFocused() {
    return TextInputState.currentlyFocusedInput() === inputRef.current;
  }

  function getNativeRef() {
    return inputRef.current;
  }

  var _setNativeRef = setAndForwardRef({
    getForwardedRef: function getForwardedRef() {
      return props.forwardedRef;
    },
    setLocalRef: function setLocalRef(ref) {
      inputRef.current = ref;

      if (ref) {
        ref.clear = clear;
        ref.isFocused = isFocused;
        ref.getNativeRef = getNativeRef;
      }
    }
  });

  var _onPress = function _onPress(event) {
    if (props.editable || props.editable === undefined) {
      nullthrows(inputRef.current).focus();
    }
  };

  var _onChange = function _onChange(event) {
    var text = event.nativeEvent.text;
    props.onChange && props.onChange(event);
    props.onChangeText && props.onChangeText(text);

    if (inputRef.current == null) {
      return;
    }

    setLastNativeText(text);
    setMostRecentEventCount(event.nativeEvent.eventCount);
  };

  var _onSelectionChange = function _onSelectionChange(event) {
    props.onSelectionChange && props.onSelectionChange(event);

    if (inputRef.current == null) {
      return;
    }

    setLastNativeSelection({
      selection: event.nativeEvent.selection,
      mostRecentEventCount: mostRecentEventCount
    });
  };

  var _onFocus = function _onFocus(event) {
    TextInputState.focusInput(inputRef.current);

    if (props.onFocus) {
      props.onFocus(event);
    }
  };

  var _onBlur = function _onBlur(event) {
    TextInputState.blurInput(inputRef.current);

    if (props.onBlur) {
      props.onBlur(event);
    }
  };

  var _onScroll = function _onScroll(event) {
    props.onScroll && props.onScroll(event);
  };

  var textInput = null;

  var additionalTouchableProps = _objectSpread({}, null);

  if (Platform.OS === 'ios') {
    var RCTTextInputView = props.multiline ? RCTMultilineTextInputView : RCTSinglelineTextInputView;
    var style = props.multiline ? [styles.multilineInput, props.style] : props.style;
    additionalTouchableProps.rejectResponderTermination = props.rejectResponderTermination;
    textInput = React.createElement(RCTTextInputView, (0, _extends2.default)({
      ref: _setNativeRef
    }, props, {
      dataDetectorTypes: props.dataDetectorTypes,
      mostRecentEventCount: mostRecentEventCount,
      onBlur: _onBlur,
      onChange: _onChange,
      onContentSizeChange: props.onContentSizeChange,
      onFocus: _onFocus,
      onScroll: _onScroll,
      onSelectionChange: _onSelectionChange,
      onSelectionChangeShouldSetResponder: emptyFunctionThatReturnsTrue,
      selection: selection,
      style: style,
      text: text
    }));
  } else if (Platform.OS === 'android') {
    var _style = [props.style];
    var autoCapitalize = props.autoCapitalize || 'sentences';
    var children = props.children;
    var childCount = 0;
    React.Children.forEach(children, function () {
      return ++childCount;
    });
    invariant(!(props.value && childCount), 'Cannot specify both value and children.');

    if (childCount > 1) {
      children = React.createElement(Text, null, children);
    }

    textInput = React.createElement(AndroidTextInput, (0, _extends2.default)({
      ref: _setNativeRef
    }, props, {
      autoCapitalize: autoCapitalize,
      children: children,
      disableFullscreenUI: props.disableFullscreenUI,
      mostRecentEventCount: mostRecentEventCount,
      onBlur: _onBlur,
      onChange: _onChange,
      onFocus: _onFocus,
      onScroll: _onScroll,
      onSelectionChange: _onSelectionChange,
      selection: selection,
      style: _style,
      text: text,
      textBreakStrategy: props.textBreakStrategy
    }));
  }

  return React.createElement(TextAncestor.Provider, {
    value: true
  }, React.createElement(TouchableWithoutFeedback, (0, _extends2.default)({
    onLayout: props.onLayout,
    onPress: _onPress,
    accessible: props.accessible,
    accessibilityLabel: props.accessibilityLabel,
    accessibilityRole: props.accessibilityRole,
    accessibilityState: props.accessibilityState,
    nativeID: props.nativeID,
    testID: props.testID
  }, additionalTouchableProps), textInput));
}

var ExportedForwardRef = React.forwardRef(function TextInput(props, forwardedRef) {
  return React.createElement(InternalTextInput, (0, _extends2.default)({}, props, {
    forwardedRef: forwardedRef
  }));
});
ExportedForwardRef.defaultProps = {
  allowFontScaling: true,
  rejectResponderTermination: true,
  underlineColorAndroid: 'transparent'
};
ExportedForwardRef.propTypes = DeprecatedTextInputPropTypes;
ExportedForwardRef.State = {
  currentlyFocusedInput: TextInputState.currentlyFocusedInput,
  currentlyFocusedField: TextInputState.currentlyFocusedField,
  focusTextInput: TextInputState.focusTextInput,
  blurTextInput: TextInputState.blurTextInput
};
var styles = StyleSheet.create({
  multilineInput: {
    paddingTop: 5
  }
});
module.exports = ExportedForwardRef;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRleHRJbnB1dC5qcyJdLCJuYW1lcyI6WyJEZXByZWNhdGVkVGV4dElucHV0UHJvcFR5cGVzIiwicmVxdWlyZSIsIlBsYXRmb3JtIiwiUmVhY3QiLCJSZWFjdE5hdGl2ZSIsIlN0eWxlU2hlZXQiLCJUZXh0IiwiVGV4dEFuY2VzdG9yIiwiVGV4dElucHV0U3RhdGUiLCJUb3VjaGFibGVXaXRob3V0RmVlZGJhY2siLCJpbnZhcmlhbnQiLCJudWxsdGhyb3dzIiwic2V0QW5kRm9yd2FyZFJlZiIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwiQW5kcm9pZFRleHRJbnB1dCIsIkFuZHJvaWRUZXh0SW5wdXRDb21tYW5kcyIsIlJDVFNpbmdsZWxpbmVUZXh0SW5wdXRWaWV3IiwiUkNUU2luZ2xlbGluZVRleHRJbnB1dE5hdGl2ZUNvbW1hbmRzIiwiUkNUTXVsdGlsaW5lVGV4dElucHV0VmlldyIsIlJDVE11bHRpbGluZVRleHRJbnB1dE5hdGl2ZUNvbW1hbmRzIiwiT1MiLCJkZWZhdWx0IiwiQ29tbWFuZHMiLCJlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNUcnVlIiwiSW50ZXJuYWxUZXh0SW5wdXQiLCJwcm9wcyIsImlucHV0UmVmIiwic2VsZWN0aW9uIiwic3RhcnQiLCJlbmQiLCJtb3N0UmVjZW50RXZlbnRDb3VudCIsInNldE1vc3RSZWNlbnRFdmVudENvdW50IiwidmFsdWUiLCJsYXN0TmF0aXZlVGV4dCIsInNldExhc3ROYXRpdmVUZXh0IiwibGFzdE5hdGl2ZVNlbGVjdGlvblN0YXRlIiwic2V0TGFzdE5hdGl2ZVNlbGVjdGlvbiIsImxhc3ROYXRpdmVTZWxlY3Rpb24iLCJsYXN0TmF0aXZlU2VsZWN0aW9uRXZlbnRDb3VudCIsInZpZXdDb21tYW5kcyIsIm11bHRpbGluZSIsInRleHQiLCJkZWZhdWx0VmFsdWUiLCJuYXRpdmVVcGRhdGUiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwiY3VycmVudCIsInNldFRleHRBbmRTZWxlY3Rpb24iLCJpbnB1dFJlZlZhbHVlIiwicmVnaXN0ZXJJbnB1dCIsInVucmVnaXN0ZXJJbnB1dCIsImlzRm9jdXNlZCIsImJsdXIiLCJjbGVhciIsImN1cnJlbnRseUZvY3VzZWRJbnB1dCIsImdldE5hdGl2ZVJlZiIsIl9zZXROYXRpdmVSZWYiLCJnZXRGb3J3YXJkZWRSZWYiLCJmb3J3YXJkZWRSZWYiLCJzZXRMb2NhbFJlZiIsInJlZiIsIl9vblByZXNzIiwiZXZlbnQiLCJlZGl0YWJsZSIsInVuZGVmaW5lZCIsImZvY3VzIiwiX29uQ2hhbmdlIiwibmF0aXZlRXZlbnQiLCJvbkNoYW5nZSIsIm9uQ2hhbmdlVGV4dCIsImV2ZW50Q291bnQiLCJfb25TZWxlY3Rpb25DaGFuZ2UiLCJvblNlbGVjdGlvbkNoYW5nZSIsIl9vbkZvY3VzIiwiZm9jdXNJbnB1dCIsIm9uRm9jdXMiLCJfb25CbHVyIiwiYmx1cklucHV0Iiwib25CbHVyIiwiX29uU2Nyb2xsIiwib25TY3JvbGwiLCJ0ZXh0SW5wdXQiLCJhZGRpdGlvbmFsVG91Y2hhYmxlUHJvcHMiLCJSQ1RUZXh0SW5wdXRWaWV3Iiwic3R5bGUiLCJzdHlsZXMiLCJtdWx0aWxpbmVJbnB1dCIsInJlamVjdFJlc3BvbmRlclRlcm1pbmF0aW9uIiwiZGF0YURldGVjdG9yVHlwZXMiLCJvbkNvbnRlbnRTaXplQ2hhbmdlIiwiYXV0b0NhcGl0YWxpemUiLCJjaGlsZHJlbiIsImNoaWxkQ291bnQiLCJDaGlsZHJlbiIsImZvckVhY2giLCJkaXNhYmxlRnVsbHNjcmVlblVJIiwidGV4dEJyZWFrU3RyYXRlZ3kiLCJvbkxheW91dCIsImFjY2Vzc2libGUiLCJhY2Nlc3NpYmlsaXR5TGFiZWwiLCJhY2Nlc3NpYmlsaXR5Um9sZSIsImFjY2Vzc2liaWxpdHlTdGF0ZSIsIm5hdGl2ZUlEIiwidGVzdElEIiwiRXhwb3J0ZWRGb3J3YXJkUmVmIiwiZm9yd2FyZFJlZiIsIlRleHRJbnB1dCIsImRlZmF1bHRQcm9wcyIsImFsbG93Rm9udFNjYWxpbmciLCJ1bmRlcmxpbmVDb2xvckFuZHJvaWQiLCJwcm9wVHlwZXMiLCJTdGF0ZSIsImN1cnJlbnRseUZvY3VzZWRGaWVsZCIsImZvY3VzVGV4dElucHV0IiwiYmx1clRleHRJbnB1dCIsImNyZWF0ZSIsInBhZGRpbmdUb3AiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFVQTs7Ozs7Ozs7Ozs7Ozs7QUFFQSxJQUFNQSw0QkFBNEIsR0FBR0MsT0FBTywwREFBNUM7O0FBQ0EsSUFBTUMsUUFBUSxHQUFHRCxPQUFPLDRCQUF4Qjs7QUFDQSxJQUFNRSxLQUFLLEdBQUdGLE9BQU8sQ0FBQyxPQUFELENBQXJCOztBQUNBLElBQU1HLFdBQVcsR0FBR0gsT0FBTyxvQ0FBM0I7O0FBQ0EsSUFBTUksVUFBVSxHQUFHSixPQUFPLCtCQUExQjs7QUFDQSxJQUFNSyxJQUFJLEdBQUdMLE9BQU8sbUJBQXBCOztBQUNBLElBQU1NLFlBQVksR0FBR04sT0FBTywyQkFBNUI7O0FBQ0EsSUFBTU8sY0FBYyxHQUFHUCxPQUFPLG9CQUE5Qjs7QUFDQSxJQUFNUSx3QkFBd0IsR0FBR1IsT0FBTyx5Q0FBeEM7O0FBRUEsSUFBTVMsU0FBUyxHQUFHVCxPQUFPLENBQUMsV0FBRCxDQUF6Qjs7QUFDQSxJQUFNVSxVQUFVLEdBQUdWLE9BQU8sQ0FBQyxZQUFELENBQTFCOztBQUNBLElBQU1XLGdCQUFnQixHQUFHWCxPQUFPLG9DQUFoQzs7QUFVQSxJQUFPWSxTQUFQLEdBQXNDVixLQUF0QyxDQUFPVSxTQUFQO0FBQUEsSUFBa0JDLE1BQWxCLEdBQXNDWCxLQUF0QyxDQUFrQlcsTUFBbEI7QUFBQSxJQUEwQkMsUUFBMUIsR0FBc0NaLEtBQXRDLENBQTBCWSxRQUExQjtBQUlBLElBQUlDLGdCQUFKO0FBQ0EsSUFBSUMsd0JBQUo7QUFDQSxJQUFJQywwQkFBSjtBQUNBLElBQUlDLG9DQUFKO0FBQ0EsSUFBSUMseUJBQUo7QUFDQSxJQUFJQyxtQ0FBSjs7QUFFQSxJQUFJbkIsUUFBUSxDQUFDb0IsRUFBVCxLQUFnQixTQUFwQixFQUErQjtBQUM3Qk4sRUFBQUEs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QUssQ0FBQzhFLFFBUGxCO0FBUUUsSUFBQSxNQUFNLEVBQUU5RSxLQUFLLENBQUMrRTtBQVJoQixLQVNNckIsd0JBVE4sR0FVR0QsU0FWSCxDQURGLENBREY7QUFnQkQ7O0FBRUQsSUFBTXVCLGtCQUdMLEdBQUd4RyxLQUFLLENBQUN5RyxVQUFOLENBQWlCLFNBQVNDLFNBQVQsQ0FDbkJsRixLQURtQixFQUVuQmtDLFlBRm1CLEVBS25CO0FBQ0EsU0FBTyxvQkFBQyxpQkFBRCw2QkFBdUJsQyxLQUF2QjtBQUE4QixJQUFBLFlBQVksRUFBRWtDO0FBQTVDLEtBQVA7QUFDRCxDQVBHLENBSEo7QUFhQThDLGtCQUFrQixDQUFDRyxZQUFuQixHQUFrQztBQUNoQ0MsRUFBQUEsZ0JBQWdCLEVBQUUsSUFEYztBQUVoQ3JCLEVBQUFBLDBCQUEwQixFQUFFLElBRkk7QUFHaENzQixFQUFBQSxxQkFBcUIsRUFBRTtBQUhTLENBQWxDO0FBUUFMLGtCQUFrQixDQUFDTSxTQUFuQixHQUErQmpILDRCQUEvQjtBQUdBMkcsa0JBQWtCLENBQUNPLEtBQW5CLEdBQTJCO0FBQ3pCekQsRUFBQUEscUJBQXFCLEVBQUVqRCxjQUFjLENBQUNpRCxxQkFEYjtBQUd6QjBELEVBQUFBLHFCQUFxQixFQUFFM0csY0FBYyxDQUFDMkcscUJBSGI7QUFJekJDLEVBQUFBLGNBQWMsRUFBRTVHLGNBQWMsQ0FBQzRHLGNBSk47QUFLekJDLEVBQUFBLGFBQWEsRUFBRTdHLGNBQWMsQ0FBQzZHO0FBTEwsQ0FBM0I7QUFrQkEsSUFBTTdCLE1BQU0sR0FBR25GLFVBQVUsQ0FBQ2lILE1BQVgsQ0FBa0I7QUFDL0I3QixFQUFBQSxjQUFjLEVBQUU7QUFJZDhCLElBQUFBLFVBQVUsRUFBRTtBQUpFO0FBRGUsQ0FBbEIsQ0FBZjtBQVNBQyxNQUFNLENBQUNDLE9BQVAsR0FBbUJkLGtCQUFuQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IERlcHJlY2F0ZWRUZXh0SW5wdXRQcm9wVHlwZXMgPSByZXF1aXJlKCcuLi8uLi9EZXByZWNhdGVkUHJvcFR5cGVzL0RlcHJlY2F0ZWRUZXh0SW5wdXRQcm9wVHlwZXMnKTtcbmNvbnN0IFBsYXRmb3JtID0gcmVxdWlyZSgnLi4vLi4vVXRpbGl0aWVzL1BsYXRmb3JtJyk7XG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5jb25zdCBSZWFjdE5hdGl2ZSA9IHJlcXVpcmUoJy4uLy4uL1JlbmRlcmVyL3NoaW1zL1JlYWN0TmF0aXZlJyk7XG5jb25zdCBTdHlsZVNoZWV0ID0gcmVxdWlyZSgnLi4vLi4vU3R5bGVTaGVldC9TdHlsZVNoZWV0Jyk7XG5jb25zdCBUZXh0ID0gcmVxdWlyZSgnLi4vLi4vVGV4dC9UZXh0Jyk7XG5jb25zdCBUZXh0QW5jZXN0b3IgPSByZXF1aXJlKCcuLi8uLi9UZXh0L1RleHRBbmNlc3RvcicpO1xuY29uc3QgVGV4dElucHV0U3RhdGUgPSByZXF1aXJlKCcuL1RleHRJbnB1dFN0YXRlJyk7XG5jb25zdCBUb3VjaGFibGVXaXRob3V0RmVlZGJhY2sgPSByZXF1aXJlKCcuLi9Ub3VjaGFibGUvVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrJyk7XG5cbmNvbnN0IGludmFyaWFudCA9IHJlcXVpcmUoJ2ludmFyaWFudCcpO1xuY29uc3QgbnVsbHRocm93cyA9IHJlcXVpcmUoJ251bGx0aHJvd3MnKTtcbmNvbnN0IHNldEFuZEZvcndhcmRSZWYgPSByZXF1aXJlKCcuLi8uLi9VdGlsaXRpZXMvc2V0QW5kRm9yd2FyZFJlZicpO1xuXG5pbXBvcnQgdHlwZSB7VGV4dFN0eWxlUHJvcCwgVmlld1N0eWxlUHJvcH0gZnJvbSAnLi4vLi4vU3R5bGVTaGVldC9TdHlsZVNoZWV0JztcbmltcG9ydCB0eXBlIHtDb2xvclZhbHVlfSBmcm9tICcuLi8uLi9TdHlsZVNoZWV0L1N0eWxlU2hlZXRUeXBlcyc7XG5pbXBvcnQgdHlwZSB7Vmlld1Byb3BzfSBmcm9tICcuLi9WaWV3L1ZpZXdQcm9wVHlwZXMnO1xuaW1wb3J0IHR5cGUge1N5bnRoZXRpY0V2ZW50LCBTY3JvbGxFdmVudH0gZnJvbSAnLi4vLi4vVHlwZXMvQ29yZUV2ZW50VHlwZXMnO1xuaW1wb3J0IHR5cGUge1ByZXNzRXZlbnR9IGZyb20gJy4uLy4uL1R5cGVzL0NvcmVFdmVudFR5cGVzJztcbmltcG9ydCB0eXBlIHtIb3N0Q29tcG9uZW50fSBmcm9tICcuLi8uLi9SZW5kZXJlci9zaGltcy9SZWFjdE5hdGl2ZVR5cGVzJztcbmltcG9ydCB0eXBlIHtUZXh0SW5wdXROYXRpdmVDb21tYW5kc30gZnJvbSAnLi9UZXh0SW5wdXROYXRpdmVDb21tYW5kcyc7XG5cbmNvbnN0IHt1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGV9ID0gUmVhY3Q7XG5cbnR5cGUgUmVhY3RSZWZTZXR0ZXI8VD4gPSB7Y3VycmVudDogbnVsbCB8IFQsIC4uLn0gfCAoKHJlZjogbnVsbCB8IFQpID0+IG1peGVkKTtcblxubGV0IEFuZHJvaWRUZXh0SW5wdXQ7XG5sZXQgQW5kcm9pZFRleHRJbnB1dENvbW1hbmRzO1xubGV0IFJDVFNpbmdsZWxpbmVUZXh0SW5wdXRWaWV3O1xubGV0IFJDVFNpbmdsZWxpbmVUZXh0SW5wdXROYXRpdmVDb21tYW5kcztcbmxldCBSQ1RNdWx0aWxpbmVUZXh0SW5wdXRWaWV3O1xubGV0IFJDVE11bHRpbGluZVRleHRJbnB1dE5hdGl2ZUNvbW1hbmRzO1xuXG5pZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJykge1xuICBBbmRyb2lkVGV4dElucHV0ID0gcmVxdWlyZSgnLi9BbmRyb2lkVGV4dElucHV0TmF0aXZlQ29tcG9uZW50JykuZGVmYXVsdDtcbiAgQW5kcm9pZFRleHRJbnB1dENvbW1hbmRzID0gcmVxdWlyZSgnLi9BbmRyb2lkVGV4dElucHV0TmF0aXZlQ29tcG9uZW50JylcbiAgICAuQ29tbWFuZHM7XG59IGVsc2UgaWYgKFBsYXRmb3JtLk9TID09PSAnaW9zJykge1xuICBSQ1RTaW5nbGVsaW5lVGV4dElucHV0VmlldyA9IHJlcXVpcmUoJy4vUkNUU2luZ2VsaW5lVGV4dElucHV0TmF0aXZlQ29tcG9uZW50JylcbiAgICAuZGVmYXVsdDtcbiAgUkNUU2luZ2xlbGluZVRleHRJbnB1dE5hdGl2ZUNvbW1hbmRzID0gcmVxdWlyZSgnLi9SQ1RTaW5nZWxpbmVUZXh0SW5wdXROYXRpdmVDb21wb25lbnQnKVxuICAgIC5Db21tYW5kcztcbiAgUkNUTXVsdGlsaW5lVGV4dElucHV0VmlldyA9IHJlcXVpcmUoJy4vUkNUTXVsdGlsaW5lVGV4dElucHV0TmF0aXZlQ29tcG9uZW50JylcbiAgICAuZGVmYXVsdDtcbiAgUkNUTXVsdGlsaW5lVGV4dElucHV0TmF0aXZlQ29tbWFuZHMgPSByZXF1aXJlKCcuL1JDVE11bHRpbGluZVRleHRJbnB1dE5hdGl2ZUNvbXBvbmVudCcpXG4gICAgLkNvbW1hbmRzO1xufVxuXG5leHBvcnQgdHlwZSBDaGFuZ2VFdmVudCA9IFN5bnRoZXRpY0V2ZW50PFxuICAkUmVhZE9ubHk8e3xcbiAgICBldmVudENvdW50OiBudW1iZXIsXG4gICAgdGFyZ2V0OiBudW1iZXIsXG4gICAgdGV4dDogc3RyaW5nLFxuICB8fT4sXG4+O1xuXG5leHBvcnQgdHlwZSBUZXh0SW5wdXRFdmVudCA9IFN5bnRoZXRpY0V2ZW50PFxuICAkUmVhZE9ubHk8e3xcbiAgICBldmVudENvdW50OiBudW1iZXIsXG4gICAgcHJldmlvdXNUZXh0OiBzdHJpbmcsXG4gICAgcmFuZ2U6ICRSZWFkT25seTx7fFxuICAgICAgc3RhcnQ6IG51bWJlcixcbiAgICAgIGVuZDogbnVtYmVyLFxuICAgIHx9PixcbiAgICB0YXJnZXQ6IG51bWJlcixcbiAgICB0ZXh0OiBzdHJpbmcsXG4gIHx9Pixcbj47XG5cbmV4cG9ydCB0eXBlIENvbnRlbnRTaXplQ2hhbmdlRXZlbnQgPSBTeW50aGV0aWNFdmVudDxcbiAgJFJlYWRPbmx5PHt8XG4gICAgdGFyZ2V0OiBudW1iZXIsXG4gICAgY29udGVudFNpemU6ICRSZWFkT25seTx7fFxuICAgICAgd2lkdGg6IG51bWJlcixcbiAgICAgIGhlaWdodDogbnVtYmVyLFxuICAgIHx9PixcbiAgfH0+LFxuPjtcblxudHlwZSBUYXJnZXRFdmVudCA9IFN5bnRoZXRpY0V2ZW50PFxuICAkUmVhZE9ubHk8e3xcbiAgICB0YXJnZXQ6IG51bWJlcixcbiAgfH0+LFxuPjtcblxuZXhwb3J0IHR5cGUgQmx1ckV2ZW50ID0gVGFyZ2V0RXZlbnQ7XG5leHBvcnQgdHlwZSBGb2N1c0V2ZW50ID0gVGFyZ2V0RXZlbnQ7XG5cbnR5cGUgU2VsZWN0aW9uID0gJFJlYWRPbmx5PHt8XG4gIHN0YXJ0OiBudW1iZXIsXG4gIGVuZDogbnVtYmVyLFxufH0+O1xuXG5leHBvcnQgdHlwZSBTZWxlY3Rpb25DaGFuZ2VFdmVudCA9IFN5bnRoZXRpY0V2ZW50PFxuICAkUmVhZE9ubHk8e3xcbiAgICBzZWxlY3Rpb246IFNlbGVjdGlvbixcbiAgICB0YXJnZXQ6IG51bWJlcixcbiAgfH0+LFxuPjtcblxuZXhwb3J0IHR5cGUgS2V5UHJlc3NFdmVudCA9IFN5bnRoZXRpY0V2ZW50PFxuICAkUmVhZE9ubHk8e3xcbiAgICBrZXk6IHN0cmluZyxcbiAgICB0YXJnZXQ/OiA/bnVtYmVyLFxuICAgIGV2ZW50Q291bnQ/OiA/bnVtYmVyLFxuICB8fT4sXG4+O1xuXG5leHBvcnQgdHlwZSBFZGl0aW5nRXZlbnQgPSBTeW50aGV0aWNFdmVudDxcbiAgJFJlYWRPbmx5PHt8XG4gICAgZXZlbnRDb3VudDogbnVtYmVyLFxuICAgIHRleHQ6IHN0cmluZyxcbiAgICB0YXJnZXQ6IG51bWJlcixcbiAgfH0+LFxuPjtcblxudHlwZSBEYXRhRGV0ZWN0b3JUeXBlc1R5cGUgPVxuICB8ICdwaG9uZU51bWJlcidcbiAgfCAnbGluaydcbiAgfCAnYWRkcmVzcydcbiAgfCAnY2FsZW5kYXJFdmVudCdcbiAgfCAnbm9uZSdcbiAgfCAnYWxsJztcblxuZXhwb3J0IHR5cGUgS2V5Ym9hcmRUeXBlID1cbiAgLy8gQ3Jvc3MgUGxhdGZvcm1cbiAgfCAnZGVmYXVsdCdcbiAgfCAnZW1haWwtYWRkcmVzcydcbiAgfCAnbnVtZXJpYydcbiAgfCAncGhvbmUtcGFkJ1xuICB8ICdudW1iZXItcGFkJ1xuICB8ICdkZWNpbWFsLXBhZCdcbiAgLy8gaU9TLW9ubHlcbiAgfCAnYXNjaWktY2FwYWJsZSdcbiAgfCAnbnVtYmVycy1hbmQtcHVuY3R1YXRpb24nXG4gIHwgJ3VybCdcbiAgfCAnbmFtZS1waG9uZS1wYWQnXG4gIHwgJ3R3aXR0ZXInXG4gIHwgJ3dlYi1zZWFyY2gnXG4gIC8vIGlPUyAxMCsgb25seVxuICB8ICdhc2NpaS1jYXBhYmxlLW51bWJlci1wYWQnXG4gIC8vIEFuZHJvaWQtb25seVxuICB8ICd2aXNpYmxlLXBhc3N3b3JkJztcblxuZXhwb3J0IHR5cGUgUmV0dXJuS2V5VHlwZSA9XG4gIC8vIENyb3NzIFBsYXRmb3JtXG4gIHwgJ2RvbmUnXG4gIHwgJ2dvJ1xuICB8ICduZXh0J1xuICB8ICdzZWFyY2gnXG4gIHwgJ3NlbmQnXG4gIC8vIEFuZHJvaWQtb25seVxuICB8ICdub25lJ1xuICB8ICdwcmV2aW91cydcbiAgLy8gaU9TLW9ubHlcbiAgfCAnZGVmYXVsdCdcbiAgfCAnZW1lcmdlbmN5LWNhbGwnXG4gIHwgJ2dvb2dsZSdcbiAgfCAnam9pbidcbiAgfCAncm91dGUnXG4gIHwgJ3lhaG9vJztcblxuZXhwb3J0IHR5cGUgQXV0b0NhcGl0YWxpemUgPSAnbm9uZScgfCAnc2VudGVuY2VzJyB8ICd3b3JkcycgfCAnY2hhcmFjdGVycyc7XG5cbmV4cG9ydCB0eXBlIFRleHRDb250ZW50VHlwZSA9XG4gIHwgJ25vbmUnXG4gIHwgJ1VSTCdcbiAgfCAnYWRkcmVzc0NpdHknXG4gIHwgJ2FkZHJlc3NDaXR5QW5kU3RhdGUnXG4gIHwgJ2FkZHJlc3NTdGF0ZSdcbiAgfCAnY291bnRyeU5hbWUnXG4gIHwgJ2NyZWRpdENhcmROdW1iZXInXG4gIHwgJ2VtYWlsQWRkcmVzcydcbiAgfCAnZmFtaWx5TmFtZSdcbiAgfCAnZnVsbFN0cmVldEFkZHJlc3MnXG4gIHwgJ2dpdmVuTmFtZSdcbiAgfCAnam9iVGl0bGUnXG4gIHwgJ2xvY2F0aW9uJ1xuICB8ICdtaWRkbGVOYW1lJ1xuICB8ICduYW1lJ1xuICB8ICduYW1lUHJlZml4J1xuICB8ICduYW1lU3VmZml4J1xuICB8ICduaWNrbmFtZSdcbiAgfCAnb3JnYW5pemF0aW9uTmFtZSdcbiAgfCAncG9zdGFsQ29kZSdcbiAgfCAnc3RyZWV0QWRkcmVzc0xpbmUxJ1xuICB8ICdzdHJlZXRBZGRyZXNzTGluZTInXG4gIHwgJ3N1YmxvY2FsaXR5J1xuICB8ICd0ZWxlcGhvbmVOdW1iZXInXG4gIHwgJ3VzZXJuYW1lJ1xuICB8ICdwYXNzd29yZCdcbiAgfCAnbmV3UGFzc3dvcmQnXG4gIHwgJ29uZVRpbWVDb2RlJztcblxudHlwZSBQYXNzd29yZFJ1bGVzID0gc3RyaW5nO1xuXG50eXBlIElPU1Byb3BzID0gJFJlYWRPbmx5PHt8XG4gIC8qKlxuICAgKiBJZiBgZmFsc2VgLCBkaXNhYmxlcyBzcGVsbC1jaGVjayBzdHlsZSAoaS5lLiByZWQgdW5kZXJsaW5lcykuXG4gICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGluaGVyaXRlZCBmcm9tIGBhdXRvQ29ycmVjdGAuXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIHNwZWxsQ2hlY2s/OiA/Ym9vbGVhbixcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB0aGUgY29sb3Igb2YgdGhlIGtleWJvYXJkLlxuICAgKiBAcGxhdGZvcm0gaW9zXG4gICAqL1xuICBrZXlib2FyZEFwcGVhcmFuY2U/OiA/KCdkZWZhdWx0JyB8ICdsaWdodCcgfCAnZGFyaycpLFxuXG4gIC8qKlxuICAgKiBJZiBgdHJ1ZWAsIHRoZSBrZXlib2FyZCBkaXNhYmxlcyB0aGUgcmV0dXJuIGtleSB3aGVuIHRoZXJlIGlzIG5vIHRleHQgYW5kXG4gICAqIGF1dG9tYXRpY2FsbHkgZW5hYmxlcyBpdCB3aGVuIHRoZXJlIGlzIHRleHQuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGBmYWxzZWAuXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIGVuYWJsZXNSZXR1cm5LZXlBdXRvbWF0aWNhbGx5PzogP2Jvb2xlYW4sXG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIGNsZWFyIGJ1dHRvbiBzaG91bGQgYXBwZWFyIG9uIHRoZSByaWdodCBzaWRlIG9mIHRoZSB0ZXh0IHZpZXcuXG4gICAqIFRoaXMgcHJvcGVydHkgaXMgc3VwcG9ydGVkIG9ubHkgZm9yIHNpbmdsZS1saW5lIFRleHRJbnB1dCBjb21wb25lbnQuXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIGNsZWFyQnV0dG9uTW9kZT86ID8oJ25ldmVyJyB8ICd3aGlsZS1lZGl0aW5nJyB8ICd1bmxlc3MtZWRpdGluZycgfCAnYWx3YXlzJyksXG5cbiAgLyoqXG4gICAqIElmIGB0cnVlYCwgY2xlYXJzIHRoZSB0ZXh0IGZpZWxkIGF1dG9tYXRpY2FsbHkgd2hlbiBlZGl0aW5nIGJlZ2lucy5cbiAgICogQHBsYXRmb3JtIGlvc1xuICAgKi9cbiAgY2xlYXJUZXh0T25Gb2N1cz86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHRoZSB0eXBlcyBvZiBkYXRhIGNvbnZlcnRlZCB0byBjbGlja2FibGUgVVJMcyBpbiB0aGUgdGV4dCBpbnB1dC5cbiAgICogT25seSB2YWxpZCBpZiBgbXVsdGlsaW5lPXt0cnVlfWAgYW5kIGBlZGl0YWJsZT17ZmFsc2V9YC5cbiAgICogQnkgZGVmYXVsdCBubyBkYXRhIHR5cGVzIGFyZSBkZXRlY3RlZC5cbiAgICpcbiAgICogWW91IGNhbiBwcm92aWRlIG9uZSB0eXBlIG9yIGFuIGFycmF5IG9mIG1hbnkgdHlwZXMuXG4gICAqXG4gICAqIFBvc3NpYmxlIHZhbHVlcyBmb3IgYGRhdGFEZXRlY3RvclR5cGVzYCBhcmU6XG4gICAqXG4gICAqIC0gYCdwaG9uZU51bWJlcidgXG4gICAqIC0gYCdsaW5rJ2BcbiAgICogLSBgJ2FkZHJlc3MnYFxuICAgKiAtIGAnY2FsZW5kYXJFdmVudCdgXG4gICAqIC0gYCdub25lJ2BcbiAgICogLSBgJ2FsbCdgXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIGRhdGFEZXRlY3RvclR5cGVzPzpcbiAgICB8ID9EYXRhRGV0ZWN0b3JUeXBlc1R5cGVcbiAgICB8ICRSZWFkT25seUFycmF5PERhdGFEZXRlY3RvclR5cGVzVHlwZT4sXG5cbiAgLyoqXG4gICAqIEFuIG9wdGlvbmFsIGlkZW50aWZpZXIgd2hpY2ggbGlua3MgYSBjdXN0b20gSW5wdXRBY2Nlc3NvcnlWaWV3IHRvXG4gICAqIHRoaXMgdGV4dCBpbnB1dC4gVGhlIElucHV0QWNjZXNzb3J5VmlldyBpcyByZW5kZXJlZCBhYm92ZSB0aGVcbiAgICoga2V5Ym9hcmQgd2hlbiB0aGlzIHRleHQgaW5wdXQgaXMgZm9jdXNlZC5cbiAgICogQHBsYXRmb3JtIGlvc1xuICAgKi9cbiAgaW5wdXRBY2Nlc3NvcnlWaWV3SUQ/OiA/c3RyaW5nLFxuXG4gIC8qKlxuICAgKiBHaXZlIHRoZSBrZXlib2FyZCBhbmQgdGhlIHN5c3RlbSBpbmZvcm1hdGlvbiBhYm91dCB0aGVcbiAgICogZXhwZWN0ZWQgc2VtYW50aWMgbWVhbmluZyBmb3IgdGhlIGNvbnRlbnQgdGhhdCB1c2VycyBlbnRlci5cbiAgICogQHBsYXRmb3JtIGlvc1xuICAgKi9cbiAgdGV4dENvbnRlbnRUeXBlPzogP1RleHRDb250ZW50VHlwZSxcblxuICAvKipcbiAgICogUHJvdmlkZSBydWxlcyBmb3IgeW91ciBwYXNzd29yZC5cbiAgICogRm9yIGV4YW1wbGUsIHNheSB5b3Ugd2FudCB0byByZXF1aXJlIGEgcGFzc3dvcmQgd2l0aCBhdCBsZWFzdCBlaWdodCBjaGFyYWN0ZXJzIGNvbnNpc3Rpbmcgb2YgYSBtaXggb2YgdXBwZXJjYXNlIGFuZCBsb3dlcmNhc2UgbGV0dGVycywgYXQgbGVhc3Qgb25lIG51bWJlciwgYW5kIGF0IG1vc3QgdHdvIGNvbnNlY3V0aXZlIGNoYXJhY3RlcnMuXG4gICAqIFwicmVxdWlyZWQ6IHVwcGVyOyByZXF1aXJlZDogbG93ZXI7IHJlcXVpcmVkOiBkaWdpdDsgbWF4LWNvbnNlY3V0aXZlOiAyOyBtaW5sZW5ndGg6IDg7XCJcbiAgICogQHBsYXRmb3JtIGlvc1xuICAgKi9cbiAgcGFzc3dvcmRSdWxlcz86ID9QYXNzd29yZFJ1bGVzLFxuXG4gIC8qXG4gICAqIElmIGB0cnVlYCwgYWxsb3dzIFRleHRJbnB1dCB0byBwYXNzIHRvdWNoIGV2ZW50cyB0byB0aGUgcGFyZW50IGNvbXBvbmVudC5cbiAgICogVGhpcyBhbGxvd3MgY29tcG9uZW50cyB0byBiZSBzd2lwZWFibGUgZnJvbSB0aGUgVGV4dElucHV0IG9uIGlPUyxcbiAgICogYXMgaXMgdGhlIGNhc2Ugb24gQW5kcm9pZCBieSBkZWZhdWx0LlxuICAgKiBJZiBgZmFsc2VgLCBUZXh0SW5wdXQgYWx3YXlzIGFza3MgdG8gaGFuZGxlIHRoZSBpbnB1dCAoZXhjZXB0IHdoZW4gZGlzYWJsZWQpLlxuICAgKiBAcGxhdGZvcm0gaW9zXG4gICAqL1xuICByZWplY3RSZXNwb25kZXJUZXJtaW5hdGlvbj86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBJZiBgZmFsc2VgLCBzY3JvbGxpbmcgb2YgdGhlIHRleHQgdmlldyB3aWxsIGJlIGRpc2FibGVkLlxuICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgdHJ1ZWAuIERvZXMgb25seSB3b3JrIHdpdGggJ211bHRpbGluZT17dHJ1ZX0nLlxuICAgKiBAcGxhdGZvcm0gaW9zXG4gICAqL1xuICBzY3JvbGxFbmFibGVkPzogP2Jvb2xlYW4sXG58fT47XG5cbnR5cGUgQW5kcm9pZFByb3BzID0gJFJlYWRPbmx5PHt8XG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoaWNoIGNvbnRlbnQgdG8gc3VnZ2VzdCBvbiBhdXRvIGNvbXBsZXRlLCBlLmcuYHVzZXJuYW1lYC5cbiAgICogVG8gZGlzYWJsZSBhdXRvIGNvbXBsZXRlLCB1c2UgYG9mZmAuXG4gICAqXG4gICAqICpBbmRyb2lkIE9ubHkqXG4gICAqXG4gICAqIFRoZSBmb2xsb3dpbmcgdmFsdWVzIHdvcmsgb24gQW5kcm9pZCBvbmx5OlxuICAgKlxuICAgKiAtIGB1c2VybmFtZWBcbiAgICogLSBgcGFzc3dvcmRgXG4gICAqIC0gYGVtYWlsYFxuICAgKiAtIGBuYW1lYFxuICAgKiAtIGB0ZWxgXG4gICAqIC0gYHN0cmVldC1hZGRyZXNzYFxuICAgKiAtIGBwb3N0YWwtY29kZWBcbiAgICogLSBgY2MtbnVtYmVyYFxuICAgKiAtIGBjYy1jc2NgXG4gICAqIC0gYGNjLWV4cGBcbiAgICogLSBgY2MtZXhwLW1vbnRoYFxuICAgKiAtIGBjYy1leHAteWVhcmBcbiAgICogLSBgb2ZmYFxuICAgKlxuICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgKi9cbiAgYXV0b0NvbXBsZXRlVHlwZT86ID8oXG4gICAgfCAnY2MtY3NjJ1xuICAgIHwgJ2NjLWV4cCdcbiAgICB8ICdjYy1leHAtbW9udGgnXG4gICAgfCAnY2MtZXhwLXllYXInXG4gICAgfCAnY2MtbnVtYmVyJ1xuICAgIHwgJ2VtYWlsJ1xuICAgIHwgJ25hbWUnXG4gICAgfCAncGFzc3dvcmQnXG4gICAgfCAncG9zdGFsLWNvZGUnXG4gICAgfCAnc3RyZWV0LWFkZHJlc3MnXG4gICAgfCAndGVsJ1xuICAgIHwgJ3VzZXJuYW1lJ1xuICAgIHwgJ29mZidcbiAgKSxcblxuICAvKipcbiAgICogU2V0cyB0aGUgcmV0dXJuIGtleSB0byB0aGUgbGFiZWwuIFVzZSBpdCBpbnN0ZWFkIG9mIGByZXR1cm5LZXlUeXBlYC5cbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIHJldHVybktleUxhYmVsPzogP3N0cmluZyxcblxuICAvKipcbiAgICogU2V0cyB0aGUgbnVtYmVyIG9mIGxpbmVzIGZvciBhIGBUZXh0SW5wdXRgLiBVc2UgaXQgd2l0aCBtdWx0aWxpbmUgc2V0IHRvXG4gICAqIGB0cnVlYCB0byBiZSBhYmxlIHRvIGZpbGwgdGhlIGxpbmVzLlxuICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgKi9cbiAgbnVtYmVyT2ZMaW5lcz86ID9udW1iZXIsXG5cbiAgLyoqXG4gICAqIFdoZW4gYGZhbHNlYCwgaWYgdGhlcmUgaXMgYSBzbWFsbCBhbW91bnQgb2Ygc3BhY2UgYXZhaWxhYmxlIGFyb3VuZCBhIHRleHQgaW5wdXRcbiAgICogKGUuZy4gbGFuZHNjYXBlIG9yaWVudGF0aW9uIG9uIGEgcGhvbmUpLCB0aGUgT1MgbWF5IGNob29zZSB0byBoYXZlIHRoZSB1c2VyIGVkaXRcbiAgICogdGhlIHRleHQgaW5zaWRlIG9mIGEgZnVsbCBzY3JlZW4gdGV4dCBpbnB1dCBtb2RlLiBXaGVuIGB0cnVlYCwgdGhpcyBmZWF0dXJlIGlzXG4gICAqIGRpc2FibGVkIGFuZCB1c2VycyB3aWxsIGFsd2F5cyBlZGl0IHRoZSB0ZXh0IGRpcmVjdGx5IGluc2lkZSBvZiB0aGUgdGV4dCBpbnB1dC5cbiAgICogRGVmYXVsdHMgdG8gYGZhbHNlYC5cbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIGRpc2FibGVGdWxsc2NyZWVuVUk/OiA/Ym9vbGVhbixcblxuICAvKipcbiAgICogU2V0IHRleHQgYnJlYWsgc3RyYXRlZ3kgb24gQW5kcm9pZCBBUEkgTGV2ZWwgMjMrLCBwb3NzaWJsZSB2YWx1ZXMgYXJlIGBzaW1wbGVgLCBgaGlnaFF1YWxpdHlgLCBgYmFsYW5jZWRgXG4gICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGBzaW1wbGVgLlxuICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgKi9cbiAgdGV4dEJyZWFrU3RyYXRlZ3k/OiA/KCdzaW1wbGUnIHwgJ2hpZ2hRdWFsaXR5JyB8ICdiYWxhbmNlZCcpLFxuXG4gIC8qKlxuICAgKiBUaGUgY29sb3Igb2YgdGhlIGBUZXh0SW5wdXRgIHVuZGVybGluZS5cbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIHVuZGVybGluZUNvbG9yQW5kcm9pZD86ID9Db2xvclZhbHVlLFxuXG4gIC8qKlxuICAgKiBJZiBkZWZpbmVkLCB0aGUgcHJvdmlkZWQgaW1hZ2UgcmVzb3VyY2Ugd2lsbCBiZSByZW5kZXJlZCBvbiB0aGUgbGVmdC5cbiAgICogVGhlIGltYWdlIHJlc291cmNlIG11c3QgYmUgaW5zaWRlIGAvYW5kcm9pZC9hcHAvc3JjL21haW4vcmVzL2RyYXdhYmxlYCBhbmQgcmVmZXJlbmNlZFxuICAgKiBsaWtlXG4gICAqIGBgYFxuICAgKiA8VGV4dElucHV0XG4gICAqICBpbmxpbmVJbWFnZUxlZnQ9J3NlYXJjaF9pY29uJ1xuICAgKiAvPlxuICAgKiBgYGBcbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIGlubGluZUltYWdlTGVmdD86ID9zdHJpbmcsXG5cbiAgLyoqXG4gICAqIFBhZGRpbmcgYmV0d2VlbiB0aGUgaW5saW5lIGltYWdlLCBpZiBhbnksIGFuZCB0aGUgdGV4dCBpbnB1dCBpdHNlbGYuXG4gICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAqL1xuICBpbmxpbmVJbWFnZVBhZGRpbmc/OiA/bnVtYmVyLFxuXG4gIGltcG9ydGFudEZvckF1dG9maWxsPzogPyhcbiAgICB8ICdhdXRvJ1xuICAgIHwgJ25vJ1xuICAgIHwgJ25vRXhjbHVkZURlc2NlbmRhbnRzJ1xuICAgIHwgJ3llcydcbiAgICB8ICd5ZXNFeGNsdWRlRGVzY2VuZGFudHMnXG4gICksXG5cbiAgLyoqXG4gICAqIFdoZW4gYGZhbHNlYCwgaXQgd2lsbCBwcmV2ZW50IHRoZSBzb2Z0IGtleWJvYXJkIGZyb20gc2hvd2luZyB3aGVuIHRoZSBmaWVsZCBpcyBmb2N1c2VkLlxuICAgKiBEZWZhdWx0cyB0byBgdHJ1ZWAuXG4gICAqIEBwbGF0Zm9ybSBhbmRyb2lkXG4gICAqL1xuICBzaG93U29mdElucHV0T25Gb2N1cz86ID9ib29sZWFuLFxufH0+O1xuXG5leHBvcnQgdHlwZSBQcm9wcyA9ICRSZWFkT25seTx7fFxuICAuLi4kRGlmZjxWaWV3UHJvcHMsICRSZWFkT25seTx7fHN0eWxlOiA/Vmlld1N0eWxlUHJvcHx9Pj4sXG4gIC4uLklPU1Byb3BzLFxuICAuLi5BbmRyb2lkUHJvcHMsXG5cbiAgLyoqXG4gICAqIENhbiB0ZWxsIGBUZXh0SW5wdXRgIHRvIGF1dG9tYXRpY2FsbHkgY2FwaXRhbGl6ZSBjZXJ0YWluIGNoYXJhY3RlcnMuXG4gICAqXG4gICAqIC0gYGNoYXJhY3RlcnNgOiBhbGwgY2hhcmFjdGVycy5cbiAgICogLSBgd29yZHNgOiBmaXJzdCBsZXR0ZXIgb2YgZWFjaCB3b3JkLlxuICAgKiAtIGBzZW50ZW5jZXNgOiBmaXJzdCBsZXR0ZXIgb2YgZWFjaCBzZW50ZW5jZSAoKmRlZmF1bHQqKS5cbiAgICogLSBgbm9uZWA6IGRvbid0IGF1dG8gY2FwaXRhbGl6ZSBhbnl0aGluZy5cbiAgICovXG4gIGF1dG9DYXBpdGFsaXplPzogP0F1dG9DYXBpdGFsaXplLFxuXG4gIC8qKlxuICAgKiBJZiBgZmFsc2VgLCBkaXNhYmxlcyBhdXRvLWNvcnJlY3QuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGB0cnVlYC5cbiAgICovXG4gIGF1dG9Db3JyZWN0PzogP2Jvb2xlYW4sXG5cbiAgLyoqXG4gICAqIElmIGB0cnVlYCwgZm9jdXNlcyB0aGUgaW5wdXQgb24gYGNvbXBvbmVudERpZE1vdW50YC5cbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cbiAgICovXG4gIGF1dG9Gb2N1cz86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBTcGVjaWZpZXMgd2hldGhlciBmb250cyBzaG91bGQgc2NhbGUgdG8gcmVzcGVjdCBUZXh0IFNpemUgYWNjZXNzaWJpbGl0eSBzZXR0aW5ncy4gVGhlXG4gICAqIGRlZmF1bHQgaXMgYHRydWVgLlxuICAgKi9cbiAgYWxsb3dGb250U2NhbGluZz86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBTcGVjaWZpZXMgbGFyZ2VzdCBwb3NzaWJsZSBzY2FsZSBhIGZvbnQgY2FuIHJlYWNoIHdoZW4gYGFsbG93Rm9udFNjYWxpbmdgIGlzIGVuYWJsZWQuXG4gICAqIFBvc3NpYmxlIHZhbHVlczpcbiAgICogYG51bGwvdW5kZWZpbmVkYCAoZGVmYXVsdCk6IGluaGVyaXQgZnJvbSB0aGUgcGFyZW50IG5vZGUgb3IgdGhlIGdsb2JhbCBkZWZhdWx0ICgwKVxuICAgKiBgMGA6IG5vIG1heCwgaWdub3JlIHBhcmVudC9nbG9iYWwgZGVmYXVsdFxuICAgKiBgPj0gMWA6IHNldHMgdGhlIG1heEZvbnRTaXplTXVsdGlwbGllciBvZiB0aGlzIG5vZGUgdG8gdGhpcyB2YWx1ZVxuICAgKi9cbiAgbWF4Rm9udFNpemVNdWx0aXBsaWVyPzogP251bWJlcixcblxuICAvKipcbiAgICogSWYgYGZhbHNlYCwgdGV4dCBpcyBub3QgZWRpdGFibGUuIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGB0cnVlYC5cbiAgICovXG4gIGVkaXRhYmxlPzogP2Jvb2xlYW4sXG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hpY2gga2V5Ym9hcmQgdG8gb3BlbiwgZS5nLmBudW1lcmljYC5cbiAgICpcbiAgICogVGhlIGZvbGxvd2luZyB2YWx1ZXMgd29yayBhY3Jvc3MgcGxhdGZvcm1zOlxuICAgKlxuICAgKiAtIGBkZWZhdWx0YFxuICAgKiAtIGBudW1lcmljYFxuICAgKiAtIGBudW1iZXItcGFkYFxuICAgKiAtIGBkZWNpbWFsLXBhZGBcbiAgICogLSBgZW1haWwtYWRkcmVzc2BcbiAgICogLSBgcGhvbmUtcGFkYFxuICAgKlxuICAgKiAqaU9TIE9ubHkqXG4gICAqXG4gICAqIFRoZSBmb2xsb3dpbmcgdmFsdWVzIHdvcmsgb24gaU9TIG9ubHk6XG4gICAqXG4gICAqIC0gYGFzY2lpLWNhcGFibGVgXG4gICAqIC0gYG51bWJlcnMtYW5kLXB1bmN0dWF0aW9uYFxuICAgKiAtIGB1cmxgXG4gICAqIC0gYG5hbWUtcGhvbmUtcGFkYFxuICAgKiAtIGB0d2l0dGVyYFxuICAgKiAtIGB3ZWItc2VhcmNoYFxuICAgKlxuICAgKiAqQW5kcm9pZCBPbmx5KlxuICAgKlxuICAgKiBUaGUgZm9sbG93aW5nIHZhbHVlcyB3b3JrIG9uIEFuZHJvaWQgb25seTpcbiAgICpcbiAgICogLSBgdmlzaWJsZS1wYXNzd29yZGBcbiAgICpcbiAgICogT24gQW5kcm9pZCBkZXZpY2VzIG1hbnVmYWN0dXJlZCBieSBYaWFvbWkgd2l0aCBBbmRyb2lkIFEsICdlbWFpbC1hZGRyZXNzJ1xuICAgKiB0eXBlIHdpbGwgYmUgcmVwbGFjZWQgaW4gbmF0aXZlIGJ5ICdkZWZhdWx0JyB0byBwcmV2ZW50IGEgc3lzdGVtIHJlbGF0ZWQgY3Jhc2guXG4gICAqL1xuICBrZXlib2FyZFR5cGU/OiA/S2V5Ym9hcmRUeXBlLFxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGhvdyB0aGUgcmV0dXJuIGtleSBzaG91bGQgbG9vay4gT24gQW5kcm9pZCB5b3UgY2FuIGFsc28gdXNlXG4gICAqIGByZXR1cm5LZXlMYWJlbGAuXG4gICAqXG4gICAqICpDcm9zcyBwbGF0Zm9ybSpcbiAgICpcbiAgICogVGhlIGZvbGxvd2luZyB2YWx1ZXMgd29yayBhY3Jvc3MgcGxhdGZvcm1zOlxuICAgKlxuICAgKiAtIGBkb25lYFxuICAgKiAtIGBnb2BcbiAgICogLSBgbmV4dGBcbiAgICogLSBgc2VhcmNoYFxuICAgKiAtIGBzZW5kYFxuICAgKlxuICAgKiAqQW5kcm9pZCBPbmx5KlxuICAgKlxuICAgKiBUaGUgZm9sbG93aW5nIHZhbHVlcyB3b3JrIG9uIEFuZHJvaWQgb25seTpcbiAgICpcbiAgICogLSBgbm9uZWBcbiAgICogLSBgcHJldmlvdXNgXG4gICAqXG4gICAqICppT1MgT25seSpcbiAgICpcbiAgICogVGhlIGZvbGxvd2luZyB2YWx1ZXMgd29yayBvbiBpT1Mgb25seTpcbiAgICpcbiAgICogLSBgZGVmYXVsdGBcbiAgICogLSBgZW1lcmdlbmN5LWNhbGxgXG4gICAqIC0gYGdvb2dsZWBcbiAgICogLSBgam9pbmBcbiAgICogLSBgcm91dGVgXG4gICAqIC0gYHlhaG9vYFxuICAgKi9cbiAgcmV0dXJuS2V5VHlwZT86ID9SZXR1cm5LZXlUeXBlLFxuXG4gIC8qKlxuICAgKiBMaW1pdHMgdGhlIG1heGltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgdGhhdCBjYW4gYmUgZW50ZXJlZC4gVXNlIHRoaXNcbiAgICogaW5zdGVhZCBvZiBpbXBsZW1lbnRpbmcgdGhlIGxvZ2ljIGluIEpTIHRvIGF2b2lkIGZsaWNrZXIuXG4gICAqL1xuICBtYXhMZW5ndGg/OiA/bnVtYmVyLFxuXG4gIC8qKlxuICAgKiBJZiBgdHJ1ZWAsIHRoZSB0ZXh0IGlucHV0IGNhbiBiZSBtdWx0aXBsZSBsaW5lcy5cbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgYGZhbHNlYC5cbiAgICovXG4gIG11bHRpbGluZT86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSB0ZXh0IGlucHV0IGlzIGJsdXJyZWQuXG4gICAqL1xuICBvbkJsdXI/OiA/KGU6IEJsdXJFdmVudCkgPT4gbWl4ZWQsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdoZW4gdGhlIHRleHQgaW5wdXQgaXMgZm9jdXNlZC5cbiAgICovXG4gIG9uRm9jdXM/OiA/KGU6IEZvY3VzRXZlbnQpID0+IG1peGVkLFxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSB0ZXh0IGlucHV0J3MgdGV4dCBjaGFuZ2VzLlxuICAgKi9cbiAgb25DaGFuZ2U/OiA/KGU6IENoYW5nZUV2ZW50KSA9PiBtaXhlZCxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgdGV4dCBpbnB1dCdzIHRleHQgY2hhbmdlcy5cbiAgICogQ2hhbmdlZCB0ZXh0IGlzIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgY2FsbGJhY2sgaGFuZGxlci5cbiAgICovXG4gIG9uQ2hhbmdlVGV4dD86ID8odGV4dDogc3RyaW5nKSA9PiBtaXhlZCxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgdGV4dCBpbnB1dCdzIGNvbnRlbnQgc2l6ZSBjaGFuZ2VzLlxuICAgKiBUaGlzIHdpbGwgYmUgY2FsbGVkIHdpdGhcbiAgICogYHsgbmF0aXZlRXZlbnQ6IHsgY29udGVudFNpemU6IHsgd2lkdGgsIGhlaWdodCB9IH0gfWAuXG4gICAqXG4gICAqIE9ubHkgY2FsbGVkIGZvciBtdWx0aWxpbmUgdGV4dCBpbnB1dHMuXG4gICAqL1xuICBvbkNvbnRlbnRTaXplQ2hhbmdlPzogPyhlOiBDb250ZW50U2l6ZUNoYW5nZUV2ZW50KSA9PiBtaXhlZCxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiB0ZXh0IGlucHV0IGVuZHMuXG4gICAqL1xuICBvbkVuZEVkaXRpbmc/OiA/KGU6IEVkaXRpbmdFdmVudCkgPT4gbWl4ZWQsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdoZW4gdGhlIHRleHQgaW5wdXQgc2VsZWN0aW9uIGlzIGNoYW5nZWQuXG4gICAqIFRoaXMgd2lsbCBiZSBjYWxsZWQgd2l0aFxuICAgKiBgeyBuYXRpdmVFdmVudDogeyBzZWxlY3Rpb246IHsgc3RhcnQsIGVuZCB9IH0gfWAuXG4gICAqL1xuICBvblNlbGVjdGlvbkNoYW5nZT86ID8oZTogU2VsZWN0aW9uQ2hhbmdlRXZlbnQpID0+IG1peGVkLFxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSB0ZXh0IGlucHV0J3Mgc3VibWl0IGJ1dHRvbiBpcyBwcmVzc2VkLlxuICAgKiBJbnZhbGlkIGlmIGBtdWx0aWxpbmU9e3RydWV9YCBpcyBzcGVjaWZpZWQuXG4gICAqL1xuICBvblN1Ym1pdEVkaXRpbmc/OiA/KGU6IEVkaXRpbmdFdmVudCkgPT4gbWl4ZWQsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdoZW4gYSBrZXkgaXMgcHJlc3NlZC5cbiAgICogVGhpcyB3aWxsIGJlIGNhbGxlZCB3aXRoIGB7IG5hdGl2ZUV2ZW50OiB7IGtleToga2V5VmFsdWUgfSB9YFxuICAgKiB3aGVyZSBga2V5VmFsdWVgIGlzIGAnRW50ZXInYCBvciBgJ0JhY2tzcGFjZSdgIGZvciByZXNwZWN0aXZlIGtleXMgYW5kXG4gICAqIHRoZSB0eXBlZC1pbiBjaGFyYWN0ZXIgb3RoZXJ3aXNlIGluY2x1ZGluZyBgJyAnYCBmb3Igc3BhY2UuXG4gICAqIEZpcmVzIGJlZm9yZSBgb25DaGFuZ2VgIGNhbGxiYWNrcy5cbiAgICovXG4gIG9uS2V5UHJlc3M/OiA/KGU6IEtleVByZXNzRXZlbnQpID0+IG1peGVkLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIG9uIGNvbnRlbnQgc2Nyb2xsIHdpdGggYHsgbmF0aXZlRXZlbnQ6IHsgY29udGVudE9mZnNldDogeyB4LCB5IH0gfSB9YC5cbiAgICogTWF5IGFsc28gY29udGFpbiBvdGhlciBwcm9wZXJ0aWVzIGZyb20gU2Nyb2xsRXZlbnQgYnV0IG9uIEFuZHJvaWQgY29udGVudFNpemVcbiAgICogaXMgbm90IHByb3ZpZGVkIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLlxuICAgKi9cbiAgb25TY3JvbGw/OiA/KGU6IFNjcm9sbEV2ZW50KSA9PiBtaXhlZCxcblxuICAvKipcbiAgICogVGhlIHN0cmluZyB0aGF0IHdpbGwgYmUgcmVuZGVyZWQgYmVmb3JlIHRleHQgaW5wdXQgaGFzIGJlZW4gZW50ZXJlZC5cbiAgICovXG4gIHBsYWNlaG9sZGVyPzogP1N0cmluZ2lzaCxcblxuICAvKipcbiAgICogVGhlIHRleHQgY29sb3Igb2YgdGhlIHBsYWNlaG9sZGVyIHN0cmluZy5cbiAgICovXG4gIHBsYWNlaG9sZGVyVGV4dENvbG9yPzogP0NvbG9yVmFsdWUsXG5cbiAgLyoqXG4gICAqIElmIGB0cnVlYCwgdGhlIHRleHQgaW5wdXQgb2JzY3VyZXMgdGhlIHRleHQgZW50ZXJlZCBzbyB0aGF0IHNlbnNpdGl2ZSB0ZXh0XG4gICAqIGxpa2UgcGFzc3dvcmRzIHN0YXkgc2VjdXJlLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgLiBEb2VzIG5vdCB3b3JrIHdpdGggJ211bHRpbGluZT17dHJ1ZX0nLlxuICAgKi9cbiAgc2VjdXJlVGV4dEVudHJ5PzogP2Jvb2xlYW4sXG5cbiAgLyoqXG4gICAqIFRoZSBoaWdobGlnaHQgYW5kIGN1cnNvciBjb2xvciBvZiB0aGUgdGV4dCBpbnB1dC5cbiAgICovXG4gIHNlbGVjdGlvbkNvbG9yPzogP0NvbG9yVmFsdWUsXG5cbiAgLyoqXG4gICAqIFRoZSBzdGFydCBhbmQgZW5kIG9mIHRoZSB0ZXh0IGlucHV0J3Mgc2VsZWN0aW9uLiBTZXQgc3RhcnQgYW5kIGVuZCB0b1xuICAgKiB0aGUgc2FtZSB2YWx1ZSB0byBwb3NpdGlvbiB0aGUgY3Vyc29yLlxuICAgKi9cbiAgc2VsZWN0aW9uPzogPyRSZWFkT25seTx7fFxuICAgIHN0YXJ0OiBudW1iZXIsXG4gICAgZW5kPzogP251bWJlcixcbiAgfH0+LFxuXG4gIC8qKlxuICAgKiBUaGUgdmFsdWUgdG8gc2hvdyBmb3IgdGhlIHRleHQgaW5wdXQuIGBUZXh0SW5wdXRgIGlzIGEgY29udHJvbGxlZFxuICAgKiBjb21wb25lbnQsIHdoaWNoIG1lYW5zIHRoZSBuYXRpdmUgdmFsdWUgd2lsbCBiZSBmb3JjZWQgdG8gbWF0Y2ggdGhpc1xuICAgKiB2YWx1ZSBwcm9wIGlmIHByb3ZpZGVkLiBGb3IgbW9zdCB1c2VzLCB0aGlzIHdvcmtzIGdyZWF0LCBidXQgaW4gc29tZVxuICAgKiBjYXNlcyB0aGlzIG1heSBjYXVzZSBmbGlja2VyaW5nIC0gb25lIGNvbW1vbiBjYXVzZSBpcyBwcmV2ZW50aW5nIGVkaXRzXG4gICAqIGJ5IGtlZXBpbmcgdmFsdWUgdGhlIHNhbWUuIEluIGFkZGl0aW9uIHRvIHNpbXBseSBzZXR0aW5nIHRoZSBzYW1lIHZhbHVlLFxuICAgKiBlaXRoZXIgc2V0IGBlZGl0YWJsZT17ZmFsc2V9YCwgb3Igc2V0L3VwZGF0ZSBgbWF4TGVuZ3RoYCB0byBwcmV2ZW50XG4gICAqIHVud2FudGVkIGVkaXRzIHdpdGhvdXQgZmxpY2tlci5cbiAgICovXG4gIHZhbHVlPzogP1N0cmluZ2lzaCxcblxuICAvKipcbiAgICogUHJvdmlkZXMgYW4gaW5pdGlhbCB2YWx1ZSB0aGF0IHdpbGwgY2hhbmdlIHdoZW4gdGhlIHVzZXIgc3RhcnRzIHR5cGluZy5cbiAgICogVXNlZnVsIGZvciBzaW1wbGUgdXNlLWNhc2VzIHdoZXJlIHlvdSBkbyBub3Qgd2FudCB0byBkZWFsIHdpdGggbGlzdGVuaW5nXG4gICAqIHRvIGV2ZW50cyBhbmQgdXBkYXRpbmcgdGhlIHZhbHVlIHByb3AgdG8ga2VlcCB0aGUgY29udHJvbGxlZCBzdGF0ZSBpbiBzeW5jLlxuICAgKi9cbiAgZGVmYXVsdFZhbHVlPzogP1N0cmluZ2lzaCxcblxuICAvKipcbiAgICogSWYgYHRydWVgLCBhbGwgdGV4dCB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgc2VsZWN0ZWQgb24gZm9jdXMuXG4gICAqL1xuICBzZWxlY3RUZXh0T25Gb2N1cz86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBJZiBgdHJ1ZWAsIHRoZSB0ZXh0IGZpZWxkIHdpbGwgYmx1ciB3aGVuIHN1Ym1pdHRlZC5cbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgdHJ1ZSBmb3Igc2luZ2xlLWxpbmUgZmllbGRzIGFuZCBmYWxzZSBmb3JcbiAgICogbXVsdGlsaW5lIGZpZWxkcy4gTm90ZSB0aGF0IGZvciBtdWx0aWxpbmUgZmllbGRzLCBzZXR0aW5nIGBibHVyT25TdWJtaXRgXG4gICAqIHRvIGB0cnVlYCBtZWFucyB0aGF0IHByZXNzaW5nIHJldHVybiB3aWxsIGJsdXIgdGhlIGZpZWxkIGFuZCB0cmlnZ2VyIHRoZVxuICAgKiBgb25TdWJtaXRFZGl0aW5nYCBldmVudCBpbnN0ZWFkIG9mIGluc2VydGluZyBhIG5ld2xpbmUgaW50byB0aGUgZmllbGQuXG4gICAqL1xuICBibHVyT25TdWJtaXQ/OiA/Ym9vbGVhbixcblxuICAvKipcbiAgICogTm90ZSB0aGF0IG5vdCBhbGwgVGV4dCBzdHlsZXMgYXJlIHN1cHBvcnRlZCwgYW4gaW5jb21wbGV0ZSBsaXN0IG9mIHdoYXQgaXMgbm90IHN1cHBvcnRlZCBpbmNsdWRlczpcbiAgICpcbiAgICogLSBgYm9yZGVyTGVmdFdpZHRoYFxuICAgKiAtIGBib3JkZXJUb3BXaWR0aGBcbiAgICogLSBgYm9yZGVyUmlnaHRXaWR0aGBcbiAgICogLSBgYm9yZGVyQm90dG9tV2lkdGhgXG4gICAqIC0gYGJvcmRlclRvcExlZnRSYWRpdXNgXG4gICAqIC0gYGJvcmRlclRvcFJpZ2h0UmFkaXVzYFxuICAgKiAtIGBib3JkZXJCb3R0b21SaWdodFJhZGl1c2BcbiAgICogLSBgYm9yZGVyQm90dG9tTGVmdFJhZGl1c2BcbiAgICpcbiAgICogc2VlIFtJc3N1ZSM3MDcwXShodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QtbmF0aXZlL2lzc3Vlcy83MDcwKVxuICAgKiBmb3IgbW9yZSBkZXRhaWwuXG4gICAqXG4gICAqIFtTdHlsZXNdKGRvY3Mvc3R5bGUuaHRtbClcbiAgICovXG4gIHN0eWxlPzogP1RleHRTdHlsZVByb3AsXG5cbiAgLyoqXG4gICAqIElmIGB0cnVlYCwgY2FyZXQgaXMgaGlkZGVuLiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBgZmFsc2VgLlxuICAgKiBUaGlzIHByb3BlcnR5IGlzIHN1cHBvcnRlZCBvbmx5IGZvciBzaW5nbGUtbGluZSBUZXh0SW5wdXQgY29tcG9uZW50IG9uIGlPUy5cbiAgICovXG4gIGNhcmV0SGlkZGVuPzogP2Jvb2xlYW4sXG5cbiAgLypcbiAgICogSWYgYHRydWVgLCBjb250ZXh0TWVudUhpZGRlbiBpcyBoaWRkZW4uIFRoZSBkZWZhdWx0IHZhbHVlIGlzIGBmYWxzZWAuXG4gICAqL1xuICBjb250ZXh0TWVudUhpZGRlbj86ID9ib29sZWFuLFxuXG4gIGZvcndhcmRlZFJlZj86ID9SZWFjdFJlZlNldHRlcjxcbiAgICBSZWFjdC5FbGVtZW50UmVmPEhvc3RDb21wb25lbnQ8bWl4ZWQ+PiAmIEltcGVyYXRpdmVNZXRob2RzLFxuICA+LFxufH0+O1xuXG50eXBlIEltcGVyYXRpdmVNZXRob2RzID0gJFJlYWRPbmx5PHt8XG4gIGNsZWFyOiAoKSA9PiB2b2lkLFxuICBpc0ZvY3VzZWQ6ICgpID0+IGJvb2xlYW4sXG4gIGdldE5hdGl2ZVJlZjogKCkgPT4gP1JlYWN0LkVsZW1lbnRSZWY8SG9zdENvbXBvbmVudDxtaXhlZD4+LFxufH0+O1xuXG5jb25zdCBlbXB0eUZ1bmN0aW9uVGhhdFJldHVybnNUcnVlID0gKCkgPT4gdHJ1ZTtcblxuLyoqXG4gKiBBIGZvdW5kYXRpb25hbCBjb21wb25lbnQgZm9yIGlucHV0dGluZyB0ZXh0IGludG8gdGhlIGFwcCB2aWEgYVxuICoga2V5Ym9hcmQuIFByb3BzIHByb3ZpZGUgY29uZmlndXJhYmlsaXR5IGZvciBzZXZlcmFsIGZlYXR1cmVzLCBzdWNoIGFzXG4gKiBhdXRvLWNvcnJlY3Rpb24sIGF1dG8tY2FwaXRhbGl6YXRpb24sIHBsYWNlaG9sZGVyIHRleHQsIGFuZCBkaWZmZXJlbnQga2V5Ym9hcmRcbiAqIHR5cGVzLCBzdWNoIGFzIGEgbnVtZXJpYyBrZXlwYWQuXG4gKlxuICogVGhlIHNpbXBsZXN0IHVzZSBjYXNlIGlzIHRvIHBsb3AgZG93biBhIGBUZXh0SW5wdXRgIGFuZCBzdWJzY3JpYmUgdG8gdGhlXG4gKiBgb25DaGFuZ2VUZXh0YCBldmVudHMgdG8gcmVhZCB0aGUgdXNlciBpbnB1dC4gVGhlcmUgYXJlIGFsc28gb3RoZXIgZXZlbnRzLFxuICogc3VjaCBhcyBgb25TdWJtaXRFZGl0aW5nYCBhbmQgYG9uRm9jdXNgIHRoYXQgY2FuIGJlIHN1YnNjcmliZWQgdG8uIEEgc2ltcGxlXG4gKiBleGFtcGxlOlxuICpcbiAqIGBgYFJlYWN0TmF0aXZlV2ViUGxheWVyXG4gKiBpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuICogaW1wb3J0IHsgQXBwUmVnaXN0cnksIFRleHRJbnB1dCB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlbGVzc1RleHRJbnB1dCBleHRlbmRzIENvbXBvbmVudCB7XG4gKiAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gKiAgICAgc3VwZXIocHJvcHMpO1xuICogICAgIHRoaXMuc3RhdGUgPSB7IHRleHQ6ICdVc2VsZXNzIFBsYWNlaG9sZGVyJyB9O1xuICogICB9XG4gKlxuICogICByZW5kZXIoKSB7XG4gKiAgICAgcmV0dXJuIChcbiAqICAgICAgIDxUZXh0SW5wdXRcbiAqICAgICAgICAgc3R5bGU9e3toZWlnaHQ6IDQwLCBib3JkZXJDb2xvcjogJ2dyYXknLCBib3JkZXJXaWR0aDogMX19XG4gKiAgICAgICAgIG9uQ2hhbmdlVGV4dD17KHRleHQpID0+IHRoaXMuc2V0U3RhdGUoe3RleHR9KX1cbiAqICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudGV4dH1cbiAqICAgICAgIC8+XG4gKiAgICAgKTtcbiAqICAgfVxuICogfVxuICpcbiAqIC8vIHNraXAgdGhpcyBsaW5lIGlmIHVzaW5nIENyZWF0ZSBSZWFjdCBOYXRpdmUgQXBwXG4gKiBBcHBSZWdpc3RyeS5yZWdpc3RlckNvbXBvbmVudCgnQXdlc29tZVByb2plY3QnLCAoKSA9PiBVc2VsZXNzVGV4dElucHV0KTtcbiAqIGBgYFxuICpcbiAqIFR3byBtZXRob2RzIGV4cG9zZWQgdmlhIHRoZSBuYXRpdmUgZWxlbWVudCBhcmUgLmZvY3VzKCkgYW5kIC5ibHVyKCkgdGhhdFxuICogd2lsbCBmb2N1cyBvciBibHVyIHRoZSBUZXh0SW5wdXQgcHJvZ3JhbW1hdGljYWxseS5cbiAqXG4gKiBOb3RlIHRoYXQgc29tZSBwcm9wcyBhcmUgb25seSBhdmFpbGFibGUgd2l0aCBgbXVsdGlsaW5lPXt0cnVlL2ZhbHNlfWAuXG4gKiBBZGRpdGlvbmFsbHksIGJvcmRlciBzdHlsZXMgdGhhdCBhcHBseSB0byBvbmx5IG9uZSBzaWRlIG9mIHRoZSBlbGVtZW50XG4gKiAoZS5nLiwgYGJvcmRlckJvdHRvbUNvbG9yYCwgYGJvcmRlckxlZnRXaWR0aGAsIGV0Yy4pIHdpbGwgbm90IGJlIGFwcGxpZWQgaWZcbiAqIGBtdWx0aWxpbmU9ZmFsc2VgLiBUbyBhY2hpZXZlIHRoZSBzYW1lIGVmZmVjdCwgeW91IGNhbiB3cmFwIHlvdXIgYFRleHRJbnB1dGBcbiAqIGluIGEgYFZpZXdgOlxuICpcbiAqIGBgYFJlYWN0TmF0aXZlV2ViUGxheWVyXG4gKiBpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuICogaW1wb3J0IHsgQXBwUmVnaXN0cnksIFZpZXcsIFRleHRJbnB1dCB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG4gKlxuICogY2xhc3MgVXNlbGVzc1RleHRJbnB1dCBleHRlbmRzIENvbXBvbmVudCB7XG4gKiAgIHJlbmRlcigpIHtcbiAqICAgICByZXR1cm4gKFxuICogICAgICAgPFRleHRJbnB1dFxuICogICAgICAgICB7Li4udGhpcy5wcm9wc30gLy8gSW5oZXJpdCBhbnkgcHJvcHMgcGFzc2VkIHRvIGl0OyBlLmcuLCBtdWx0aWxpbmUsIG51bWJlck9mTGluZXMgYmVsb3dcbiAqICAgICAgICAgZWRpdGFibGUgPSB7dHJ1ZX1cbiAqICAgICAgICAgbWF4TGVuZ3RoID0gezQwfVxuICogICAgICAgLz5cbiAqICAgICApO1xuICogICB9XG4gKiB9XG4gKlxuICogZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlbGVzc1RleHRJbnB1dE11bHRpbGluZSBleHRlbmRzIENvbXBvbmVudCB7XG4gKiAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gKiAgICAgc3VwZXIocHJvcHMpO1xuICogICAgIHRoaXMuc3RhdGUgPSB7XG4gKiAgICAgICB0ZXh0OiAnVXNlbGVzcyBNdWx0aWxpbmUgUGxhY2Vob2xkZXInLFxuICogICAgIH07XG4gKiAgIH1cbiAqXG4gKiAgIC8vIElmIHlvdSB0eXBlIHNvbWV0aGluZyBpbiB0aGUgdGV4dCBib3ggdGhhdCBpcyBhIGNvbG9yLCB0aGUgYmFja2dyb3VuZCB3aWxsIGNoYW5nZSB0byB0aGF0XG4gKiAgIC8vIGNvbG9yLlxuICogICByZW5kZXIoKSB7XG4gKiAgICAgcmV0dXJuIChcbiAqICAgICAgPFZpZXcgc3R5bGU9e3tcbiAqICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMuc3RhdGUudGV4dCxcbiAqICAgICAgICBib3JkZXJCb3R0b21Db2xvcjogJyMwMDAwMDAnLFxuICogICAgICAgIGJvcmRlckJvdHRvbVdpZHRoOiAxIH19XG4gKiAgICAgID5cbiAqICAgICAgICA8VXNlbGVzc1RleHRJbnB1dFxuICogICAgICAgICAgbXVsdGlsaW5lID0ge3RydWV9XG4gKiAgICAgICAgICBudW1iZXJPZkxpbmVzID0gezR9XG4gKiAgICAgICAgICBvbkNoYW5nZVRleHQ9eyh0ZXh0KSA9PiB0aGlzLnNldFN0YXRlKHt0ZXh0fSl9XG4gKiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS50ZXh0fVxuICogICAgICAgIC8+XG4gKiAgICAgIDwvVmlldz5cbiAqICAgICApO1xuICogICB9XG4gKiB9XG4gKlxuICogLy8gc2tpcCB0aGVzZSBsaW5lcyBpZiB1c2luZyBDcmVhdGUgUmVhY3QgTmF0aXZlIEFwcFxuICogQXBwUmVnaXN0cnkucmVnaXN0ZXJDb21wb25lbnQoXG4gKiAgJ0F3ZXNvbWVQcm9qZWN0JyxcbiAqICAoKSA9PiBVc2VsZXNzVGV4dElucHV0TXVsdGlsaW5lXG4gKiApO1xuICogYGBgXG4gKlxuICogYFRleHRJbnB1dGAgaGFzIGJ5IGRlZmF1bHQgYSBib3JkZXIgYXQgdGhlIGJvdHRvbSBvZiBpdHMgdmlldy4gVGhpcyBib3JkZXJcbiAqIGhhcyBpdHMgcGFkZGluZyBzZXQgYnkgdGhlIGJhY2tncm91bmQgaW1hZ2UgcHJvdmlkZWQgYnkgdGhlIHN5c3RlbSwgYW5kIGl0XG4gKiBjYW5ub3QgYmUgY2hhbmdlZC4gU29sdXRpb25zIHRvIGF2b2lkIHRoaXMgaXMgdG8gZWl0aGVyIG5vdCBzZXQgaGVpZ2h0XG4gKiBleHBsaWNpdGx5LCBjYXNlIGluIHdoaWNoIHRoZSBzeXN0ZW0gd2lsbCB0YWtlIGNhcmUgb2YgZGlzcGxheWluZyB0aGUgYm9yZGVyXG4gKiBpbiB0aGUgY29ycmVjdCBwb3NpdGlvbiwgb3IgdG8gbm90IGRpc3BsYXkgdGhlIGJvcmRlciBieSBzZXR0aW5nXG4gKiBgdW5kZXJsaW5lQ29sb3JBbmRyb2lkYCB0byB0cmFuc3BhcmVudC5cbiAqXG4gKiBOb3RlIHRoYXQgb24gQW5kcm9pZCBwZXJmb3JtaW5nIHRleHQgc2VsZWN0aW9uIGluIGlucHV0IGNhbiBjaGFuZ2VcbiAqIGFwcCdzIGFjdGl2aXR5IGB3aW5kb3dTb2Z0SW5wdXRNb2RlYCBwYXJhbSB0byBgYWRqdXN0UmVzaXplYC5cbiAqIFRoaXMgbWF5IGNhdXNlIGlzc3VlcyB3aXRoIGNvbXBvbmVudHMgdGhhdCBoYXZlIHBvc2l0aW9uOiAnYWJzb2x1dGUnXG4gKiB3aGlsZSBrZXlib2FyZCBpcyBhY3RpdmUuIFRvIGF2b2lkIHRoaXMgYmVoYXZpb3IgZWl0aGVyIHNwZWNpZnkgYHdpbmRvd1NvZnRJbnB1dE1vZGVgXG4gKiBpbiBBbmRyb2lkTWFuaWZlc3QueG1sICggaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vZ3VpZGUvdG9waWNzL21hbmlmZXN0L2FjdGl2aXR5LWVsZW1lbnQuaHRtbCApXG4gKiBvciBjb250cm9sIHRoaXMgcGFyYW0gcHJvZ3JhbW1hdGljYWxseSB3aXRoIG5hdGl2ZSBjb2RlLlxuICpcbiAqL1xuZnVuY3Rpb24gSW50ZXJuYWxUZXh0SW5wdXQocHJvcHM6IFByb3BzKTogUmVhY3QuTm9kZSB7XG4gIGNvbnN0IGlucHV0UmVmID0gdXNlUmVmPG51bGwgfCBSZWFjdC5FbGVtZW50UmVmPEhvc3RDb21wb25lbnQ8bWl4ZWQ+Pj4obnVsbCk7XG5cbiAgLy8gQW5kcm9pZCBzZW5kcyBhIFwib25UZXh0Q2hhbmdlZFwiIGV2ZW50IGZvbGxvd2VkIGJ5IGEgXCJvblNlbGVjdGlvbkNoYW5nZWRcIiBldmVudCwgZm9yXG4gIC8vIHRoZSBzYW1lIFwibW9zdCByZWNlbnQgZXZlbnQgY291bnRcIi5cbiAgLy8gRm9yIGNvbnRyb2xsZWQgc2VsZWN0aW9uLCB0aGF0IG1lYW5zIHRoYXQgaW1tZWRpYXRlbHkgYWZ0ZXIgdGV4dCBpcyB1cGRhdGVkLFxuICAvLyBhIGNvbnRyb2xsZWQgY29tcG9uZW50IHdpbGwgcGFzcyBpbiB0aGUgKnByZXZpb3VzKiBzZWxlY3Rpb24sIGV2ZW4gaWYgdGhlIGNvbnRyb2xsZWRcbiAgLy8gY29tcG9uZW50IGRpZG4ndCBtZWFuIHRvIG1vZGlmeSB0aGUgc2VsZWN0aW9uIGF0IGFsbC5cbiAgLy8gVGhlcmVmb3JlLCB3ZSBpZ25vcmUgc2VsZWN0aW9ucyBhbmQgcGFzcyB0aGVtIHRocm91Z2ggdW50aWwgdGhlIHNlbGVjdGlvbiBldmVudCBoYXNcbiAgLy8gYmVlbiBzZW50LlxuICAvLyBOb3RlIHRoYXQgdGhpcyBtaXRpZ2F0aW9uIGlzIE5PVCBuZWVkZWQgZm9yIEZhYnJpYy5cbiAgbGV0IHNlbGVjdGlvbjogP1NlbGVjdGlvbiA9XG4gICAgcHJvcHMuc2VsZWN0aW9uID09IG51bGxcbiAgICAgID8gbnVsbFxuICAgICAgOiB7XG4gICAgICAgICAgc3RhcnQ6IHByb3BzLnNlbGVjdGlvbi5zdGFydCxcbiAgICAgICAgICBlbmQ6IHByb3BzLnNlbGVjdGlvbi5lbmQgPz8gcHJvcHMuc2VsZWN0aW9uLnN0YXJ0LFxuICAgICAgICB9O1xuXG4gIGNvbnN0IFttb3N0UmVjZW50RXZlbnRDb3VudCwgc2V0TW9zdFJlY2VudEV2ZW50Q291bnRdID0gdXNlU3RhdGU8bnVtYmVyPigwKTtcblxuICBjb25zdCBbbGFzdE5hdGl2ZVRleHQsIHNldExhc3ROYXRpdmVUZXh0XSA9IHVzZVN0YXRlPD9TdHJpbmdpc2g+KHByb3BzLnZhbHVlKTtcbiAgY29uc3QgW2xhc3ROYXRpdmVTZWxlY3Rpb25TdGF0ZSwgc2V0TGFzdE5hdGl2ZVNlbGVjdGlvbl0gPSB1c2VTdGF0ZTx7fFxuICAgIHNlbGVjdGlvbjogP1NlbGVjdGlvbixcbiAgICBtb3N0UmVjZW50RXZlbnRDb3VudDogbnVtYmVyLFxuICB8fT4oe3NlbGVjdGlvbiwgbW9zdFJlY2VudEV2ZW50Q291bnR9KTtcblxuICBjb25zdCBsYXN0TmF0aXZlU2VsZWN0aW9uID0gbGFzdE5hdGl2ZVNlbGVjdGlvblN0YXRlLnNlbGVjdGlvbjtcbiAgY29uc3QgbGFzdE5hdGl2ZVNlbGVjdGlvbkV2ZW50Q291bnQgPVxuICAgIGxhc3ROYXRpdmVTZWxlY3Rpb25TdGF0ZS5tb3N0UmVjZW50RXZlbnRDb3VudDtcblxuICBpZiAobGFzdE5hdGl2ZVNlbGVjdGlvbkV2ZW50Q291bnQgPCBtb3N0UmVjZW50RXZlbnRDb3VudCkge1xuICAgIHNlbGVjdGlvbiA9IG51bGw7XG4gIH1cblxuICBsZXQgdmlld0NvbW1hbmRzOiBUZXh0SW5wdXROYXRpdmVDb21tYW5kczxIb3N0Q29tcG9uZW50PGFueT4+O1xuICBpZiAoQW5kcm9pZFRleHRJbnB1dENvbW1hbmRzKSB7XG4gICAgdmlld0NvbW1hbmRzID0gQW5kcm9pZFRleHRJbnB1dENvbW1hbmRzO1xuICB9IGVsc2Uge1xuICAgIHZpZXdDb21tYW5kcyA9IHByb3BzLm11bHRpbGluZVxuICAgICAgPyBSQ1RNdWx0aWxpbmVUZXh0SW5wdXROYXRpdmVDb21tYW5kc1xuICAgICAgOiBSQ1RTaW5nbGVsaW5lVGV4dElucHV0TmF0aXZlQ29tbWFuZHM7XG4gIH1cblxuICBjb25zdCB0ZXh0ID1cbiAgICB0eXBlb2YgcHJvcHMudmFsdWUgPT09ICdzdHJpbmcnXG4gICAgICA/IHByb3BzLnZhbHVlXG4gICAgICA6IHR5cGVvZiBwcm9wcy5kZWZhdWx0VmFsdWUgPT09ICdzdHJpbmcnXG4gICAgICA/IHByb3BzLmRlZmF1bHRWYWx1ZVxuICAgICAgOiAnJztcblxuICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSBpbiBjYXNlIG5hdGl2ZSB1cGRhdGVzIHRoZSB0ZXh0IGFuZCBKUyBkZWNpZGVzXG4gIC8vIHRoYXQgdGhlIHVwZGF0ZSBzaG91bGQgYmUgaWdub3JlZCBhbmQgd2Ugc2hvdWxkIHN0aWNrIHdpdGggdGhlIHZhbHVlXG4gIC8vIHRoYXQgd2UgaGF2ZSBpbiBKUy5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBuYXRpdmVVcGRhdGUgPSB7fTtcblxuICAgIGlmIChsYXN0TmF0aXZlVGV4dCAhPT0gcHJvcHMudmFsdWUgJiYgdHlwZW9mIHByb3BzLnZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgbmF0aXZlVXBkYXRlLnRleHQgPSBwcm9wcy52YWx1ZTtcbiAgICAgIHNldExhc3ROYXRpdmVUZXh0KHByb3BzLnZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBzZWxlY3Rpb24gJiZcbiAgICAgIGxhc3ROYXRpdmVTZWxlY3Rpb24gJiZcbiAgICAgIChsYXN0TmF0aXZlU2VsZWN0aW9uLnN0YXJ0ICE9PSBzZWxlY3Rpb24uc3RhcnQgfHxcbiAgICAgICAgbGFzdE5hdGl2ZVNlbGVjdGlvbi5lbmQgIT09IHNlbGVjdGlvbi5lbmQpXG4gICAgKSB7XG4gICAgICBuYXRpdmVVcGRhdGUuc2VsZWN0aW9uID0gc2VsZWN0aW9uO1xuICAgICAgc2V0TGFzdE5hdGl2ZVNlbGVjdGlvbih7c2VsZWN0aW9uLCBtb3N0UmVjZW50RXZlbnRDb3VudH0pO1xuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyhuYXRpdmVVcGRhdGUpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpbnB1dFJlZi5jdXJyZW50ICE9IG51bGwpIHtcbiAgICAgIHZpZXdDb21tYW5kcy5zZXRUZXh0QW5kU2VsZWN0aW9uKFxuICAgICAgICBpbnB1dFJlZi5jdXJyZW50LFxuICAgICAgICBtb3N0UmVjZW50RXZlbnRDb3VudCxcbiAgICAgICAgdGV4dCxcbiAgICAgICAgc2VsZWN0aW9uPy5zdGFydCA/PyAtMSxcbiAgICAgICAgc2VsZWN0aW9uPy5lbmQgPz8gLTEsXG4gICAgICApO1xuICAgIH1cbiAgfSwgW1xuICAgIG1vc3RSZWNlbnRFdmVudENvdW50LFxuICAgIGlucHV0UmVmLFxuICAgIHByb3BzLnZhbHVlLFxuICAgIHByb3BzLmRlZmF1bHRWYWx1ZSxcbiAgICBsYXN0TmF0aXZlVGV4dCxcbiAgICBzZWxlY3Rpb24sXG4gICAgbGFzdE5hdGl2ZVNlbGVjdGlvbixcbiAgICB0ZXh0LFxuICAgIHZpZXdDb21tYW5kcyxcbiAgXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBpbnB1dFJlZlZhbHVlID0gaW5wdXRSZWYuY3VycmVudDtcblxuICAgIGlmIChpbnB1dFJlZlZhbHVlICE9IG51bGwpIHtcbiAgICAgIFRleHRJbnB1dFN0YXRlLnJlZ2lzdGVySW5wdXQoaW5wdXRSZWZWYWx1ZSk7XG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIFRleHRJbnB1dFN0YXRlLnVucmVnaXN0ZXJJbnB1dChpbnB1dFJlZlZhbHVlKTtcbiAgICAgIH07XG4gICAgfVxuICB9LCBbaW5wdXRSZWZdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFdoZW4gdW5tb3VudGluZyB3ZSBuZWVkIHRvIGJsdXIgdGhlIGlucHV0XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChpc0ZvY3VzZWQoKSkge1xuICAgICAgICBudWxsdGhyb3dzKGlucHV0UmVmLmN1cnJlbnQpLmJsdXIoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbaW5wdXRSZWZdKTtcblxuICBmdW5jdGlvbiBjbGVhcigpOiB2b2lkIHtcbiAgICBpZiAoaW5wdXRSZWYuY3VycmVudCAhPSBudWxsKSB7XG4gICAgICB2aWV3Q29tbWFuZHMuc2V0VGV4dEFuZFNlbGVjdGlvbihcbiAgICAgICAgaW5wdXRSZWYuY3VycmVudCxcbiAgICAgICAgbW9zdFJlY2VudEV2ZW50Q291bnQsXG4gICAgICAgICcnLFxuICAgICAgICAwLFxuICAgICAgICAwLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvLyBUT0RPOiBGaXggdGhpcyByZXR1cm5pbmcgdHJ1ZSBvbiBudWxsID09PSBudWxsLCB3aGVuIG5vIGlucHV0IGlzIGZvY3VzZWRcbiAgZnVuY3Rpb24gaXNGb2N1c2VkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBUZXh0SW5wdXRTdGF0ZS5jdXJyZW50bHlGb2N1c2VkSW5wdXQoKSA9PT0gaW5wdXRSZWYuY3VycmVudDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldE5hdGl2ZVJlZigpOiA/UmVhY3QuRWxlbWVudFJlZjxIb3N0Q29tcG9uZW50PG1peGVkPj4ge1xuICAgIHJldHVybiBpbnB1dFJlZi5jdXJyZW50O1xuICB9XG5cbiAgY29uc3QgX3NldE5hdGl2ZVJlZiA9IHNldEFuZEZvcndhcmRSZWYoe1xuICAgIGdldEZvcndhcmRlZFJlZjogKCkgPT4gcHJvcHMuZm9yd2FyZGVkUmVmLFxuICAgIHNldExvY2FsUmVmOiByZWYgPT4ge1xuICAgICAgaW5wdXRSZWYuY3VycmVudCA9IHJlZjtcblxuICAgICAgLypcbiAgICAgICAgSGkgcmVhZGVyIGZyb20gdGhlIGZ1dHVyZS4gSSdtIHNvcnJ5IGZvciB0aGlzLlxuXG4gICAgICAgIFRoaXMgaXMgYSBoYWNrLiBJZGVhbGx5IHdlIHdvdWxkIGZvcndhcmRSZWYgdG8gdGhlIHVuZGVybHlpbmdcbiAgICAgICAgaG9zdCBjb21wb25lbnQuIEhvd2V2ZXIsIHNpbmNlIFRleHRJbnB1dCBoYXMgaXQncyBvd24gbWV0aG9kcyB0aGF0IGNhbiBiZVxuICAgICAgICBjYWxsZWQgYXMgd2VsbCwgaWYgd2UgdXNlZCB0aGUgc3RhbmRhcmQgZm9yd2FyZFJlZiB0aGVuIHRoZXNlXG4gICAgICAgIG1ldGhvZHMgd291bGRuJ3QgYmUgYWNjZXNzaWJsZSBhbmQgdGh1cyBiZSBhIGJyZWFraW5nIGNoYW5nZS5cblxuICAgICAgICBXZSBoYXZlIGEgY291cGxlIG9mIG9wdGlvbnMgb2YgaG93IHRvIGhhbmRsZSB0aGlzOlxuICAgICAgICAtIFJldHVybiBhIG5ldyByZWYgd2l0aCBldmVyeXRoaW5nIHdlIG1ldGhvZHMgZnJvbSBib3RoLiBUaGlzIGlzIHByb2JsZW1hdGljXG4gICAgICAgICAgYmVjYXVzZSB3ZSBuZWVkIFJlYWN0IHRvIGFsc28ga25vdyBpdCBpcyBhIGhvc3QgY29tcG9uZW50IHdoaWNoIHJlcXVpcmVzXG4gICAgICAgICAgaW50ZXJuYWxzIG9mIHRoZSBjbGFzcyBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgcmVmLlxuICAgICAgICAtIEJyZWFrIHRoZSBBUEkgYW5kIGhhdmUgc29tZSBvdGhlciB3YXkgdG8gY2FsbCBvbmUgc2V0IG9mIHRoZSBtZXRob2RzIG9yXG4gICAgICAgICAgdGhlIG90aGVyLiBUaGlzIGlzIG91ciBsb25nIHRlcm0gYXBwcm9hY2ggYXMgd2Ugd2FudCB0byBldmVudHVhbGx5XG4gICAgICAgICAgZ2V0IHRoZSBtZXRob2RzIG9uIGhvc3QgY29tcG9uZW50cyBvZmYgdGhlIHJlZi4gU28gaW5zdGVhZCBvZiBjYWxsaW5nXG4gICAgICAgICAgcmVmLm1lYXN1cmUoKSB5b3UgbWlnaHQgY2FsbCBSZWFjdE5hdGl2ZS5tZWFzdXJlKHJlZikuIFRoaXMgd291bGQgaG9wZWZ1bGx5XG4gICAgICAgICAgbGV0IHRoZSByZWYgZm9yIFRleHRJbnB1dCB0aGVuIGhhdmUgdGhlIG1ldGhvZHMgbGlrZSBgLmNsZWFyYC4gT3Igd2UgZG8gaXRcbiAgICAgICAgICB0aGUgb3RoZXIgd2F5IGFuZCBtYWtlIGl0IFRleHRJbnB1dC5jbGVhcih0ZXh0SW5wdXRSZWYpIHdoaWNoIHdvdWxkIGJlIGZpbmVcbiAgICAgICAgICB0b28uIEVpdGhlciB3YXkgdGhvdWdoIGlzIGEgYnJlYWtpbmcgY2hhbmdlIHRoYXQgaXMgbG9uZ2VyIHRlcm0uXG4gICAgICAgIC0gTXV0YXRlIHRoaXMgcmVmLiA6KCBHcm9zcywgYnV0IGFjY29tcGxpc2hlcyB3aGF0IHdlIG5lZWQgaW4gdGhlIG1lYW50aW1lXG4gICAgICAgICAgYmVmb3JlIHdlIGNhbiBnZXQgdG8gdGhlIGxvbmcgdGVybSBicmVha2luZyBjaGFuZ2UuXG4gICAgICAgICovXG4gICAgICBpZiAocmVmKSB7XG4gICAgICAgIHJlZi5jbGVhciA9IGNsZWFyO1xuICAgICAgICByZWYuaXNGb2N1c2VkID0gaXNGb2N1c2VkO1xuICAgICAgICByZWYuZ2V0TmF0aXZlUmVmID0gZ2V0TmF0aXZlUmVmO1xuICAgICAgfVxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IF9vblByZXNzID0gKGV2ZW50OiBQcmVzc0V2ZW50KSA9PiB7XG4gICAgaWYgKHByb3BzLmVkaXRhYmxlIHx8IHByb3BzLmVkaXRhYmxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIG51bGx0aHJvd3MoaW5wdXRSZWYuY3VycmVudCkuZm9jdXMoKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgX29uQ2hhbmdlID0gKGV2ZW50OiBDaGFuZ2VFdmVudCkgPT4ge1xuICAgIGNvbnN0IHRleHQgPSBldmVudC5uYXRpdmVFdmVudC50ZXh0O1xuICAgIHByb3BzLm9uQ2hhbmdlICYmIHByb3BzLm9uQ2hhbmdlKGV2ZW50KTtcbiAgICBwcm9wcy5vbkNoYW5nZVRleHQgJiYgcHJvcHMub25DaGFuZ2VUZXh0KHRleHQpO1xuXG4gICAgaWYgKGlucHV0UmVmLmN1cnJlbnQgPT0gbnVsbCkge1xuICAgICAgLy8gY2FsbGluZyBgcHJvcHMub25DaGFuZ2VgIG9yIGBwcm9wcy5vbkNoYW5nZVRleHRgXG4gICAgICAvLyBtYXkgY2xlYW4gdXAgdGhlIGlucHV0IGl0c2VsZi4gRXhpdHMgaGVyZS5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZXRMYXN0TmF0aXZlVGV4dCh0ZXh0KTtcbiAgICAvLyBUaGlzIG11c3QgaGFwcGVuIGxhc3QsIGFmdGVyIHdlIGNhbGwgc2V0TGFzdE5hdGl2ZVRleHQuXG4gICAgLy8gRGlmZmVyZW50IG9yZGVyaW5nIGNhbiBjYXVzZSBidWdzIHdoZW4gZWRpdGluZyBBbmRyb2lkVGV4dElucHV0c1xuICAgIC8vIHdpdGggbXVsdGlwbGUgRnJhZ21lbnRzLlxuICAgIC8vIFdlIG11c3QgdXBkYXRlIHRoaXMgc28gdGhhdCBjb250cm9sbGVkIGlucHV0IHVwZGF0ZXMgd29yay5cbiAgICBzZXRNb3N0UmVjZW50RXZlbnRDb3VudChldmVudC5uYXRpdmVFdmVudC5ldmVudENvdW50KTtcbiAgfTtcblxuICBjb25zdCBfb25TZWxlY3Rpb25DaGFuZ2UgPSAoZXZlbnQ6IFNlbGVjdGlvbkNoYW5nZUV2ZW50KSA9PiB7XG4gICAgcHJvcHMub25TZWxlY3Rpb25DaGFuZ2UgJiYgcHJvcHMub25TZWxlY3Rpb25DaGFuZ2UoZXZlbnQpO1xuXG4gICAgaWYgKGlucHV0UmVmLmN1cnJlbnQgPT0gbnVsbCkge1xuICAgICAgLy8gY2FsbGluZyBgcHJvcHMub25TZWxlY3Rpb25DaGFuZ2VgXG4gICAgICAvLyBtYXkgY2xlYW4gdXAgdGhlIGlucHV0IGl0c2VsZi4gRXhpdHMgaGVyZS5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzZXRMYXN0TmF0aXZlU2VsZWN0aW9uKHtcbiAgICAgIHNlbGVjdGlvbjogZXZlbnQubmF0aXZlRXZlbnQuc2VsZWN0aW9uLFxuICAgICAgbW9zdFJlY2VudEV2ZW50Q291bnQsXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgX29uRm9jdXMgPSAoZXZlbnQ6IEZvY3VzRXZlbnQpID0+IHtcbiAgICBUZXh0SW5wdXRTdGF0ZS5mb2N1c0lucHV0KGlucHV0UmVmLmN1cnJlbnQpO1xuICAgIGlmIChwcm9wcy5vbkZvY3VzKSB7XG4gICAgICBwcm9wcy5vbkZvY3VzKGV2ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgX29uQmx1ciA9IChldmVudDogQmx1ckV2ZW50KSA9PiB7XG4gICAgVGV4dElucHV0U3RhdGUuYmx1cklucHV0KGlucHV0UmVmLmN1cnJlbnQpO1xuICAgIGlmIChwcm9wcy5vbkJsdXIpIHtcbiAgICAgIHByb3BzLm9uQmx1cihldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IF9vblNjcm9sbCA9IChldmVudDogU2Nyb2xsRXZlbnQpID0+IHtcbiAgICBwcm9wcy5vblNjcm9sbCAmJiBwcm9wcy5vblNjcm9sbChldmVudCk7XG4gIH07XG5cbiAgbGV0IHRleHRJbnB1dCA9IG51bGw7XG4gIGxldCBhZGRpdGlvbmFsVG91Y2hhYmxlUHJvcHM6IHt8XG4gICAgcmVqZWN0UmVzcG9uZGVyVGVybWluYXRpb24/OiAkUHJvcGVydHlUeXBlPFxuICAgICAgUHJvcHMsXG4gICAgICAncmVqZWN0UmVzcG9uZGVyVGVybWluYXRpb24nLFxuICAgID4sXG4gICAgLy8gVGhpcyBpcyBhIGhhY2sgdG8gbGV0IEZsb3cga25vdyB3ZSB3YW50IGFuIGV4YWN0IG9iamVjdFxuICB8fSA9IHsuLi5udWxsfTtcblxuICBpZiAoUGxhdGZvcm0uT1MgPT09ICdpb3MnKSB7XG4gICAgY29uc3QgUkNUVGV4dElucHV0VmlldyA9IHByb3BzLm11bHRpbGluZVxuICAgICAgPyBSQ1RNdWx0aWxpbmVUZXh0SW5wdXRWaWV3XG4gICAgICA6IFJDVFNpbmdsZWxpbmVUZXh0SW5wdXRWaWV3O1xuXG4gICAgY29uc3Qgc3R5bGUgPSBwcm9wcy5tdWx0aWxpbmVcbiAgICAgID8gW3N0eWxlcy5tdWx0aWxpbmVJbnB1dCwgcHJvcHMuc3R5bGVdXG4gICAgICA6IHByb3BzLnN0eWxlO1xuXG4gICAgYWRkaXRpb25hbFRvdWNoYWJsZVByb3BzLnJlamVjdFJlc3BvbmRlclRlcm1pbmF0aW9uID1cbiAgICAgIHByb3BzLnJlamVjdFJlc3BvbmRlclRlcm1pbmF0aW9uO1xuXG4gICAgdGV4dElucHV0ID0gKFxuICAgICAgPFJDVFRleHRJbnB1dFZpZXdcbiAgICAgICAgcmVmPXtfc2V0TmF0aXZlUmVmfVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgIGRhdGFEZXRlY3RvclR5cGVzPXtwcm9wcy5kYXRhRGV0ZWN0b3JUeXBlc31cbiAgICAgICAgbW9zdFJlY2VudEV2ZW50Q291bnQ9e21vc3RSZWNlbnRFdmVudENvdW50fVxuICAgICAgICBvbkJsdXI9e19vbkJsdXJ9XG4gICAgICAgIG9uQ2hhbmdlPXtfb25DaGFuZ2V9XG4gICAgICAgIG9uQ29udGVudFNpemVDaGFuZ2U9e3Byb3BzLm9uQ29udGVudFNpemVDaGFuZ2V9XG4gICAgICAgIG9uRm9jdXM9e19vbkZvY3VzfVxuICAgICAgICBvblNjcm9sbD17X29uU2Nyb2xsfVxuICAgICAgICBvblNlbGVjdGlvbkNoYW5nZT17X29uU2VsZWN0aW9uQ2hhbmdlfVxuICAgICAgICBvblNlbGVjdGlvbkNoYW5nZVNob3VsZFNldFJlc3BvbmRlcj17ZW1wdHlGdW5jdGlvblRoYXRSZXR1cm5zVHJ1ZX1cbiAgICAgICAgc2VsZWN0aW9uPXtzZWxlY3Rpb259XG4gICAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgICAgdGV4dD17dGV4dH1cbiAgICAgIC8+XG4gICAgKTtcbiAgfSBlbHNlIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnKSB7XG4gICAgY29uc3Qgc3R5bGUgPSBbcHJvcHMuc3R5bGVdO1xuICAgIGNvbnN0IGF1dG9DYXBpdGFsaXplID0gcHJvcHMuYXV0b0NhcGl0YWxpemUgfHwgJ3NlbnRlbmNlcyc7XG4gICAgbGV0IGNoaWxkcmVuID0gcHJvcHMuY2hpbGRyZW47XG4gICAgbGV0IGNoaWxkQ291bnQgPSAwO1xuICAgIFJlYWN0LkNoaWxkcmVuLmZvckVhY2goY2hpbGRyZW4sICgpID0+ICsrY2hpbGRDb3VudCk7XG4gICAgaW52YXJpYW50KFxuICAgICAgIShwcm9wcy52YWx1ZSAmJiBjaGlsZENvdW50KSxcbiAgICAgICdDYW5ub3Qgc3BlY2lmeSBib3RoIHZhbHVlIGFuZCBjaGlsZHJlbi4nLFxuICAgICk7XG4gICAgaWYgKGNoaWxkQ291bnQgPiAxKSB7XG4gICAgICBjaGlsZHJlbiA9IDxUZXh0PntjaGlsZHJlbn08L1RleHQ+O1xuICAgIH1cblxuICAgIHRleHRJbnB1dCA9IChcbiAgICAgIC8qICRGbG93Rml4TWUgdGhlIHR5cGVzIGZvciBBbmRyb2lkVGV4dElucHV0IGRvbid0IG1hdGNoIHVwIGV4YWN0bHkgd2l0aFxuICAgICAgICB0aGUgcHJvcHMgZm9yIFRleHRJbnB1dC4gVGhpcyB3aWxsIG5lZWQgdG8gZ2V0IGZpeGVkICovXG4gICAgICA8QW5kcm9pZFRleHRJbnB1dFxuICAgICAgICByZWY9e19zZXROYXRpdmVSZWZ9XG4gICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgYXV0b0NhcGl0YWxpemU9e2F1dG9DYXBpdGFsaXplfVxuICAgICAgICBjaGlsZHJlbj17Y2hpbGRyZW59XG4gICAgICAgIGRpc2FibGVGdWxsc2NyZWVuVUk9e3Byb3BzLmRpc2FibGVGdWxsc2NyZWVuVUl9XG4gICAgICAgIG1vc3RSZWNlbnRFdmVudENvdW50PXttb3N0UmVjZW50RXZlbnRDb3VudH1cbiAgICAgICAgb25CbHVyPXtfb25CbHVyfVxuICAgICAgICBvbkNoYW5nZT17X29uQ2hhbmdlfVxuICAgICAgICBvbkZvY3VzPXtfb25Gb2N1c31cbiAgICAgICAgLyogJEZsb3dGaXhNZSB0aGUgdHlwZXMgZm9yIEFuZHJvaWRUZXh0SW5wdXQgZG9uJ3QgbWF0Y2ggdXAgZXhhY3RseVxuICAgICAgICAgKiB3aXRoIHRoZSBwcm9wcyBmb3IgVGV4dElucHV0LiBUaGlzIHdpbGwgbmVlZCB0byBnZXQgZml4ZWQgKi9cbiAgICAgICAgb25TY3JvbGw9e19vblNjcm9sbH1cbiAgICAgICAgb25TZWxlY3Rpb25DaGFuZ2U9e19vblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgc2VsZWN0aW9uPXtzZWxlY3Rpb259XG4gICAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgICAgdGV4dD17dGV4dH1cbiAgICAgICAgdGV4dEJyZWFrU3RyYXRlZ3k9e3Byb3BzLnRleHRCcmVha1N0cmF0ZWd5fVxuICAgICAgLz5cbiAgICApO1xuICB9XG4gIHJldHVybiAoXG4gICAgPFRleHRBbmNlc3Rvci5Qcm92aWRlciB2YWx1ZT17dHJ1ZX0+XG4gICAgICA8VG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrXG4gICAgICAgIG9uTGF5b3V0PXtwcm9wcy5vbkxheW91dH1cbiAgICAgICAgb25QcmVzcz17X29uUHJlc3N9XG4gICAgICAgIGFjY2Vzc2libGU9e3Byb3BzLmFjY2Vzc2libGV9XG4gICAgICAgIGFjY2Vzc2liaWxpdHlMYWJlbD17cHJvcHMuYWNjZXNzaWJpbGl0eUxhYmVsfVxuICAgICAgICBhY2Nlc3NpYmlsaXR5Um9sZT17cHJvcHMuYWNjZXNzaWJpbGl0eVJvbGV9XG4gICAgICAgIGFjY2Vzc2liaWxpdHlTdGF0ZT17cHJvcHMuYWNjZXNzaWJpbGl0eVN0YXRlfVxuICAgICAgICBuYXRpdmVJRD17cHJvcHMubmF0aXZlSUR9XG4gICAgICAgIHRlc3RJRD17cHJvcHMudGVzdElEfVxuICAgICAgICB7Li4uYWRkaXRpb25hbFRvdWNoYWJsZVByb3BzfT5cbiAgICAgICAge3RleHRJbnB1dH1cbiAgICAgIDwvVG91Y2hhYmxlV2l0aG91dEZlZWRiYWNrPlxuICAgIDwvVGV4dEFuY2VzdG9yLlByb3ZpZGVyPlxuICApO1xufVxuXG5jb25zdCBFeHBvcnRlZEZvcndhcmRSZWY6IFJlYWN0LkFic3RyYWN0Q29tcG9uZW50PFxuICBSZWFjdC5FbGVtZW50Q29uZmlnPHR5cGVvZiBJbnRlcm5hbFRleHRJbnB1dD4sXG4gIFJlYWN0LkVsZW1lbnRSZWY8SG9zdENvbXBvbmVudDxtaXhlZD4+ICYgSW1wZXJhdGl2ZU1ldGhvZHMsXG4+ID0gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiBUZXh0SW5wdXQoXG4gIHByb3BzLFxuICBmb3J3YXJkZWRSZWY6IFJlYWN0UmVmU2V0dGVyPFxuICAgIFJlYWN0LkVsZW1lbnRSZWY8SG9zdENvbXBvbmVudDxtaXhlZD4+ICYgSW1wZXJhdGl2ZU1ldGhvZHMsXG4gID4sXG4pIHtcbiAgcmV0dXJuIDxJbnRlcm5hbFRleHRJbnB1dCB7Li4ucHJvcHN9IGZvcndhcmRlZFJlZj17Zm9yd2FyZGVkUmVmfSAvPjtcbn0pO1xuXG4vLyAkRmxvd0ZpeE1lXG5FeHBvcnRlZEZvcndhcmRSZWYuZGVmYXVsdFByb3BzID0ge1xuICBhbGxvd0ZvbnRTY2FsaW5nOiB0cnVlLFxuICByZWplY3RSZXNwb25kZXJUZXJtaW5hdGlvbjogdHJ1ZSxcbiAgdW5kZXJsaW5lQ29sb3JBbmRyb2lkOiAndHJhbnNwYXJlbnQnLFxufTtcblxuLy8gVE9ETzogRGVwcmVjYXRlIHRoaXNcbi8vICRGbG93Rml4TWVcbkV4cG9ydGVkRm9yd2FyZFJlZi5wcm9wVHlwZXMgPSBEZXByZWNhdGVkVGV4dElucHV0UHJvcFR5cGVzO1xuXG4vLyAkRmxvd0ZpeE1lXG5FeHBvcnRlZEZvcndhcmRSZWYuU3RhdGUgPSB7XG4gIGN1cnJlbnRseUZvY3VzZWRJbnB1dDogVGV4dElucHV0U3RhdGUuY3VycmVudGx5Rm9jdXNlZElucHV0LFxuXG4gIGN1cnJlbnRseUZvY3VzZWRGaWVsZDogVGV4dElucHV0U3RhdGUuY3VycmVudGx5Rm9jdXNlZEZpZWxkLFxuICBmb2N1c1RleHRJbnB1dDogVGV4dElucHV0U3RhdGUuZm9jdXNUZXh0SW5wdXQsXG4gIGJsdXJUZXh0SW5wdXQ6IFRleHRJbnB1dFN0YXRlLmJsdXJUZXh0SW5wdXQsXG59O1xuXG50eXBlIFRleHRJbnB1dENvbXBvbmVudFN0YXRpY3MgPSAkUmVhZE9ubHk8e3xcbiAgU3RhdGU6ICRSZWFkT25seTx7fFxuICAgIGN1cnJlbnRseUZvY3VzZWRJbnB1dDogdHlwZW9mIFRleHRJbnB1dFN0YXRlLmN1cnJlbnRseUZvY3VzZWRJbnB1dCxcbiAgICBjdXJyZW50bHlGb2N1c2VkRmllbGQ6IHR5cGVvZiBUZXh0SW5wdXRTdGF0ZS5jdXJyZW50bHlGb2N1c2VkRmllbGQsXG4gICAgZm9jdXNUZXh0SW5wdXQ6IHR5cGVvZiBUZXh0SW5wdXRTdGF0ZS5mb2N1c1RleHRJbnB1dCxcbiAgICBibHVyVGV4dElucHV0OiB0eXBlb2YgVGV4dElucHV0U3RhdGUuYmx1clRleHRJbnB1dCxcbiAgfH0+LFxuICBwcm9wVHlwZXM6IHR5cGVvZiBEZXByZWNhdGVkVGV4dElucHV0UHJvcFR5cGVzLFxufH0+O1xuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIG11bHRpbGluZUlucHV0OiB7XG4gICAgLy8gVGhpcyBkZWZhdWx0IHRvcCBpbnNldCBtYWtlcyBSQ1RNdWx0aWxpbmVUZXh0SW5wdXRWaWV3IHNlZW0gYXMgY2xvc2UgYXMgcG9zc2libGVcbiAgICAvLyB0byBzaW5nbGUtbGluZSBSQ1RTaW5nbGVsaW5lVGV4dElucHV0VmlldyBkZWZhdWx0cywgdXNpbmcgdGhlIHN5c3RlbSBkZWZhdWx0c1xuICAgIC8vIG9mIGZvbnQgc2l6ZSAxNyBhbmQgYSBoZWlnaHQgb2YgMzEgcG9pbnRzLlxuICAgIHBhZGRpbmdUb3A6IDUsXG4gIH0sXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSAoKEV4cG9ydGVkRm9yd2FyZFJlZjogYW55KTogUmVhY3QuQWJzdHJhY3RDb21wb25lbnQ8XG4gIFJlYWN0LkVsZW1lbnRDb25maWc8dHlwZW9mIEludGVybmFsVGV4dElucHV0PixcbiAgJFJlYWRPbmx5PHt8XG4gICAgLi4uUmVhY3QuRWxlbWVudFJlZjxIb3N0Q29tcG9uZW50PG1peGVkPj4sXG4gICAgLi4uSW1wZXJhdGl2ZU1ldGhvZHMsXG4gIHx9Pixcbj4gJlxuICBUZXh0SW5wdXRDb21wb25lbnRTdGF0aWNzKTtcbiJdfQ==